"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2748],{3476:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>m});const i=JSON.parse('{"id":"CMU15-445/c15","title":"Query Planning & Optimization","description":"CMU15-445/645 Query Planning & Optimization","source":"@site/docs/CMU15-445/c15.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c15","permalink":"/RulerChen-Website/docs/CMU15-445/c15","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c15.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1757601758000,"sidebarPosition":15,"frontMatter":{"title":"Query Planning & Optimization","sidebar_position":15,"description":"CMU15-445/645 Query Planning & Optimization","keywords":["CMU15-445/645","Query Planning & Optimization","CMU15-445/645 \u7b46\u8a18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Query Execution","permalink":"/RulerChen-Website/docs/CMU15-445/c13"},"next":{"title":"Concurrency Control Theory","permalink":"/RulerChen-Website/docs/CMU15-445/c16"}}');var a=n(4848),l=n(8453);const t={title:"Query Planning & Optimization",sidebar_position:"15",description:"CMU15-445/645 Query Planning & Optimization",keywords:["CMU15-445/645","Query Planning & Optimization","CMU15-445/645 \u7b46\u8a18"],tags:["CMU15-445"]},r=void 0,c={},m=[{value:"Logical Query Optimization",id:"logical-query-optimization",level:2},{value:"Selection Optimization",id:"selection-optimization",level:3},{value:"Projection Optimization",id:"projection-optimization",level:3},{value:"Query Rewrite Optimization",id:"query-rewrite-optimization",level:3},{value:"Join Optimization",id:"join-optimization",level:3},{value:"Cost Estimation",id:"cost-estimation",level:2},{value:"Statistics",id:"statistics",level:3},{value:"Histograms",id:"histograms",level:3},{value:"Sketches",id:"sketches",level:3},{value:"Sampling",id:"sampling",level:3},{value:"Query Plan",id:"query-plan",level:2},{value:"Single-Relation Query Plans",id:"single-relation-query-plans",level:3},{value:"Multi-Relation Query Plans",id:"multi-relation-query-plans",level:3},{value:"Generative / Bottom-up",id:"generative--bottom-up",level:4},{value:"Transformation / Top-down",id:"transformation--top-down",level:4}];function o(e){const s={annotation:"annotation",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",msub:"msub",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,l.R)(),...e.components},{Head:n,ImageModal:i}=s;return n||d("Head",!0),i||d("ImageModal",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n,{children:(0,a.jsx)("title",{children:"CMU 15-445 Query Planning & Optimization"})}),"\n",(0,a.jsx)(s.p,{children:"\u7531\u65bc SQL \u662f\u4e00\u7a2e\u5ba3\u544a\u5f0f\u7684\u8a9e\u8a00\uff0c\u6240\u4ee5 DBMS \u4e0d\u6703\u5177\u9ad4\u77e5\u9053\u81ea\u5df1\u61c9\u8a72\u8981\u600e\u9ebc\u57f7\u884c\uff0c\u800c\u662f\u9700\u8981\u5c07 SQL \u8a9e\u53e5\u8f49\u63db\u6210\u53ef\u57f7\u884c\u7684 query plan\u3002"}),"\n",(0,a.jsx)(s.p,{children:"\u4f46\u627e\u5230\u6700\u4f73\u7684 query plan \u662f\u4e00\u500b NP-hard \u7684\u554f\u984c\uff0c\u56e0\u6b64\u672c\u7bc0\u7684\u4e3b\u8981\u5167\u5bb9\u5c31\u662f\u5982\u4f55\u900f\u904e\u6f14\u7b97\u6cd5\u5728\u6709\u9650\u7684\u6642\u9593\u5167\u627e\u5230\u4e00\u500b\u597d\u7684 query plan\u3002"}),"\n",(0,a.jsx)(s.p,{children:"\u6211\u5011\u4f7f\u7528\u7684\u7b56\u7565\u4e3b\u8981\u6709\u5169\u500b :"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Heuristic-based : \u4f7f\u7528\u65e2\u5b9a\u7684\u898f\u5247\u4f86\u8abf\u6574\u9806\u5e8f"}),"\n",(0,a.jsx)(s.li,{children:"Cost-based : \u4f9d\u64da\u7d71\u8a08\u8cc7\u6599\u4f86\u4f30\u7b97\u6210\u672c\uff0c\u9078\u64c7 cost \u6700\u4f4e\u7684 query plan"}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"\u800c query plan \u4e3b\u8981\u4e5f\u6709\u5169\u7a2e\u985e\u578b :"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Logical Plan : \u67e5\u8a62\u4e2d\u7684\u95dc\u4fc2\u4ee3\u6578\u8868\u9054\u5f0f"}),"\n",(0,a.jsx)(s.li,{children:"Physical Plan : \u5177\u9ad4\u7684\u57f7\u884c\u7b56\u7565\uff0c\u5982\u6392\u5e8f\u7684\u65b9\u6cd5\u3001join \u7684\u65b9\u5f0f\u7b49"}),"\n"]}),"\n",(0,a.jsx)(i,{src:"/img/cmu15-445/c15/image.webp",caption:"Query Process"}),"\n",(0,a.jsx)(s.p,{children:"\u5728\u9019\u500b SQL \u8a9e\u53e5\u57f7\u884c\u7684\u6d41\u7a0b\u5716\u4e2d\uff0cbinder \u8ddf tree rewriter \u6703\u8ca0\u8cac\u5c07 SQL \u8a9e\u53e5\u8f49\u63db\u6210 logical plan\uff0c\u800c optimizer \u5247\u6703\u900f\u904e system catalog \u6240\u63d0\u4f9b\u7684\u8cc7\u8a0a\u4f86\u5c07 logical plan \u8f49\u63db\u6210 physical plan\u3002"}),"\n",(0,a.jsx)(s.h2,{id:"logical-query-optimization",children:"Logical Query Optimization"}),"\n",(0,a.jsx)(s.p,{children:"\u6211\u5011\u53ef\u4ee5\u5148\u900f\u904e\u4e00\u4e9b\u7c21\u55ae\u7684\u898f\u5247\u5c07 logical plan \u9032\u884c\u512a\u5316\uff0c\u9019\u4e9b\u898f\u5247\u901a\u5e38\u662f\u57fa\u65bc\u95dc\u4fc2\u4ee3\u6578\u7684\u7b49\u50f9\u8f49\u63db\u3002"}),"\n",(0,a.jsx)(s.h3,{id:"selection-optimization",children:"Selection Optimization"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"\u76e1\u65e9\u57f7\u884c\u7be9\u9078\u689d\u4ef6 : \u900f\u904e\u7be9\u9078\u689d\u4ef6\u6e1b\u5c11 tuple \u6578\u91cf\uff0c\u7279\u5225\u662f\u5728 join \u4e4b\u524d"}),"\n",(0,a.jsx)(s.li,{children:"\u91cd\u65b0\u6392\u5e8f\u7be9\u9078\u689d\u4ef6 : \u5c07\u9078\u64c7\u6027\u6700\u9ad8\u7684\u689d\u4ef6\u653e\u5728\u524d\u9762\u57f7\u884c\uff0c\u4f7f\u5f8c\u9762\u6240\u9700\u904e\u6ffe\u7684 tuple \u6578\u91cf\u66f4\u5c11"}),"\n",(0,a.jsxs)(s.li,{children:["\u5c07\u8907\u96dc\u7684\u7be9\u9078\u689d\u4ef6\u62c6\u5206 : \u62c6\u5206\u7be9\u9078\u689d\u4ef6\uff0c\u5982 ",(0,a.jsx)(s.code,{children:"X = Y AND Y = 3"})," \u53ef\u4ee5\u62c6\u5206\u6210 ",(0,a.jsx)(s.code,{children:"X = 3 AND Y = 3"})]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"projection-optimization",children:"Projection Optimization"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\u522a\u9664\u4e0d\u5fc5\u8981\u7684 column : \u6e1b\u5c11 I/O\uff0c\u8209\u4f8b\u4f86\u8aaa\uff0c\u5982\u679c SQL \u4e2d\u53ea\u6709 ",(0,a.jsx)(s.code,{children:"SELECT name FROM table"}),"\uff0c\u90a3\u9ebc\u6211\u5011\u5c31\u61c9\u8a72\u5728\u4e00\u958b\u59cb\u53ea\u7559 name \u6b04\u4f4d\u518d\u505a\u5f8c\u7e8c\u64cd\u4f5c"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"query-rewrite-optimization",children:"Query Rewrite Optimization"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\u79fb\u9664\u4e0d\u53ef\u80fd\u6216\u4e0d\u5fc5\u8981\u7684\u7be9\u9078\u689d\u4ef6 : \u5982 ",(0,a.jsx)(s.code,{children:"WHERE 1 = 0"})]}),"\n",(0,a.jsxs)(s.li,{children:["\u5408\u4f75\u7be9\u9078\u689d\u4ef6 : \u5982 ",(0,a.jsx)(s.code,{children:"VAL BETWEEN 1 AND 10 OR VAL BETWEEN 5 AND 15"})," \u53ef\u4ee5\u5408\u4f75\u6210 ",(0,a.jsx)(s.code,{children:"VAL BETWEEN 1 AND 15"})]}),"\n",(0,a.jsx)(s.li,{children:"\u6d88\u9664\u5b50\u67e5\u8a62 : \u5c07\u5b50\u67e5\u8a62\u6524\u5e73 (flatten) \u6216\u53d6\u6d88\u95dc\u806f (de-correlate)"}),"\n",(0,a.jsx)(s.li,{children:"\u62c6\u89e3\u548c\u5132\u5b58\u7d50\u679c\u81f3\u81e8\u6642\u8868 : \u5982\u679c\u6709\u8907\u96dc\u7684\u5b50\u67e5\u8a62\uff0c\u53ef\u4ee5\u5c07\u7d50\u679c\u5132\u5b58\u81f3\u81e8\u6642\u8868\u4e26\u9010\u4e00\u512a\u5316"}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"join-optimization",children:"Join Optimization"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Join Reordering : \u91cd\u65b0\u6392\u5e8f join \u7684\u9806\u5e8f\uff0c\u5982\u5c07\u8cc7\u6599\u91cf\u8f03\u5c11\u7684 table \u7576\u6210 outer table"}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"cost-estimation",children:"Cost Estimation"}),"\n",(0,a.jsx)(s.p,{children:"\u9664\u4e86\u4e00\u4e9b\u57fa\u672c\u7684 heuristic \u5916\uff0c\u6709\u8a31\u591a\u64cd\u4f5c\u5728 DBMS \u4e2d\u6c92\u6709\u4e00\u5b9a\u7684\u512a\u52a3\uff0c\u6240\u4ee5\u6211\u5011\u9700\u8981\u900f\u904e cost estimation \u4f86\u4f30\u7b97\u6210\u672c\u3002"}),"\n",(0,a.jsx)(s.p,{children:"\u67e5\u8a62\u6210\u672c\u901a\u5e38\u53d6\u6c7a\u65bc\u5f88\u591a\u56e0\u7d20\uff0c\u5982 CPU\u3001\u786c\u789f I/O\u3001\u8a18\u61b6\u9ad4\u3001\u7db2\u7d61\u7b49\u3002\n\u4ee5 PostgreSQL \u4f86\u8aaa\uff0c\u4ed6\u6703\u70ba\u6bcf\u500b\u64cd\u4f5c\u6307\u5b9a\u4e00\u500b\u56fa\u5b9a\u7684 CPU \u6210\u672c (\u5982 seq_page_cost = 1.0, random_page_cost = 4.0)\uff0c\u6216\u662f\u4e00\u500b\u56fa\u5b9a\u7684 I/O \u6210\u672c (\u5982 cpu_tuple_cost = 0.01, cpu_index_tuple_cost = 0.005)\u3002"}),"\n",(0,a.jsx)(s.p,{children:"\u4f46\u5927\u90e8\u5206\u7684\u6210\u672c\u4f9d\u820a\u53d6\u6c7a\u65bc\u5728\u6574\u500b query plan \u4e2d\u6211\u5011\u8981\u8b80\u5beb\u591a\u5c11 tuple\uff0c\u56e0\u6b64 DBMS \u9700\u8981\u7dad\u8b77\u4e00\u4e9b\u7d71\u8a08\u8cc7\u6599\uff0c\u5982 tuple \u6578\u91cf\u6216\u6700\u5927\u6700\u5c0f\u503c\u4f86\u5e6b\u52a9\u4f30\u7b97\u6210\u672c\u3002"}),"\n",(0,a.jsx)(s.h3,{id:"statistics",children:"Statistics"}),"\n",(0,a.jsx)(s.p,{children:"\u901a\u5e38\u5c0d\u65bc\u4e00\u500b\u4efb\u610f\u7684 table R\uff0cDBMS \u90fd\u6703\u7dad\u8b77\u4ee5\u4e0b\u7d71\u8a08\u8cc7\u6599 :"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"N"}),(0,a.jsx)(s.mi,{children:"R"})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"N_R"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3283em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.00773em"},children:"R"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," : R \u4e2d\u7684 tuple \u6578\u91cf"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"A"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"V(A,R)"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})})]})," : R \u4e2d\u5c6c\u6027 A \u7684\u4e0d\u540c\u503c\u6578\u91cf"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["\u900f\u904e\u9019\u5169\u500b\u8cc7\u8a0a\uff0c\u6211\u5011\u53ef\u4ee5\u5f97\u5230 selection cardinality ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"S"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"A"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"N"}),(0,a.jsx)(s.mi,{children:"R"})]}),(0,a.jsx)(s.mi,{mathvariant:"normal",children:"/"}),(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"A"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"SC(A,R) = N_R / V(A,R)"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"SC"}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"mclose",children:")"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3283em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.00773em"},children:"R"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mord",children:"/"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})]})]}),"\u3002"]}),"\n",(0,a.jsx)(s.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u4ee5 PostgreSQL \u70ba\u4f8b\uff0c\u5b83\u9084\u6703\u7dad\u8b77\u4ee5\u4e0b\u7d71\u8a08\u8cc7\u6599 :"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"n_distinct : \u6bcf\u500b\u6b04\u4f4d\u7684\u552f\u4e00\u503c\u6578\u91cf"}),"\n",(0,a.jsx)(s.li,{children:"most_common_vals : \u6bcf\u500b\u6b04\u4f4d\u4e2d\u6700\u5e38\u51fa\u73fe\u7684\u503c"}),"\n",(0,a.jsx)(s.li,{children:"histogram_bounds : \u6bcf\u500b\u6b04\u4f4d\u7684 histogram \u7bc4\u570d"}),"\n",(0,a.jsx)(s.li,{children:"correlation : \u6bcf\u500b\u6b04\u4f4d\u7684\u503c\u8207\u7269\u7406\u5132\u5b58\u9806\u5e8f\u7684\u76f8\u95dc\u6027"}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"histograms",children:"Histograms"}),"\n",(0,a.jsx)(s.p,{children:"\u771f\u5be6\u7684\u8cc7\u6599\u4e2d\u5e7e\u4e4e\u4e0d\u53ef\u80fd\u662f uniform \u7684\uff0c\u56e0\u6b64\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 histogram \u4f86\u66f4\u597d\u7684\u4f30\u7b97\u6210\u672c\uff0chistogram \u6703\u5c07\u5c6c\u6027\u7684\u503c\u57df (range) \u5206\u6210\u591a\u500b\u5340\u9593 (bucket)\uff0c\u4e26\u8a18\u9304\u6bcf\u500b\u5340\u9593\u7684 tuple \u6578\u91cf\u3002"}),"\n",(0,a.jsx)(s.h3,{id:"sketches",children:"Sketches"}),"\n",(0,a.jsx)(s.p,{children:"\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 probabilistic data structures \u4f86\u7522\u751f\u8fd1\u4f3c\u65bc dataset \u7684\u8cc7\u6599\uff0c\u5982 HyperLogLog\u3001Count-Min Sketch \u7b49\u7b49\u3002"}),"\n",(0,a.jsx)(s.h3,{id:"sampling",children:"Sampling"}),"\n",(0,a.jsxs)(s.p,{children:["DBMS \u53ef\u4ee5\u91dd\u5c0d table \u7684\u90e8\u5206\u8cc7\u6599\u9032\u884c sampling \u4f86\u4f30\u7b97\u6210\u672c\uff0c\u4e26\u5728 table \u8b8a\u52d5\u8d85\u904e\u4e00\u5b9a\u6bd4\u4f8b\u6642\u91cd\u65b0\u9032\u884c sampling\uff0c\u5982 PostgreSQL \u7684 ",(0,a.jsx)(s.code,{children:"ANALYZE"})," \u6307\u4ee4\u3002"]}),"\n",(0,a.jsx)(s.h2,{id:"query-plan",children:"Query Plan"}),"\n",(0,a.jsx)(s.p,{children:"\u5728\u6709\u4e86 cost estimation \u5f8c\uff0coptimizer \u5c31\u53ef\u4ee5\u958b\u59cb\u5728\u5de8\u5927\u7684 search space \u4e2d\u5c0b\u627e\u6700\u4f73\u7684 query plan\u3002"}),"\n",(0,a.jsx)(s.h3,{id:"single-relation-query-plans",children:"Single-Relation Query Plans"}),"\n",(0,a.jsx)(s.p,{children:"\u5c0d\u65bc\u55ae\u8868\u67e5\u8a62\u4f86\u8aaa\uff0c\u53ea\u9700\u8981\u4f7f\u7528\u7c21\u55ae\u7684\u555f\u767c\u5f0f\u898f\u5247\u5373\u53ef\uff0c\u76ee\u6a19\u662f\u627e\u5230\u6700\u4f73\u7684 access method\u3002"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"sequential scan"}),"\n",(0,a.jsx)(s.li,{children:"binary search (with clustered indexes)"}),"\n",(0,a.jsx)(s.li,{children:"index scan"}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"multi-relation-query-plans",children:"Multi-Relation Query Plans"}),"\n",(0,a.jsx)(s.p,{children:"\u96a8\u8457\u9023\u7d50\u6578\u91cf\u7684\u589e\u52a0\uff0c\u53ef\u4ee5\u9078\u64c7\u7684\u8a08\u5283\u6578\u91cf\u6703\u6025\u5287\u589e\u52a0\uff0c\u56e0\u6b64\u6211\u5011\u9700\u8981\u9650\u5236\u641c\u7d22\u7a7a\u9593\u4ee5\u4fbf\u5728\u6709\u9650\u6642\u9593\u5167\u627e\u5230\u6700\u4f73\u8a08\u5283\uff0c\u901a\u5e38\u6709 bottom-up \u548c top-down \u5169\u7a2e\u65b9\u6cd5\u3002"}),"\n",(0,a.jsx)(s.h4,{id:"generative--bottom-up",children:"Generative / Bottom-up"}),"\n",(0,a.jsx)(s.p,{children:"\u5f9e\u55ae\u8868\u958b\u59cb\u9010\u6b65\u5efa\u7acb\u66f4\u5927\u7684\u8a08\u756b\uff0c\u5c31\u50cf\u662f\u52d5\u614b\u898f\u5283 (Dynamic Programming) \u4e00\u6a23\u3002"}),"\n",(0,a.jsx)(s.p,{children:"\u8209\u4f8b\u4f86\u8aaa\uff0c\u5047\u8a2d\u6211\u5011\u8981\u627e\u5230\u4e09\u500b table A\u3001B\u3001C \u7684\u6700\u4f73 join order\uff0c\u6b65\u9a5f\u6703\u5927\u81f4\u5982\u4e0b :"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"\u5148\u91dd\u5c0d\u55ae\u8868\u627e\u5230\u6700\u4f73\u7684 access method\uff0c\u5982 sequential scan\u3001index scan"}),"\n",(0,a.jsx)(s.li,{children:"\u5169\u5169\u4e00\u7d44\uff0c\u627e\u51fa\u6700\u4f73\u7684 join order\uff0c\u5982 (A hash join B)\u3001(B merge sort join C)\u3001(A hash join C)"}),"\n",(0,a.jsx)(s.li,{children:"\u63a5\u8457\u5728\u5f9e\u4e0a\u4e00\u8f2a\u7684\u7d50\u679c\u4e2d\u627e\u51fa\u6700\u4f73\u7684 join order\uff0c\u5982 ((A hash join B) merge sort join C)\u3001((B merge sort join C) hash join A)"}),"\n"]}),"\n",(0,a.jsx)(i,{src:"/img/cmu15-445/c15/image-6.webp",caption:"Bottom-Up"}),"\n",(0,a.jsx)(s.h4,{id:"transformation--top-down",children:"Transformation / Top-down"}),"\n",(0,a.jsx)(s.p,{children:"Optimizer \u6703\u5f9e logical plan \u958b\u59cb\uff0c\u4f7f\u7528 branch and bound \u7684\u65b9\u6cd5\u4f86\u904d\u6b77\u6a39\u72c0\u7d50\u69cb\uff0c\u4e26\u5c07 logical operator \u8f49\u63db\u6210 physical operator\u3002"}),"\n",(0,a.jsx)(i,{src:"/img/cmu15-445/c15/image-5.webp",caption:"Top-Down"})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}function d(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>r});var i=n(6540);const a={},l=i.createContext(a);function t(e){const s=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);