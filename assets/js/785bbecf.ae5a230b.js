"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["1708"],{93775:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>A,default:()=>R,toc:()=>q,metadata:()=>O,assets:()=>F,contentTitle:()=>Z});var i,l,t,s,o,a,d,c,h,p,x,u,j,m,f,g,b,k,v,y,L,I,E,D,G,S,w,_,C,Q,O=JSON.parse('{"id":"Observability/loki","title":"[Loki] \u60E1\u4F5C\u5287\u4E4B\u795E - Loki \u89E3\u5BC6\u65E5\u8A8C\u8FF7\u5BAE","description":"Grafana Loki \u57FA\u672C\u4ECB\u7D39","source":"@site/docs/Observability/loki.mdx","sourceDirName":"Observability","slug":"/Observability/loki","permalink":"/RulerChen-Website/docs/Observability/loki","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/Observability/loki.mdx","tags":[],"version":"current","lastUpdatedAt":1739371782000,"sidebarPosition":10,"frontMatter":{"title":"[Loki] \u60E1\u4F5C\u5287\u4E4B\u795E - Loki \u89E3\u5BC6\u65E5\u8A8C\u8FF7\u5BAE","sidebar_position":10,"description":"Grafana Loki \u57FA\u672C\u4ECB\u7D39","keywords":["grafana","loki","log"]},"sidebar":"tutorialSidebar","previous":{"title":"Observability","permalink":"/RulerChen-Website/docs/Observability/"},"next":{"title":"[Loki \u5BE6\u6230] \u6253\u9020\u672C\u5730\u65E5\u8A8C\u8490\u96C6\u7CFB\u7D71","permalink":"/RulerChen-Website/docs/Observability/loki-demo"}}'),B=r(85893),M=r(50065),V=r(67294);function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(null,arguments)}let U=({title:e,titleId:n,...r})=>V.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",id:"Layer_1",width:236.87,height:142.1,x:0,y:0,viewBox:"0.36 0.95 236.87 142.1","aria-labelledby":n},r),e?V.createElement("title",{id:n},e):null,i||(i=V.createElement("style",null,".st0{fill:#f7f7f7}")),l||(l=V.createElement("path",{d:"M14.95 128.29h13.73c-1.01 5.66-5.81 9.74-11.49 9.74-6.64 0-11.85-5.38-11.85-12.25 0-6.81 5.48-12.34 12.21-12.34 3.74 0 6.94 2.09 8.97 3.85l.16.14 2.97-3.66-.14-.13c-3.59-3.35-7.72-5.13-11.96-5.13-9.48 0-17.19 7.75-17.19 17.28 0 9.64 7.39 17.19 16.82 17.19 9.04 0 16.41-7.27 16.78-16.54v-2.57H14.95zM40.78 121.28v-1.64h-4.16v23.05h4.93v-13.83c0-2.63 2-4.46 4.87-4.46h2.78v-4.75h-3.28c-2.08-.01-3.92.58-5.14 1.63M67.89 122.22a11.22 11.22 0 0 0-7.54-2.94c-6.58 0-11.93 5.31-11.93 11.84 0 6.58 5.35 11.93 11.93 11.93 2.84 0 5.52-1.04 7.59-2.94v2.58h4.25v-23.05h-4.3zm-.59 8.9c0 3.83-3.1 6.95-6.91 6.95s-6.91-3.12-6.91-6.95c0-3.81 3.1-6.91 6.91-6.91s6.91 3.1 6.91 6.91M75.73 118.71v23.98h4.89v-18.66h7.2v-4.39h-7.2v-1.07c0-1.84 1.51-3.33 3.38-3.33h3.83v-4.66H84c-4.87 0-8.27 3.34-8.27 8.13M106.87 122.22a11.23 11.23 0 0 0-7.54-2.95c-6.58 0-11.93 5.31-11.93 11.84 0 6.58 5.35 11.93 11.93 11.93 2.84 0 5.52-1.04 7.59-2.94v2.58h4.25v-23.05h-4.3zm-7.5 15.85c-3.81 0-6.91-3.12-6.91-6.95 0-3.81 3.1-6.91 6.91-6.91s6.91 3.1 6.91 6.91c0 3.83-3.1 6.95-6.91 6.95M124.52 119.28c-2.13 0-4.21.74-5.91 2.08v-1.72h-4.16v23.05h4.93v-13.61c0-2.69 2.21-4.87 4.92-4.87a4.87 4.87 0 0 1 4.87 4.87v13.61h4.98v-13.61c-.01-5.4-4.32-9.8-9.63-9.8M155.54 122.22a11.23 11.23 0 0 0-7.54-2.95c-6.58 0-11.93 5.31-11.93 11.84 0 6.58 5.35 11.93 11.93 11.93 2.84 0 5.52-1.04 7.59-2.94v2.58h4.25v-23.05h-4.3zm-.59 8.9c0 3.83-3.1 6.95-6.91 6.95s-6.91-3.12-6.91-6.95c0-3.81 3.1-6.91 6.91-6.91s6.91 3.1 6.91 6.91M178.48 134.37v-24.66h-5.07v24.66c0 5.42 2.5 8.05 7.63 8.05h1.49v-5.07h-1.4c-1.68 0-2.65-1.08-2.65-2.98M196.11 118.57c-6.68 0-12.11 5.43-12.11 12.11s5.43 12.11 12.11 12.11 12.11-5.43 12.11-12.11-5.43-12.11-12.11-12.11m7.04 12.11c0 3.88-3.16 7.04-7.04 7.04s-7.04-3.16-7.04-7.04 3.16-7.04 7.04-7.04 7.04 3.15 7.04 7.04M229.01 118.94h-6.03l-7.14 7.98v-17.21h-5.07v32.71h5.07v-8.48l1.08-1.27 6.91 9.66.06.09h6.04l-9.74-13.44zM231.81 118.94h4.97v23.48h-4.97zM234.17 117.57c1.8 0 3.06-1.24 3.06-3.02 0-1.48-1.15-3.02-3.06-3.02-1.58 0-3.02 1.44-3.02 3.02 0 1.69 1.33 3.02 3.02 3.02",className:"st0"})),t||(t=V.createElement("linearGradient",{id:"SVGID_1_",x1:542.915,x2:542.915,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),s||(s=V.createElement("path",{fill:"url(#SVGID_1_)",d:"m102.59 95.31-8.28 1.28 1.28 8.28 8.28-1.27z"})),o||(o=V.createElement("linearGradient",{id:"SVGID_2_",x1:596.576,x2:596.576,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),a||(a=V.createElement("path",{fill:"url(#SVGID_2_)",d:"m132.49 85.92 36.56-5.63-1.28-8.28-36.55 5.62z"})),d||(d=V.createElement("linearGradient",{id:"SVGID_3_",x1:569.155,x2:569.155,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),c||(c=V.createElement("path",{fill:"url(#SVGID_3_)",d:"m118.25 79.63 1.27 8.28 8.29-1.27-1.28-8.29z"})),h||(h=V.createElement("linearGradient",{id:"SVGID_4_",x1:556.035,x2:556.035,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),p||(p=V.createElement("path",{fill:"url(#SVGID_4_)",d:"m116.84 101.6-1.28-8.28-8.28 1.27 1.27 8.29z"})),x||(x=V.createElement("linearGradient",{id:"SVGID_5_",x1:542.915,x2:542.915,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),u||(u=V.createElement("path",{fill:"url(#SVGID_5_)",d:"m93.59 91.9 8.28-1.27-1.27-8.29-8.28 1.28z"})),j||(j=V.createElement("linearGradient",{id:"SVGID_6_",x1:596.576,x2:596.576,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),m||(m=V.createElement("path",{fill:"url(#SVGID_6_)",d:"m169.77 84.98-36.56 5.62 1.28 8.29 36.55-5.63z"})),f||(f=V.createElement("linearGradient",{id:"SVGID_7_",x1:569.155,x2:569.155,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),g||(g=V.createElement("path",{fill:"url(#SVGID_7_)",d:"m120.25 92.6 1.27 8.28 8.28-1.27-1.27-8.29z"})),b||(b=V.createElement("linearGradient",{id:"SVGID_8_",x1:556.035,x2:556.035,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),k||(k=V.createElement("path",{fill:"url(#SVGID_8_)",d:"m106.56 89.91 8.28-1.28-1.27-8.28-8.29 1.27z"})),v||(v=V.createElement("linearGradient",{id:"SVGID_9_",x1:540.495,x2:540.495,y1:720.762,y2:599.332,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),y||(y=V.createElement("path",{fill:"url(#SVGID_9_)",d:"m91.6 78.94 3.49-.54L84.9 12.12l-3.5.54z"})),L||(L=V.createElement("linearGradient",{id:"SVGID_10_",x1:545.361,x2:545.361,y1:724.13,y2:593.756,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),I||(I=V.createElement("path",{fill:"url(#SVGID_10_)",d:"m96.4 78.2 3.5-.54L88.96 6.5l-3.5.54z"})),E||(E=V.createElement("linearGradient",{id:"SVGID_11_",x1:553.668,x2:553.668,y1:727.089,y2:588.856,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),D||(D=V.createElement("path",{fill:"url(#SVGID_11_)",d:"m104.62 76.93 3.49-.54L96.51.95l-3.5.54z"})),G||(G=V.createElement("linearGradient",{id:"SVGID_12_",x1:558.534,x2:558.534,y1:722.492,y2:596.468,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),S||(S=V.createElement("path",{fill:"url(#SVGID_12_)",d:"m109.42 76.19 3.5-.54-10.58-68.78-3.5.54z"})),w||(w=V.createElement("linearGradient",{id:"SVGID_13_",x1:566.737,x2:566.737,y1:717.193,y2:605.243,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),_||(_=V.createElement("path",{fill:"url(#SVGID_13_)",d:"m117.53 74.95 3.5-.54-9.4-61.1-3.5.53z"})),C||(C=V.createElement("linearGradient",{id:"SVGID_14_",x1:571.603,x2:571.603,y1:718.808,y2:602.568,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},V.createElement("stop",{offset:0,stopColor:"#faed1e"}),V.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),Q||(Q=V.createElement("path",{fill:"url(#SVGID_14_)",d:"m122.34 74.21 3.5-.54-9.76-63.44-3.5.53z"}))),A={title:"[Loki] \u60E1\u4F5C\u5287\u4E4B\u795E - Loki \u89E3\u5BC6\u65E5\u8A8C\u8FF7\u5BAE",sidebar_position:10,description:"Grafana Loki \u57FA\u672C\u4ECB\u7D39",keywords:["grafana","loki","log"]},Z=void 0,F={},q=[{value:"Background",id:"background",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Storage",id:"storage",level:3},{value:"Multi-tenancy",id:"multi-tenancy",level:3},{value:"Components",id:"components",level:2},{value:"Distributor",id:"distributor",level:3},{value:"Ingester",id:"ingester",level:3},{value:"Query Frontend",id:"query-frontend",level:3},{value:"Query Scheduler",id:"query-scheduler",level:3},{value:"Querier",id:"querier",level:3},{value:"Index Gateway",id:"index-gateway",level:3},{value:"Compactor",id:"compactor",level:3},{value:"Ruler",id:"ruler",level:3},{value:"Other Components",id:"other-components",level:3},{value:"Deployment Mode",id:"deployment-mode",level:2},{value:"Monolithic mode",id:"monolithic-mode",level:3},{value:"Simple scalable mode",id:"simple-scalable-mode",level:3},{value:"Microservices mode",id:"microservices-mode",level:3},{value:"Label",id:"label",level:2},{value:"Label Best Practices",id:"label-best-practices",level:3},{value:"Automatic Stream Sharding",id:"automatic-stream-sharding",level:3},{value:"Structure Metadata",id:"structure-metadata",level:3},{value:"Bloom Filter",id:"bloom-filter",level:3},{value:"Reference",id:"reference",level:2}];function P(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,M.a)(),...e.components};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,B.jsx)(U,{style:{width:"200px",height:"200px"}})}),"\n",(0,B.jsx)(n.h2,{id:"background",children:"Background"}),"\n",(0,B.jsx)(n.p,{children:"\u9996\u5148\u4F86\u4E86\u89E3\u4E00\u4E0B Loki \u9019\u500B\u5DE5\u5177\u51FA\u73FE\u7684\u80CC\u666F\uFF0C\u4E0B\u5716\u8AAA\u660E\u4E86\u4E00\u822C\u60C5\u6CC1\u4E0B\u5982\u4F55\u7528\u50B3\u7D71\u7684\u76E3\u63A7\u65B9\u5F0F\u9032\u884C\u932F\u8AA4\u5206\u6790\u3002"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Observability Cloud",src:r(78617).Z+"",width:"1442",height:"800"})}),"\n",(0,B.jsx)(n.p,{children:"\u9996\u5148 Prometheus \u6703\u4F9D\u64DA\u4E00\u4E9B\u6307\u6A19\u4F86\u767C\u9001\u8B66\u5831\u7D66\u8CA0\u8CAC\u4EBA\uFF0C\u8CA0\u8CAC\u4EBA\u5C31\u53BB\u6703\u67E5\u770B\u5100\u8868\u677F\u4F86\u67E5\u770B\u5230\u5E95\u662F\u54EA\u500B\u670D\u52D9\u51FA\u932F\uFF0C\u627E\u5230\u4E4B\u5F8C\u5C31\u6703\u900F\u904E\u65E5\u8A8C\u4F86\u67E5\u770B\u932F\u8AA4\uFF0C\u6216\u8005\u4F7F\u7528\u985E\u4F3C Jaeger \u7684\u8FFD\u8E64\u5DE5\u5177\u4F86\u67E5\u770B\u8ACB\u6C42\u7684\u6D41\u7A0B\u3002"}),"\n",(0,B.jsxs)(n.p,{children:["\u5728 Loki \u51FA\u73FE\u4E4B\u524D\uFF0C\u5982\u679C\u6211\u5011\u9700\u8981\u67E5\u770B k8s \u4E2D\u7684\u65E5\u8A8C\uFF0C\u6211\u5011\u53EF\u4EE5\u4F7F\u7528 ",(0,B.jsx)(n.code,{children:"kubectl logs -l name=XXX | grep XXX"})," \u6307\u4EE4\u4F86\u67E5\u770B\uFF0C\u9019\u6A23\u7684\u7F3A\u9EDE\u662F\u9700\u8981\u9010\u4E00\u67E5\u770B\u6BCF\u500B pod\uFF0C\u4E26\u4E14\u7576 pod \u88AB\u91CD\u555F\u6642\u5C31\u6709\u53EF\u80FD\u6703\u5C0E\u81F4\u65E5\u8A8C\u4E1F\u5931\uFF0C\u540C\u6642\uFF0C\u5728\u5100\u8868\u677F\u8DDF CLI \u4E2D\u5207\u63DB\u4E5F\u662F\u4E00\u4EF6\u9EBB\u7169\u7684\u4E8B\u60C5\u3002"]}),"\n",(0,B.jsx)(n.p,{children:"\u6211\u5011\u7576\u7136\u53EF\u4EE5\u4F7F\u7528\u985E\u4F3C ELK \u7684\u7CFB\u7D71\u4F86\u5132\u5B58\u548C\u67E5\u770B\u65E5\u8A8C\uFF0C\u4F46\u662F ELK \u672C\u8EAB\u4E26\u4E0D\u662F\u70BA\u65E5\u8A8C\u6240\u8A2D\u8A08\uFF0C\u56E0\u6B64\u5C31\u6703\u6709\u4E00\u4E9B\u7F3A\u9EDE\uFF0C\u4F8B\u5982\u5132\u5B58\u6210\u672C\u975E\u5E38\u6602\u8CB4\u3002"}),"\n",(0,B.jsxs)(n.p,{children:["\u4E5F\u56E0\u6B64\uFF0CGrafana Labs \u63A8\u51FA\u4E86 Loki \u9019\u500B\u958B\u6E90\u7684\u65E5\u8A8C\u8490\u96C6\u5DE5\u5177\uFF0C\u76EE\u7684\u5C31\u662F ",(0,B.jsx)(n.code,{children:"Keep it simple. Just support grep!"}),"\u3002"]}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Observability Cloud",src:r(19561).Z+"",width:"616",height:"267"})}),"\n",(0,B.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,B.jsx)(n.admonition,{type:"info",children:(0,B.jsxs)(n.blockquote,{children:["\n",(0,B.jsx)(n.p,{children:"Like Prometheus, but for logs."}),"\n"]})}),"\n",(0,B.jsx)(n.p,{children:"Loki \u662F\u5728 2018 \u5E74\u7684 KubeCon \u4E2D\u7531 Grafana Labs \u767C\u5E03\u7684\u958B\u6E90\u8EDF\u9AD4\uFF0C\u662F\u4E00\u500B\u53D7\u5230 Prometheus \u555F\u767C\u7684\u6C34\u5E73\u53EF\u64F4\u5C55\u3001\u9AD8\u53EF\u7528\u3001\u591A\u79DF\u6236\u7684\u65E5\u8A8C\u805A\u5408\u7CFB\u7D71\uFF0C\u8207 Prometheus \u7684\u4E0D\u540C\u4E4B\u8655\u5728\u65BC\u5B83\u5C08\u6CE8\u65BC\u65E5\u8A8C\u800C\u4E0D\u662F\u6307\u6A19\uFF0C\u4E26\u900F\u904E push \u6A21\u578B\u4F86\u6536\u96C6\u65E5\u8A8C\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u5F9E\u6574\u9AD4\u7684\u67B6\u69CB\u4F86\u770B\uFF0C\u4E3B\u8981\u53EF\u4EE5\u5206\u70BA\u4E09\u500B\u90E8\u5206 :"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Loki",src:r(63226).Z+"",width:"1200",height:"372"})}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.strong,{children:"Agent"})," : \u5E38\u898B\u7684\u6709 Promtail\u3001Alloy \u8DDF Fluentd \u7B49\uFF0C\u7528\u65BC\u6536\u96C6\u65E5\u8A8C\u548C\u6A19\u7C64\u4E26\u900F\u904E HTTP request \u5C07\u65E5\u8A8C\u767C\u9001\u5230 Loki"]}),"\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.strong,{children:"Loki"})," : \u7528\u65BC\u63A5\u6536\u3001\u5B58\u5132\u65E5\u8A8C\u4EE5\u53CA\u8655\u7406\u67E5\u8A62"]}),"\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.strong,{children:"Grafana"})," : \u53EF\u4EE5\u4F7F\u7528 LogQL \u4F86\u67E5\u8A62\u4E26\u986F\u793A Loki \u4E2D\u7684\u65E5\u8A8C"]}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"Loki \u5177\u6709\u4EE5\u4E0B\u7279\u9EDE :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"\u64F4\u5C55\u6027 (Scalability) : Loki \u6709\u4E09\u7A2E\u4E0D\u540C\u7684\u90E8\u5C6C\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u5C07\u6240\u6709\u7684\u7D44\u4EF6\u90FD\u90E8\u5C6C\u5728\u55AE\u4E00\u7BC0\u9EDE\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5C07\u6BCF\u500B\u7D44\u4EF6\u5206\u958B\u90E8\u5C6C\uFF0C\u4EE5\u6EFF\u8DB3\u4E0D\u540C\u7684\u9700\u6C42"}),"\n",(0,B.jsx)(n.li,{children:"\u591A\u79DF\u6236\u6027 (Multi-tenancy) : Loki \u53EF\u4EE5\u5141\u8A31\u591A\u500B\u79DF\u6236\u5171\u4EAB\u5BE6\u4F8B\u3002\u6BCF\u500B\u79DF\u6236\u7684\u8CC7\u6599\u90FD\u53EF\u4EE5\u900F\u904E\u8A2D\u5B9A ID \u8207\u5176\u4ED6\u79DF\u6236\u5B8C\u5168\u9694\u96E2"}),"\n",(0,B.jsx)(n.li,{children:"\u5132\u5B58\u6548\u7387 (Storage Efficiency) : Loki \u4F7F\u7528\u4E86\u7D93\u904E\u58D3\u7E2E\u7684 chunks\u3001\u8F03\u5C0F\u7684\u7D22\u5F15\u4EE5\u53CA\u4F7F\u7528\u7269\u4EF6\u5B58\u5132\uFF0C\u5927\u5E45\u964D\u4F4E\u4E86\u5132\u5B58\u6210\u672C"}),"\n",(0,B.jsxs)(n.li,{children:["\u8B66\u5831 (Alerting) : Loki \u4E2D\u7684 ",(0,B.jsx)(n.code,{children:"ruler"})," \u7D44\u4EF6\u53EF\u4EE5\u7528\u4F86\u76E3\u63A7\u65E5\u8A8C\u4E2D\u7684\u7570\u5E38"]}),"\n",(0,B.jsx)(n.li,{children:"Grafana \u6574\u5408 : Loki \u8207 Grafana \u7684\u6574\u5408\u975E\u5E38\u7DCA\u5BC6\uFF0C\u53EF\u4EE5\u65B9\u4FBF\u7684\u4F7F\u7528 LogQL \u8A9E\u8A00\u4F86\u67E5\u8A62\u65E5\u8A8C"}),"\n"]}),"\n",(0,B.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,B.jsxs)(n.p,{children:["Loki \u662F microservice-based \u7684\u67B6\u69CB\uFF0C\u53EF\u4EE5\u5C07\u6240\u6709\u7684\u7D44\u4EF6\u5206\u958B\u90E8\u7F72\uFF0C\u4E26\u4F7F\u7528 ",(0,B.jsx)(n.code,{children:"-target"})," \u63A7\u5236\u9019\u500B\u5BB9\u5668\u61C9\u8A72\u64D4\u4EFB\u7684\u89D2\u8272\uFF0C\u5177\u9AD4\u7684\u7D44\u4EF6\u5982\u4E0B\u5716\u6240\u793A :"]}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Loki Architecture",src:r(64554).Z+"",width:"1024",height:"774"})}),"\n",(0,B.jsx)(n.p,{children:"\u7576\u8CC7\u6599\u5BEB\u5165\u6642\uFF0C\u6D41\u7A0B\u5982\u4E0B :"}),"\n",(0,B.jsxs)(n.ol,{children:["\n",(0,B.jsx)(n.li,{children:"Distributor \u63A5\u6536\u5305\u542B\u65E5\u8A8C\u6D41\u548C\u65E5\u8A8C\u884C\u7684 HTTP POST \u8ACB\u6C42"}),"\n",(0,B.jsx)(n.li,{children:"Distributor \u5C0D\u8ACB\u6C42\u4E2D\u5305\u542B\u7684\u6BCF\u500B\u65E5\u8A8C\u6D41\u9032\u884C\u54C8\u5E0C\u904B\u7B97\uFF0C\u6839\u64DA\u4E00\u81F4\u6027\u54C8\u5E0C\u74B0 (Consistent Hash Ring) \u7684\u8CC7\u8A0A\uFF0C\u78BA\u8A8D\u6BCF\u500B\u6D41\u61C9\u88AB\u767C\u9001\u5230\u54EA\u500B Ingester"}),"\n",(0,B.jsx)(n.li,{children:"Distributor \u5C07\u6BCF\u500B\u65E5\u8A8C\u6D41\u767C\u9001\u5230\u5C0D\u61C9\u7684 Ingester \u5BE6\u4F8B\u4EE5\u53CA\u914D\u7F6E\u7684\u526F\u672C (\u6839\u64DA Replication Factor)"}),"\n",(0,B.jsx)(n.li,{children:"Ingester \u63A5\u6536\u5230\u65E5\u8A8C\u6D41\u5F8C\uFF0C\u6703\u70BA\u8A72\u6D41\u7684\u6578\u64DA\u5275\u5EFA\u4E00\u500B\u65B0\u7684 chunk \u6216\u8005\u5C07\u6578\u64DA\u8FFD\u52A0\u5230\u5DF2\u5B58\u5728\u7684 chunk \u4E2D"}),"\n",(0,B.jsx)(n.li,{children:"Ingester \u78BA\u8A8D\u5BEB\u5165\u64CD\u4F5C\u5B8C\u6210\uFF0C\u5411 Distributor \u767C\u9001\u56DE\u61C9"}),"\n",(0,B.jsx)(n.li,{children:"Distributor \u7B49\u5F85\u591A\u6578 (Quorum) Ingester \u7684\u5BEB\u5165\u78BA\u8A8D"}),"\n",(0,B.jsx)(n.li,{children:"\u5BEB\u5165\u64CD\u4F5C\u6210\u529F (\u5931\u6557) \u5F8C\uFF0CDistributor \u5411\u5BA2\u6236\u7AEF\u56DE\u61C9\u64CD\u4F5C\u7D50\u679C"}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"\u7576\u8B80\u53D6\u8CC7\u6599\u6642\uFF0C\u6D41\u7A0B\u5982\u4E0B :"}),"\n",(0,B.jsxs)(n.ol,{children:["\n",(0,B.jsx)(n.li,{children:"Query Frontend \u6536\u5230\u5305\u542B LogQL \u67E5\u8A62\u7684 HTTP GET \u8ACB\u6C42"}),"\n",(0,B.jsx)(n.li,{children:"Query Frontend \u5C07\u67E5\u8A62\u5206\u89E3\u70BA\u591A\u500B\u5B50\u67E5\u8A62\uFF0C\u4E26\u5C07\u9019\u4E9B\u5B50\u67E5\u8A62\u50B3\u905E\u7D66 Query Scheduler"}),"\n",(0,B.jsx)(n.li,{children:"Querier \u5F9E Query Scheduler \u4E2D\u63D0\u53D6\u5B50\u67E5\u8A62"}),"\n",(0,B.jsx)(n.li,{children:"Querier \u5C07\u5B50\u67E5\u8A62\u767C\u9001\u5230\u6240\u6709\u7684 Ingester\uFF0C\u7528\u65BC\u8B80\u53D6\u8A18\u61B6\u9AD4\u4E2D\u7684\u6578\u64DA"}),"\n",(0,B.jsx)(n.li,{children:"\u5982\u679C\u6709\u7684\u8A71\uFF0CIngester \u6703\u5728\u8A18\u61B6\u9AD4\u4E2D\u67E5\u627E\u4E26\u8FD4\u56DE\u76F8\u95DC\u6578\u64DA"}),"\n",(0,B.jsx)(n.li,{children:"\u5982\u679C Ingester \u8FD4\u56DE\u7684\u6578\u64DA\u4E0D\u8DB3\u6216\u6C92\u6709\u6578\u64DA\uFF0CQuerier \u6703\u5F9E\u5F8C\u7AEF\u5B58\u5132\u4E2D\u5EF6\u9072\u52A0\u8F09\u76F8\u95DC\u6578\u64DA\uFF0C\u4E26\u5C0D\u5176\u57F7\u884C\u67E5\u8A62"}),"\n",(0,B.jsx)(n.li,{children:"Querier \u5C0D\u6240\u6709\u63A5\u6536\u5230\u7684\u6578\u64DA\u9032\u884C\u8FED\u4EE3\u8207\u53BB\u91CD\u8655\u7406\uFF0C\u751F\u6210\u5B50\u67E5\u8A62\u7684\u7D50\u679C"}),"\n",(0,B.jsx)(n.li,{children:"Query Frontend \u7B49\u5F85\u6240\u6709\u7684\u5B50\u67E5\u8A62\u5B8C\u6210\u4E26\u7531 Querier \u8FD4\u56DE\u7D50\u679C"}),"\n",(0,B.jsx)(n.li,{children:"Query Frontend \u5C07\u6240\u6709\u5B50\u67E5\u8A62\u7684\u7D50\u679C\u5408\u4F75\uFF0C\u4E26\u5C07\u7D50\u679C\u8FD4\u56DE\u7D66\u5BA2\u6236\u7AEF"}),"\n"]}),"\n",(0,B.jsx)(n.h3,{id:"storage",children:"Storage"}),"\n",(0,B.jsx)(n.p,{children:"\u524D\u9762\u63D0\u5230\uFF0CLoki \u6700\u5927\u7684\u512A\u52E2\u5C31\u5728\u65BC\u5B83\u4F7F\u7528\u4E86 Object Storage (\u5982 GCS\u3001S3\u3001MinIO) \u4F86\u5B58\u5132\u65E5\u8A8C\uFF0C\u6240\u6709\u7684\u8CC7\u6599\u90FD\u53EF\u4EE5\u88AB\u5206\u6210 index \u548C chunks \u5169\u90E8\u5206\u4F86\u5B58\u5132\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u5728 2.0 \u7248\u672C\u4E4B\u524D\uFF0CLoki \u9700\u8981\u5C07 index \u548C chunks \u5206\u5225\u5132\u5B58\u5728\u4E0D\u540C\u7684\u5730\u65B9\uFF0Cindex \u5132\u5B58\u5728 NoSQL / key-value \u7684\u8CC7\u6599\u5EAB\u4E2D\uFF0Cchunks \u5132\u5B58\u5728\u7269\u4EF6\u5B58\u5132\u4E2D\u3002\n\u5728 2.0 \u7248\u672C\u4E4B\u5F8C\uFF0CLoki \u5F15\u9032\u4E86 index shipper \u4F86\u4F7F index \u4E5F\u80FD\u5920\u4EE5\u7269\u4EF6\u5B58\u5132\u7684\u5F62\u5F0F\u5132\u5B58\uFF0C\u6E1B\u5C11\u4E86 Loki \u7684\u5C0D\u5916\u90E8\u670D\u52D9\u7684\u4F9D\u8CF4\uFF0C\u4E00\u958B\u59CB\u63A1\u7528\u7684\u662F BoltDB\uFF0C\u5728 2.8 \u7248\u672C\u4E4B\u5F8C\u6539\u70BA\u4F7F\u7528 tsdb"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.strong,{children:"Index"})," : \u7528\u65BC\u5B58\u5132\u65E5\u8A8C\u7684 metadata\uFF0C\u4F8B\u5982\u65E5\u8A8C\u7684\u6A19\u7C64\u3001\u6642\u9593\u7B49\uFF0C\u662F key-value \u7684\u5F62\u5F0F"]}),"\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.strong,{children:"Chunks"})," : \u7528\u65BC\u5B58\u5132\u65E5\u8A8C\u7684\u5167\u5BB9"]}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"\u4E0B\u5716\u5C55\u793A\u4E86 Loki \u5982\u4F55\u5132\u5B58 index \u548C chunks :"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Loki Storage",src:r(89209).Z+"",width:"859",height:"531"})}),"\n",(0,B.jsx)(n.p,{children:"Loki \u6703\u5C07 label \u9032\u884C hash \u4F86\u751F\u6210\u552F\u4E00\u7684 stream ID\uFF0C\u6240\u6709\u5177\u6709\u76F8\u540C stream ID \u7684 log line \u90FD\u6703\u88AB\u5B58\u5132\u5728\u540C\u4E00\u500B chunk \u4E2D\u3002\n\u7576 chunk \u88AB\u586B\u6EFF\u6642\uFF0CLoki \u6703\u5C07\u9019\u500B chunk \u58D3\u7E2E\u4E26\u4E0A\u50B3\u5230\u7269\u4EF6\u5B58\u5132\u4E2D\uFF0C\u4E26\u4E14\u5728 index \u4E2D\u8A18\u9304\u4E00\u4E9B metadata \u8DDF\u8A72 chunk \u7684\u6642\u9593\u7BC4\u570D\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"multi-tenancy",children:"Multi-tenancy"}),"\n",(0,B.jsxs)(n.p,{children:["\u7576 Loki \u5728 Multi-tenancy \u6A21\u5F0F\u4E0B\u904B\u884C\u6642\uFF0C\u8A18\u61B6\u9AD4\u548C\u7269\u4EF6\u5132\u5B58\u4E2D\u7684\u6240\u6709\u8CC7\u6599\u90FD\u53EF\u4EE5\u6309\u79DF\u6236 ID \u9032\u884C\u5206\u5340\uFF0C\u79DF\u6236 ID \u6703\u4F9D\u64DA\u8ACB\u6C42\u4E2D\u7684 ",(0,B.jsx)(n.code,{children:"X-Scope-OrgID"})," HTTP header \u4F86\u6C7A\u5B9A\u3002\n\u7576 Loki \u4E0D\u8655\u65BC Multi-tenancy \u6A21\u5F0F\u6642\uFF0Cheader \u6703\u88AB\u5FFD\u7565\u4E14\u79DF\u6236 ID \u5C07\u8A2D\u5B9A\u70BA fake\u3002"]}),"\n",(0,B.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,B.jsx)(n.h3,{id:"distributor",children:"Distributor"}),"\n",(0,B.jsx)(n.p,{children:"Distributor \u662F Loki \u7684\u5165\u53E3\uFF0C\u5B83\u63A5\u6536\u4F86\u81EA\u641C\u96C6\u5668\u7684\u65E5\u8A8C\u4E26\u5C07\u5176\u5206\u767C\u7D66 Ingester\u3002\n\u7531\u65BC Distributor \u662F stateless \u7684\uFF0C\u6240\u4EE5\u901A\u5E38\u6703\u5728 Distributor \u524D\u9762\u90E8\u5C6C\u4E00\u500B\u8CA0\u8F09\u5747\u8861\u5668\uFF0C\u4EE5\u4FBF\u5C07\u6D41\u91CF\u5206\u767C\u5230\u591A\u500B Distributor \u4E0A\uFF0C\u9019\u6A23\u505A\u53EF\u4EE5\u6700\u5927\u7A0B\u5EA6\u7684\u6E1B\u8F15 Ingester \u7684\u58D3\u529B\u4E26\u9632\u79A6 DDoS \u653B\u64CA\u3002"}),"\n",(0,B.jsx)(n.p,{children:"Distributor \u6709\u4EE5\u4E0B\u5E7E\u500B\u4E3B\u8981\u529F\u80FD :"}),"\n",(0,B.jsxs)(n.ol,{children:["\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Validate"}),"\n",(0,B.jsx)(n.p,{children:"\u78BA\u4FDD\u50B3\u5165\u7684\u683C\u5F0F\u7B26\u5408\u898F\u7BC4\uFF0C\u50CF\u662F\u6AA2\u67E5\u6A19\u7C64\u662F\u5426\u6709\u6548\uFF0C\u6642\u9593\u6233\u662F\u5426\u5408\u6CD5\u7B49"}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Preprocessing"}),"\n",(0,B.jsxs)(n.p,{children:["Distributor \u6703\u5C07\u6A19\u7C64\u9032\u884C\u6392\u5E8F\u65B9\u4FBF\u5F8C\u9762\u9032\u884C\u54C8\u5E0C\u904B\u7B97\uFF0C\u4F8B\u5982\u5C07 ",(0,B.jsx)(n.code,{children:"c=b,a=b"})," \u8F49\u63DB\u70BA ",(0,B.jsx)(n.code,{children:"a=b,c=b"})]}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Rate limiting"}),"\n",(0,B.jsx)(n.p,{children:"\u53EF\u4EE5\u5C0D\u6BCF\u500B\u4E0D\u540C\u7684\u79DF\u6236\u9032\u884C\u9650\u6D41\uFF0C\u4EE5\u9632\u6B62\u67D0\u500B\u79DF\u6236\u7684\u65E5\u8A8C\u904E\u591A\u5C0E\u81F4\u7CFB\u7D71\u58D3\u529B\u904E\u5927"}),"\n",(0,B.jsx)(n.p,{children:"Loki \u5141\u8A31\u6211\u5011\u5728\u96C6\u7FA4\u7D1A\u5225\u9032\u884C\u9650\u6D41\uFF0C\u6703\u6839\u64DA\u7576\u524D Distributor \u7684\u6578\u91CF\u4F86\u8A08\u7B97\uFF0C\u8209\u4F8B\u4F86\u8AAA\uFF0C\u5047\u5982\u6709 10 \u500B Distributor \u4E14\u6211\u5011\u7684\u9650\u6D41\u70BA 10 MB/s\uFF0C\u90A3\u9EBC\u6BCF\u500B Distributor \u7684\u9650\u6D41\u5C31\u662F 1 MB/s"}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Forwarding"}),"\n",(0,B.jsx)(n.p,{children:"\u4E00\u65E6\u65E5\u8A8C\u88AB\u9A57\u8B49\u4E26\u9810\u8655\u7406\uFF0CDistributor \u5C31\u6703\u5C07\u65E5\u8A8C\u8F49\u767C\u7D66\u6307\u5B9A\u7684 Ingester"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Replication factor"}),"\n",(0,B.jsxs)(n.p,{children:["\u70BA\u4E86\u964D\u4F4E\u55AE\u500B Ingester \u53EF\u80FD\u907A\u5931\u8CC7\u6599\u7684\u98A8\u96AA\uFF0CDistributor \u6703\u5C07\u5BEB\u5165\u8CC7\u6599\u8F49\u767C\u5230\u591A\u500B Ingester\uFF0C\u9019\u500B\u6578\u91CF\u7531 Loki \u7684\u8A2D\u5B9A\u6A94\u4E2D\u7684 ",(0,B.jsx)(n.code,{children:"replication_factor"})," \u6C7A\u5B9A\uFF0C\u9810\u8A2D\u70BA 3"]}),"\n",(0,B.jsx)(n.p,{children:"Distributor \u6703\u900F\u904E ring \u4F86\u5224\u65B7\u76EE\u524D\u90A3\u4E9B Ingester \u662F\u6D3B\u8457\u7684\uFF0C\u4E26\u5C07\u8CC7\u6599\u8F49\u767C\u7D66\u9019\u4E9B Ingester \u4E26\u7B49\u5F85\u56DE\u61C9"}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"WAL (Write-Ahead Log)"}),"\n",(0,B.jsx)(n.p,{children:"\u9664\u4E86 Replication factor \u4E4B\u5916\uFF0CIngester \u9084\u6703\u6709 Write-Ahead Log (WAL) \u4F86\u4FDD\u8B49\u5728\u91CD\u65B0\u555F\u52D5\u6642\u4E0D\u6703\u907A\u5931\u8CC7\u6599"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Hashing"}),"\n",(0,B.jsx)(n.p,{children:"Distributor \u6703\u5C07\u65E5\u8A8C\u6D41\u9032\u884C\u54C8\u5E0C\u904B\u7B97\uFF0C\u4E26\u6839\u64DA\u4E00\u81F4\u6027\u54C8\u5E0C\u74B0 (Consistent Hash Ring) \u7684\u8CC7\u8A0A\uFF0C\u78BA\u8A8D\u6BCF\u500B\u6D41\u61C9\u88AB\u767C\u9001\u5230\u54EA\u500B Ingester"}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Quorum consistency"}),"\n",(0,B.jsx)(n.p,{children:"\u6240\u6709\u7684 Distributor \u90FD\u6703\u5171\u4EAB\u540C\u4E00\u500B ring \u4EE5\u78BA\u4FDD\u5BEB\u5165\u8ACB\u6C42\u53EF\u4EE5\u88AB\u8DEF\u7531\u5230\u4EFB\u4E00\u500B Ingester"}),"\n",(0,B.jsxs)(n.p,{children:["Loki \u4F7F\u7528\u4E86 dynamo-style quorum consistency \u4F86\u78BA\u4FDD\u5BEB\u5165\u7684\u4E00\u81F4\u6027\uFF0C\u9019\u610F\u5473\u8457\u81F3\u5C11\u9700\u8981 ",(0,B.jsx)(n.code,{children:"replication_factor / 2 + 1"})," \u500B Ingester \u56DE\u61C9\u624D\u6703\u986F\u793A\u6210\u529F\uFF0C\u5426\u5247\u6703\u91CD\u65B0\u9032\u884C\u5BEB\u5165"]}),"\n"]}),"\n"]}),"\n",(0,B.jsx)(n.h3,{id:"ingester",children:"Ingester"}),"\n",(0,B.jsx)(n.p,{children:"Ingester \u662F Loki \u7684\u6838\u5FC3\uFF0C\u5B83\u8CA0\u8CAC\u63A5\u6536\u65E5\u8A8C\u4E26\u5C07\u5176\u5BEB\u5165\u7269\u4EF6\u5B58\u5132\u4E2D\uFF0C\u540C\u6642\u4E5F\u8CA0\u8CAC\u5F9E\u8A18\u61B6\u9AD4\u4E2D\u8B80\u53D6\u65E5\u8A8C\u4E26\u63D0\u4F9B\u7D66 Querier \u9032\u884C\u67E5\u8A62\u3002"}),"\n",(0,B.jsx)(n.p,{children:"Ingester \u5305\u542B\u4E00\u500B\u751F\u547D\u7BA1\u7406\u5668 (Lifecycler)\uFF0C\u7528\u65BC\u7BA1\u7406\u5728\u54C8\u5E0C\u74B0\u5167\u7684\u751F\u547D\u9031\u671F\uFF0C\u5206\u5225\u70BA :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"PENDING : \u7576 Ingester \u555F\u52D5\u4E26\u5728\u7B49\u5F85\u4E00\u500B\u820A\u7684 Ingester \u505A handoff \u6642\u5C31\u6703\u8655\u65BC PENDING \u72C0\u614B (\u9700\u8981\u6CE8\u610F handoff \u9019\u500B\u6A5F\u5236\u5DF2\u7D93\u68C4\u7528)"}),"\n",(0,B.jsx)(n.li,{children:"JOINING : \u7576 Ingester \u6B63\u5728\u5C07\u4EE4\u724C\u63D2\u5165\u5230\u54C8\u5E0C\u74B0\u4E2D\u6642\u5C31\u6703\u8655\u65BC JOINING \u72C0\u614B\uFF0C\u6B64\u6642\u5DF2\u7D93\u53EF\u4EE5\u63A5\u6536\u5BEB\u5165\u8ACB\u6C42"}),"\n",(0,B.jsx)(n.li,{children:"ACTIVE : \u5B8C\u6210\u521D\u59CB\u5316\u4E26\u958B\u59CB\u63A5\u6536\u8B80\u5BEB\u8ACB\u6C42\u6642\u5C31\u6703\u8655\u65BC ACTIVE \u72C0\u614B"}),"\n",(0,B.jsx)(n.li,{children:"LEAVING : \u7576 Ingester \u6E96\u5099\u96E2\u958B\u54C8\u5E0C\u74B0\u6642\u5C31\u6703\u8655\u65BC LEAVING \u72C0\u614B\uFF0C\u6B64\u6642\u4F9D\u7136\u53EF\u4EE5\u8655\u7406\u8B80\u53D6\u8ACB\u6C42\u4F86\u63D0\u4F9B\u8A18\u61B6\u9AD4\u4E2D\u7684\u8CC7\u6599"}),"\n",(0,B.jsx)(n.li,{children:"UNHEALTHY : \u7576 Ingester \u7121\u6CD5\u767C\u9001 heartbeat \u6642\u5C31\u6703\u8655\u65BC UNHEALTHY \u72C0\u614B"}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"Ingester \u63A5\u6536\u5230\u7684\u6BCF\u500B log stream \u6703\u88AB\u7D44\u7E54\u6210\u591A\u500B chunks \u5132\u5B58\u5728\u8A18\u61B6\u9AD4\u4E2D\uFF0C\u4E26\u5728\u53EF\u914D\u7F6E\u7684\u6642\u9593\u5F8C flush \u5230\u7269\u4EF6\u5B58\u5132\u4E2D\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u5728\u4EE5\u4E0B\u7684\u60C5\u6CC1\u4E0B\uFF0Cchunk \u6703\u88AB\u6A19\u8A18\u6210 read-only \u4E26\u58D3\u7E2E :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"Chunk \u88AB\u5BEB\u6EFF"}),"\n",(0,B.jsx)(n.li,{children:"Chunk \u6709\u4E00\u6BB5\u6642\u9593\u6C92\u6709\u88AB\u5BEB\u5165"}),"\n",(0,B.jsx)(n.li,{children:"\u767C\u751F flush"}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"\u6BCF\u7576\u6709 chunk \u88AB\u6A19\u8A18\u6210 read-only \u6642\uFF0C\u5C31\u6703\u6709\u65B0\u7684 chunk \u88AB\u5275\u5EFA\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u5982\u679C Ingester \u7A81\u7136\u5D29\u6F70\uFF0C\u672A\u88AB\u5BEB\u5165\u7269\u4EF6\u5B58\u5132\u4E2D\u7684 chunk \u6703\u88AB\u4E1F\u5931\uFF0C\u56E0\u6B64 Loki \u901A\u5E38\u6703\u8A2D\u7F6E replica factor \u4E26\u4F7F\u7528 WAL \u4F86\u4FDD\u8B49\u5728 Ingester \u91CD\u555F\u6642\u4E0D\u6703\u907A\u5931\u8CC7\u6599\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u7576 Ingester \u8981\u5C07 chunk \u5BEB\u5165\u7269\u4EF6\u5B58\u5132\u4E2D\u6642\uFF0C\u6703\u4F9D\u64DA\u79DF\u6236 ID\u3001\u6A19\u7C64\u3001\u5167\u5BB9\u4F86\u8A08\u7B97\u4E00\u500B hash \u503C\uFF0C\u8B93\u5F8C\u7AEF\u4E0D\u9700\u8981\u91CD\u8986\u5132\u5B58\u76F8\u540C\u7684 chunk\uFF0C\u4F46\u5982\u679C\u6709\u8CC7\u6599\u5BEB\u5165\u5931\u6557\uFF0C\u5247\u6703\u5728\u5F8C\u7AEF\u5132\u5B58\u591A\u500B\u526F\u672C\uFF0CQuerier \u6703\u5728\u67E5\u8A62\u6642\u9032\u884C\u53BB\u91CD\u3002"}),"\n",(0,B.jsxs)(n.p,{children:["Loki \u9810\u8A2D\u70BA\u63A5\u53D7\u7121\u5E8F\u7684\u65E5\u8A8C\uFF0C\u4F46\u53EF\u4EE5\u900F\u904E\u8A2D\u5B9A ",(0,B.jsx)(n.code,{children:"unordered_writes"})," \u4F86\u63A5\u53D7\u6709\u5E8F\u7684\u65E5\u8A8C\uFF0C\u5982\u679C\u8A2D\u7F6E\u6210\u6709\u5E8F\u7684\u8A71\uFF0C\u5247\u6703\u5728 Distributor \u4E2D\u9032\u884C\u9A57\u8B49\u3002"]}),"\n",(0,B.jsx)(n.p,{children:"\u5C0D\u65BC\u76F8\u540C\u7D0D\u7C73\u7684 timestamp\uFF0C\u5982\u679C\u5167\u5BB9\u5B8C\u5168\u76F8\u540C\uFF0C\u5247 Loki \u6703\u5C07\u5176\u8996\u70BA\u91CD\u8907\u7684\u65E5\u8A8C\uFF0C\u4E26\u4E14\u53EA\u6703\u5132\u5B58\u4E00\u4EFD\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"query-frontend",children:"Query Frontend"}),"\n",(0,B.jsx)(n.p,{children:"Query Frontend \u662F\u4E00\u500B\u53EF\u9078\u7684\u7D44\u4EF6\uFF0C\u53EF\u4EE5\u7528\u65BC\u52A0\u901F\u67E5\u8A62\u3002\u7576\u6709 Query Frontend \u6642\uFF0C\u61C9\u8A72\u8981\u5C07\u67E5\u8A62\u7684\u6D41\u91CF\u5C0E\u5411\u5230 Query Frontend \u4E0A\uFF0C\u518D\u7531 Query Frontend \u5C07\u67E5\u8A62\u5206\u767C\u7D66 Querier\u3002"}),"\n",(0,B.jsx)(n.p,{children:"Query Frontend \u662F\u4E00\u7A2E\u7121\u72C0\u614B\u7684\u7D44\u4EF6\uFF0C\u5728\u5927\u591A\u6578\u60C5\u6CC1\u4E0B\u53EA\u9700\u8981\u5169\u500B\u5C31\u8DB3\u5920\u4E86\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u4EE5\u4E0B\u662F Query Frontend \u7684\u4E3B\u8981\u529F\u80FD :"}),"\n",(0,B.jsxs)(n.ol,{children:["\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Queueing"}),"\n",(0,B.jsx)(n.p,{children:"\u5373\u4F7F\u6C92\u6709\u7368\u7ACB\u7684 Query Scheduler\uFF0CQuery Frontend \u4E5F\u53EF\u4EE5\u5C07\u67E5\u8A62\u6392\u968A"}),"\n",(0,B.jsx)(n.p,{children:"\u6392\u968A\u529F\u80FD\u53EF\u4EE5\u5E36\u4F86\u4EE5\u4E0B\u7684\u597D\u8655 :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"\u9632\u6B62 Querier \u7684\u8A18\u61B6\u9AD4\u6EA2\u51FA (OOM) : \u5982\u679C\u767C\u751F\u4E86 OOM\uFF0C\u4E5F\u53EF\u4EE5\u9032\u884C\u91CD\u8A66\uFF0C\u63D0\u5347\u67E5\u8A62\u7684\u7A69\u5B9A\u6027\uFF0C\u540C\u6642\u4E5F\u53EF\u4EE5\u964D\u4F4E\u8A18\u61B6\u9AD4\u7684\u9700\u6C42"}),"\n",(0,B.jsx)(n.li,{children:"\u8CA0\u8F09\u5747\u8861 : \u5C07\u5927\u578B\u67E5\u8A62\u5206\u6563\u5230\u591A\u500B Querier \u4E0A\uFF0C\u907F\u514D\u55AE\u500B Querier \u88AB\u58D3\u57AE"}),"\n",(0,B.jsx)(n.li,{children:"\u79DF\u6236\u7684\u516C\u5E73\u8ABF\u5EA6 : \u53EF\u4EE5\u7528\u65BC\u9632\u6B62\u55AE\u4E00\u79DF\u6236\u7684 DDoS \u5F71\u97FF\u5230\u5176\u4ED6\u79DF\u6236"}),"\n"]}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Splitting"}),"\n",(0,B.jsx)(n.p,{children:"Query Frontend \u53EF\u4EE5\u5C07\u5927\u578B\u67E5\u8A62\u5206\u5272\u6210\u591A\u500B\u5B50\u67E5\u8A62\u4F86\u4E26\u884C\u8655\u7406\uFF0C\u5728\u9032\u884C\u5408\u4F75\uFF0C\u53EF\u4EE5\u907F\u514D\u55AE\u500B\u67E5\u8A62\u904E\u65BC\u9F90\u5927\u800C\u5C0E\u81F4 OOM"}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Caching"}),"\n",(0,B.jsx)(n.p,{children:"Query Frontend \u63D0\u4F9B\u4E86\u591A\u7A2E\u4E0D\u540C\u7684 cache \u7B56\u7565\uFF0C\u7528\u65BC\u63D0\u5347\u67E5\u8A62\u7684\u901F\u5EA6 :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"Metric queries : \u53EF\u4EE5\u5FEB\u53D6\u524D\u7AEF\u7684 metric \u67E5\u8A62\u7D50\u679C\uFF0C\u5982\u679C\u584A\u53D6\u7684\u7D50\u679C\u4E0D\u5B8C\u6574\uFF0C\u5247\u53EF\u4EE5\u4F7F\u7528\u5B50\u67E5\u8A62\u4F86\u88DC\u5168\u3002\u6B64\u5916\uFF0C\u53EF\u4EE5\u9078\u64C7\u6027\u5730\u5C07\u67E5\u8A62\u8207 step \u53C3\u6578\u5C0D\u9F4A\uFF0C\u4EE5\u63D0\u9AD8 cache \u7684\u547D\u4E2D\u7387\uFF0C\u4E26\u5C07\u7D50\u679C\u5FEB\u53D6\u5230 redis \u6216 memory \u4E2D\u3002"}),"\n",(0,B.jsx)(n.li,{children:"Log queries : \u5C0D\u65BC log query\uFF0CQuery Frontend \u4F7F\u7528 negative cache \u4F86\u8A18\u9304\u7A7A\u7684\u6642\u9593\u6BB5"}),"\n",(0,B.jsx)(n.li,{children:"Index stats queries (\u7D22\u5F15\u7D71\u8A08\u67E5\u8A62) : \u4E3B\u8981\u7528\u65BC Loki \u5167\u90E8\uFF0C\u985E\u4F3C Metric queries\uFF0C\u53EA\u80FD\u5728 single store \u7684 tsdb \u4E2D\u4F7F\u7528"}),"\n",(0,B.jsx)(n.li,{children:"Log volume queries (\u65E5\u8A8C\u91CF\u67E5\u8A62) : \u4E3B\u8981\u7528\u65BC Loki \u5167\u90E8\uFF0C\u985E\u4F3C Metric queries\uFF0C\u53EA\u80FD\u5728 single store \u7684 tsdb \u4E2D\u4F7F\u7528"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,B.jsx)(n.h3,{id:"query-scheduler",children:"Query Scheduler"}),"\n",(0,B.jsx)(n.p,{children:"Query Scheduler \u662F Loki \u7684\u4E00\u500B\u53EF\u9078\u7D44\u4EF6\uFF0C\u63D0\u4F9B\u6BD4 Querier Frontend \u66F4\u9032\u968E\u7684\u6392\u968A\u529F\u80FD\uFF0C\u5982\u968E\u5C64\u5F0F\u7684\u968A\u5217\u3002"}),"\n",(0,B.jsxs)(n.p,{children:["\u53EF\u4EE5\u53C3\u8003 ",(0,B.jsx)(n.a,{href:"https://grafana.com/docs/loki/latest/operations/query-fairness/",children:"advanced queuing functionality"}),"\u3002"]}),"\n",(0,B.jsx)(n.h3,{id:"querier",children:"Querier"}),"\n",(0,B.jsx)(n.p,{children:"Querier \u8CA0\u8CAC\u5BE6\u969B\u57F7\u884C LogQL \u67E5\u8A62\uFF0C\u5B83\u6703\u5F9E Ingester \u8DDF Object Storage \u4E2D\u8B80\u53D6\u8CC7\u6599\uFF0C\u4E26\u5C07\u7D50\u679C\u8FD4\u56DE\u7D66 Query Frontend\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u7531\u65BC replication_factor \u7684\u5B58\u5728\uFF0C\u6709\u6642\u5019 Querier \u6703\u6536\u5230\u91CD\u8986\u7684\u8CC7\u6599\uFF0C\u56E0\u6B64 Loki \u6703\u5728 Querier \u4E2D\u9032\u884C\u53BB\u91CD\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"index-gateway",children:"Index Gateway"}),"\n",(0,B.jsx)(n.p,{children:"Index Gateway \u8CA0\u8CAC\u8655\u7406\u6709\u95DC\u65BC metadata \u7684\u67E5\u8A62\uFF0C\u4F8B\u5982 label names \u7B49\u7B49\u7684\u67E5\u8A62\u3002"}),"\n",(0,B.jsx)(n.p,{children:"Query Frontend \u6703\u8DDF Index Gateway \u67E5\u8A62\u65E5\u8A8C\u91CF\uFF0C\u4EE5\u4FBF\u6C7A\u5B9A\u8A72\u7528\u751A\u9EBC\u65B9\u6CD5\u9032\u884C\u67E5\u8A62\u5206\u7247\u3002\nQuerier \u5247\u6703\u5411 Index Gateway \u67E5\u8A62 chunks \u7684\u5F15\u7528\uFF0C\u4EE5\u4FBF\u77E5\u9053\u8981\u67E5\u8A62\u54EA\u4E9B chunks\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"compactor",children:"Compactor"}),"\n",(0,B.jsx)(n.p,{children:"Compactor \u6703\u5B9A\u671F\u904B\u884C\uFF0C\u5F9E\u7269\u4EF6\u5B58\u5132\u4E2D\u8B80\u53D6 tsdb \u6A94\u6848\u9032\u884C\u5408\u4F75\u5F8C\u518D\u5BEB\u56DE\u7269\u4EF6\u5B58\u5132\u4E2D\uFF0C\u6B64\u5916\uFF0CCompactor \u4E5F\u8CA0\u8CAC\u65E5\u8A8C\u7684\u4FDD\u7559\u8DDF\u522A\u9664\u529F\u80FD\uFF0C\u901A\u5E38\u6703\u4F7F\u7528\u55AE\u4E00\u7684\u5BE6\u4F8B\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"ruler",children:"Ruler"}),"\n",(0,B.jsx)(n.p,{children:"\u53EF\u4EE5\u5728\u7269\u4EF6\u5B58\u5132\u4E2D\u8A2D\u5B9A\u544A\u8B66\u898F\u5247\uFF0CRuler \u6703\u5B9A\u671F\u6AA2\u67E5\u9019\u4E9B\u898F\u5247\u4E26\u767C\u9001\u544A\u8B66\uFF0C\u4E5F\u53EF\u4EE5\u5C07\u9019\u4E9B\u898F\u5247\u59D4\u8A17\u7D66 Query Frontend \u4F86\u57F7\u884C\uFF0C\u9019\u7A2E\u6A21\u5F0F\u7A31\u70BA Remote Rule Evaluation\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"other-components",children:"Other Components"}),"\n",(0,B.jsx)(n.p,{children:"\u9664\u4E86\u4E4B\u5916\uFF0C\u76EE\u524D\u4E5F\u6709\u4E00\u4E9B\u57FA\u65BC\u5E03\u9686\u904E\u6FFE\u5668 (Bloom filter) \u7684\u7D44\u4EF6\u5728\u7B46\u8005\u5BEB\u9019\u7BC7\u6587\u7AE0\u6642\u9084\u5728\u8655\u5728\u5BE6\u9A57\u6027\u7684\u968E\u6BB5\uFF0C\u4F8B\u5982 :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"Bloom Planner"}),"\n",(0,B.jsx)(n.li,{children:"Bloom Builder"}),"\n",(0,B.jsx)(n.li,{children:"Bloom Gateway"}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"\u9019\u4E09\u500B\u7D44\u4EF6\u65E8\u5728\u5229\u7528\u5E03\u9686\u904E\u6FFE\u5668\u4F86\u52A0\u901F chunk \u7684\u67E5\u8A62\uFF0C\u5FEB\u901F\u904E\u6FFE\u6389\u90A3\u4E9B\u4E0D\u53EF\u80FD\u7B26\u5408\u689D\u4EF6\u7684 chunk\u3002"}),"\n",(0,B.jsx)(n.h2,{id:"deployment-mode",children:"Deployment Mode"}),"\n",(0,B.jsx)(n.p,{children:"\u5982\u524D\u6240\u8FF0\uFF0CLoki \u662F\u4E00\u500B\u6709\u5F88\u591A\u5FAE\u670D\u52D9\u7D44\u6210\u7684\u5206\u6563\u5F0F\u7CFB\u7D71\uFF0C\u56E0\u6B64\u53EF\u4EE5\u6839\u64DA\u4E0D\u540C\u7684\u9700\u6C42\u4F86\u90E8\u7F72\u4E0D\u540C\u7684\u6A21\u5F0F\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"monolithic-mode",children:"Monolithic mode"}),"\n",(0,B.jsx)(n.p,{children:"\u6700\u7C21\u55AE\u7684\u90E8\u5C6C\u65B9\u6CD5\u5C31\u662F\u55AE\u9AD4\u90E8\u5C6C\u6A21\u5F0F\uFF0C\u5C07\u6240\u6709\u7684\u7D44\u4EF6\u90FD\u90E8\u5C6C\u5728\u540C\u4E00\u500B\u7BC0\u9EDE\u4E0A\uFF0C\u5C0D\u65BC 20GB/day \u5DE6\u53F3\u7684\u65E5\u8A8C\u91CF\u4F86\u8AAA\uFF0C\u9019\u6A23\u7684\u90E8\u5C6C\u65B9\u5F0F\u662F\u8DB3\u5920\u7684\u3002"}),"\n",(0,B.jsxs)(n.p,{children:["\u9019\u7A2E\u65B9\u5F0F\u540C\u6A23\u4E5F\u53EF\u4EE5\u505A\u6C34\u5E73\u64F4\u5C55\uFF0C\u53EA\u9700\u8981\u5728\u8A2D\u5B9A\u6A94\u4E2D\u8A2D\u5B9A ",(0,B.jsx)(n.code,{children:"ring"})," \u548C ",(0,B.jsx)(n.code,{children:"memberlist_config"})," \u5C31\u53EF\u4EE5\u4E86\u3002"]}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Monolithic mode",src:r(31158).Z+"",width:"618",height:"606"})}),"\n",(0,B.jsx)(n.h3,{id:"simple-scalable-mode",children:"Simple scalable mode"}),"\n",(0,B.jsx)(n.p,{children:"\u9019\u7A2E\u6A21\u5F0F\u662F Helm Chart \u9810\u8A2D\u7684\u90E8\u5C6C\u65B9\u5F0F\uFF0C\u5C07\u7D44\u5EFA\u5206\u6210\u8B80\u53D6\u3001\u5BEB\u5165\u3001\u5F8C\u7AEF\u4E09\u500B\u90E8\u5206\uFF0C\u4E26\u4F7F\u7528 Nginx \u4F5C\u70BA\u53CD\u5411\u4EE3\u7406\u4F86\u5206\u958B\u8F49\u767C\u8B80\u5BEB\u8ACB\u6C42\uFF0C\u5C0D\u65BC TB \u7D1A\u5225\u7684\u65E5\u8A8C\u91CF\u4F86\u8AAA\uFF0C\u9019\u6A23\u7684\u90E8\u5C6C\u65B9\u5F0F\u662F\u8DB3\u5920\u7684\u3002"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.code,{children:"target=write"})," : Distributor\u3001Ingester\uFF0C\u662F\u6709\u72C0\u614B\u7684\uFF0C\u7531 k8s statefulset \u63A7\u5236"]}),"\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.code,{children:"target=read"})," : Querier\u3001Query Frontend\uFF0C\u662F\u7121\u72C0\u614B\u7684\uFF0C\u7531 k8s deployment \u63A7\u5236"]}),"\n",(0,B.jsxs)(n.li,{children:[(0,B.jsx)(n.code,{children:"target=backend"})," : Compactor\u3001Ruler\u3001Index Gateway\u3001Query Scheduler\uFF0C\u662F\u6709\u72C0\u614B\u7684\uFF0C\u7531 k8s statefulset \u63A7\u5236"]}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Simple scalable mode",src:r(78985).Z+"",width:"971",height:"725"})}),"\n",(0,B.jsx)(n.h3,{id:"microservices-mode",children:"Microservices mode"}),"\n",(0,B.jsx)(n.p,{children:"\u4E5F\u53EF\u4EE5\u9078\u64C7\u5C07\u5168\u90E8\u7684\u7D44\u4EF6\u90FD\u5206\u958B\u90E8\u7F72\u4EE5\u63D0\u4F9B\u6700\u597D\u7684\u64F4\u5C55\u6027\uFF0C\u4F46\u540C\u6642\u4E5F\u6703\u589E\u52A0\u90E8\u7F72\u7684\u8907\u96DC\u5EA6\u3002"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Microservices mode",src:r(91131).Z+"",width:"956",height:"667"})}),"\n",(0,B.jsx)(n.h2,{id:"label",children:"Label"}),"\n",(0,B.jsx)(n.p,{children:"Labels \u5C0D\u65BC Loki \u4F86\u8AAA\u662F\u4E00\u500B\u975E\u5E38\u91CD\u8981\u7684\u7D44\u4EF6\uFF0C\u5B83\u4E0D\u50C5\u53EF\u4EE5\u7528\u65BC\u7576 sharding key \u4F86\u6C7A\u5B9A\u65E5\u8A8C\u7684\u5B58\u5132\u4F4D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u7528\u65BC\u67E5\u8A62\u6642\u7684\u904E\u6FFE\uFF0C\u56E0\u6B64\u6B63\u78BA\u7684\u4F7F\u7528 label \u53EF\u4EE5\u986F\u8457\u63D0\u9AD8 Loki \u7684\u6548\u80FD\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"label-best-practices",children:"Label Best Practices"}),"\n",(0,B.jsx)(n.p,{children:"\u63A5\u4E0B\u4F86\u6703\u900F\u904E\u4E00\u500B\u4F8B\u5B50\u4F86\u8AAA\u660E\u5982\u4F55\u6B63\u78BA\u5730\u4F7F\u7528 label \u4F86\u63D0\u9AD8 Loki \u7684\u6548\u80FD\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u9996\u5148\u6211\u5011\u53EF\u4EE5\u7C21\u55AE\u7684\u5206\u914D\u4E00\u500B label \u4F86\u8868\u793A host\uFF0C\u4F8B\u5982 :"}),"\n",(0,B.jsx)(n.pre,{children:(0,B.jsx)(n.code,{children:'{host="rook"}\n'})}),"\n",(0,B.jsx)(n.p,{children:"\u9019\u6642\u5019 Loki \u5C31\u6703\u57FA\u65BC\u9019\u500B label \u4F86\u5EFA\u7ACB stream\uFF0C\u5728\u56FA\u5B9A\u7684\u6642\u9593\u9593\u9694\u5F8C\uFF0CLoki \u6703\u5C07\u9019\u4E9B stream \u58D3\u7E2E\u6210 chunks \u4E26\u4E0A\u50B3\u5230\u7269\u4EF6\u5B58\u5132\u4E2D\u3002"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Label",src:r(32091).Z+"",width:"960",height:"640"})}),"\n",(0,B.jsx)(n.p,{children:"\u5728 rook \u9019\u500B host \u4E0A\uFF0C\u6211\u5011\u53EF\u80FD\u540C\u6642\u904B\u884C\u4E86\u5F88\u591A\u500B service\uFF0C\u4F7F\u7528\u8005\u76EE\u524D\u7121\u6CD5\u900F\u904E\u65E5\u8A8C\u77E5\u9053\u9019\u689D log \u4F86\u81EA\u65BC\u54EA\u500B\u7CFB\u7D71\uFF0C\u56E0\u6B64\u6C7A\u5B9A\u53EF\u4EE5\u518D\u52A0\u4E0A\u4E00\u500B label \u4F86\u8868\u793A\u670D\u52D9\u540D\u7A31\uFF0C\u4F8B\u5982 :"}),"\n",(0,B.jsx)(n.pre,{children:(0,B.jsx)(n.code,{children:"{host=\u201Drook\u201D, app=\u201Dwebserver\u201D}\n{host=\u201Drook\u201D, app=\u201Dftp\u201D}\n{host=\u201Drook\u201D, app=\u201Dmiddleware\u201D}\n"})}),"\n",(0,B.jsx)(n.p,{children:"\u65BC\u662F\uFF0C\u6211\u5011\u5C31\u53EF\u4EE5\u4F7F\u7528 app \u4F86\u67E5\u8A62\u4E86"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Label",src:r(2785).Z+"",width:"960",height:"640"})}),"\n",(0,B.jsx)(n.p,{children:"\u63A5\u8457\u4F7F\u7528\u8005\u53C8\u9047\u5230\u4E86\u65B0\u7684\u554F\u984C\uFF0C\u6211\u60F3\u8981\u67E5\u8A62\u6BCF\u7B46\u8A02\u55AE\u7684\u65E5\u8A8C\uFF0C\u4F46\u662F Loki \u4E26\u6C92\u6709\u8FA6\u6CD5\u76F4\u63A5\u67E5\u8A62\u5230\u9019\u4E9B\u65E5\u8A8C\uFF0C\u56E0\u6B64\u6C7A\u5B9A\u518D\u65B0\u589E\u4E00\u500B label \u4F86\u8868\u793A\u8A02\u55AE ID\uFF0C\u4F8B\u5982 :"}),"\n",(0,B.jsx)(n.pre,{children:(0,B.jsx)(n.code,{children:"{host=\u201Drook\u201D, app=\u201Dwebserver\u201D, order_id=\u201D123\u201D}\n{host=\u201Drook\u201D, app=\u201Dwebserver\u201D, order_id=\u201D456\u201D}\n{host=\u201Drook\u201D, app=\u201Dwebserver\u201D, order_id=\u201D789\u201D}\n"})}),"\n",(0,B.jsx)(n.p,{children:"\u9019\u6642\u5019\u5C31\u9047\u5230\u554F\u984C\u4E86\uFF0C\u6BCF\u7B46 log \u90FD\u88AB\u5132\u5B58\u5728 short-lived \u7684 stream \u4E2D\uFF0C\u7576\u6BCF\u500B stream \u90FD\u88AB\u5BEB\u6210\u7368\u7ACB\u7684\u6587\u4EF6\u6642\uFF0C\u5C31\u6703\u7522\u751F\u975E\u5E38\u591A\u5360\u7528\u7A7A\u9593\u7684\u5C0F\u6A94\u6848\uFF0C\u964D\u4F4E\u4E86 Loki \u7684\u6548\u80FD\u3002"}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Label",src:r(77089).Z+"",width:"960",height:"640"})}),"\n",(0,B.jsx)(n.p,{children:"\u56E0\u6B64\uFF0C\u8207\u5176\u5B83\u7684\u65E5\u8A8C\u7CFB\u7D71\u76F8\u6BD4\uFF0C\u6211\u5011\u9700\u8981\u5728 label \u7684\u8A2D\u8A08\u4E0A\u6709\u4E0D\u540C\u7684\u601D\u8003\u65B9\u5F0F\uFF0C\u4EE5\u4E0B\u662F\u4E00\u4E9B Loki \u7684 label \u8A2D\u8A08\u539F\u5247 :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"Describe infrastructure : \u4F8B\u5982 region\u3001zone\u3001host\u3001cluster\u3001namespace\u3001environment \u7B49\u7B49"}),"\n",(0,B.jsx)(n.li,{children:"Long-lived : \u9019\u4E9B\u6A19\u7C64\u61C9\u8A72\u9577\u671F\u5B58\u5728"}),"\n",(0,B.jsxs)(n.li,{children:["Intuitive : \u6A19\u7C64\u61C9\u8A72\u662F\u76F4\u89C0\u7684\uFF0C\u4F8B\u5982 ",(0,B.jsx)(n.code,{children:"app"}),"\u3001",(0,B.jsx)(n.code,{children:"service"}),"\u3001",(0,B.jsx)(n.code,{children:"component"})," \u7B49\u7B49"]}),"\n"]}),"\n",(0,B.jsx)(n.h3,{id:"automatic-stream-sharding",children:"Automatic Stream Sharding"}),"\n",(0,B.jsx)(n.p,{children:"\u540C\u6642\uFF0C\u70BA\u4E86\u9632\u6B62\u540C\u4E00\u500B stream \u7684\u6D41\u91CF\u592A\u591A\u5C0E\u81F4\u6240\u6709\u7684\u65E5\u8A8C\u90FD\u88AB\u5206\u767C\u5230\u540C\u4E00\u500B Ingester \u4E2D\uFF0CLoki \u4E5F\u5F15\u5165\u4E86 automatic stream sharding \u6A5F\u5236\uFF0C\u9019\u6A23\u53EF\u4EE5\u8B93 Loki \u5728\u5BEB\u5165\u6642\u81EA\u52D5\u5C07\u6D41\u91CF\u5206\u767C\u5230\u4E0D\u540C\u7684 Ingester \u4E2D\u3002"}),"\n",(0,B.jsxs)(n.p,{children:[(0,B.jsx)(n.img,{alt:"Label",src:r(39349).Z+"",width:"960",height:"640"}),"\n",(0,B.jsx)(n.img,{alt:"Label",src:r(89504).Z+"",width:"960",height:"640"})]}),"\n",(0,B.jsx)(n.h3,{id:"structure-metadata",children:"Structure Metadata"}),"\n",(0,B.jsx)(n.p,{children:"\u5728\u9019\u6A23\u7684 label \u8A2D\u8A08\u4E0B\u6709\u53EF\u80FD\u6703\u7522\u751F\u4E00\u4E9B\u554F\u984C\uFF0C\u4F8B\u5982\u6211\u5011\u60F3\u8981\u641C\u5C0B\u67D0\u500B Pod \u7684 ID\uFF0C\u4F46\u662F\u7531\u65BC\u9019\u500B\u503C\u662F\u4E00\u500B\u9AD8\u57FA\u6578\u7684 label\uFF0C\u56E0\u6B64\u6211\u5011\u4E0D\u78BA\u5B9A\u662F\u4E0D\u662F\u61C9\u8A72\u628A\u9019\u500B\u503C\u653E\u5728 label \u4E2D\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u5728\u65B0\u7248\u7684 Loki \u4E2D\uFF0CLoki \u5F15\u5165\u4E86 structured metadata \u7684\u6982\u5FF5\uFF0C\u53EF\u4EE5\u5C07 key-value \u7684\u503C\u5132\u5B58\u5728\u65E5\u8A8C\u884C\u7684\u65C1\u908A\u800C\u4E0D\u662F\u5B58\u5728 label \u4E2D\uFF0C\u9019\u6A23\u5C31\u53EF\u4EE5\u907F\u514D\u7522\u751F\u9AD8\u57FA\u6578\u7684 label \u4E26\u4E14\u53EF\u4EE5\u66F4\u5FEB\u7684\u67E5\u8A62\u5230\u9019\u4E9B\u8CC7\u6599\u3002"}),"\n",(0,B.jsx)(n.h3,{id:"bloom-filter",children:"Bloom Filter"}),"\n",(0,B.jsx)(n.p,{children:"\u90A3\u9EBC\u5982\u679C\u6211\u60F3\u5728 Loki \u4E2D\u641C\u5C0B\u552F\u4E00\u7684 ID \u6642\u61C9\u8A72\u600E\u9EBC\u8FA6\u5462?"}),"\n",(0,B.jsxs)(n.p,{children:["\u8209\u4F8B\u4F86\u8AAA\uFF0C\u6211\u53EF\u80FD\u6703\u60F3\u505A\u4EE5\u4E0B\u7684\u641C\u5C0B ",(0,B.jsx)(n.code,{children:"{env=\u201Dprod\u201D} |= \u201C603e0dcf-9b24-4c37-8f0d-6d8ebe5c5c8a\u201D"})]}),"\n",(0,B.jsx)(n.p,{children:"Loki \u6703\u63A1\u7528\u5927\u91CF\u5E73\u884C\u5316\u7684\u65B9\u5F0F\u4F86\u8655\u7406\u9019\u500B\u554F\u984C\uFF0C\u540C\u6642\u4F7F\u7528 Bloom filter \u642D\u914D n-gram \u4F86\u9032\u884C\u904E\u6FFE\u3002"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"Bloom filter : \u4E00\u7A2E\u6A5F\u7387\u578B\u8CC7\u6599\u7D50\u69CB\uFF0C\u7528\u65BC\u5FEB\u901F\u6AA2\u67E5\u4E00\u500B\u5143\u7D20\u662F\u5426\u5728\u4E00\u500B\u96C6\u5408\u4E2D\uFF0C\u7A7A\u9593\u6548\u7387\u975E\u5E38\u9AD8"}),"\n",(0,B.jsx)(n.li,{children:"n-gram : \u4E00\u7A2E\u5C07\u5B57\u4E32\u62C6\u5206\u6210 n \u500B\u9023\u7E8C\u7684\u5B50\u5B57\u4E32\u7684\u65B9\u6CD5\uFF0C\u9019\u6A23\u505A\u7684\u539F\u56E0\u662F\u53EF\u4EE5\u63D0\u9AD8\u5F48\u6027\u8207\u5BB9\u932F\uFF0C\u540C\u6642\u53EF\u4EE5\u8B93\u6211\u5011\u6355\u6349\u5230 schemaless \u7684 log"}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:(0,B.jsx)(n.img,{alt:"Label",src:r(66677).Z+"",width:"900",height:"584"})}),"\n",(0,B.jsx)(n.p,{children:"\u6211\u5011\u53EF\u4EE5\u5F9E\u4E0A\u5716\u4E2D\u770B\u5230\u5169\u500B\u95DC\u9375\u7684\u7D44\u4EF6\uFF0C\u5206\u5225\u662F Bloom Compactor \u8DDF Bloom Gateway\u3002"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Bloom Compactor :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"\u8CA0\u8CAC\u5728 Loki \u7684\u7269\u4EF6\u5132\u5B58\u4E2D\u7684\u65E5\u8A8C\u5340\u584A (chunks) \u5EFA\u7ACB Bloom filter"}),"\n",(0,B.jsx)(n.li,{children:"\u91DD\u5C0D\u6BCF\u500B\u65E5\u8A8C\u5E8F\u5217 (series\uFF0C\u985E\u4F3C\u65BC stream id) \u5EFA\u7ACB Bloom filter"}),"\n",(0,B.jsx)(n.li,{children:"\u5F9E\u6BCF\u500B\u65E5\u8A8C\u5E8F\u5217\u7684\u6BCF\u500B\u65E5\u8A8C\u884C\u4E2D\u63D0\u53D6 n-grams"}),"\n",(0,B.jsx)(n.li,{children:"\u5C07\u6BCF\u500B n-gram \u7684\u96DC\u6E4A\u503C \u4EE5\u53CA (n-gram + chunk ID) \u7684\u96DC\u6E4A\u503C \u52A0\u5165\u5230\u5C0D\u61C9\u65E5\u8A8C\u5E8F\u5217\u7684 Bloom filter \u4E2D"}),"\n",(0,B.jsx)(n.li,{children:"\u5C07 Bloom filter \u805A\u5408\u5230\u5340\u584A\u6A94\u6848 (block files) \u4E2D\uFF0C\u4E26\u7522\u751F\u5143\u6578\u64DA\u6A94\u6848 (metadata files) \u8A18\u9304 Bloom \u5340\u584A\u548C\u5C0D\u61C9\u7684 TSDB \u7D22\u5F15\u6A94\u6848\u7684\u95DC\u806F"}),"\n"]}),"\n"]}),"\n",(0,B.jsxs)(n.li,{children:["\n",(0,B.jsx)(n.p,{children:"Bloom Gateway :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"\u63A5\u6536\u4F86\u81EA Index Gateway \u7684\u5340\u584A\u904E\u6FFE\u8ACB\u6C42"}),"\n",(0,B.jsx)(n.li,{children:"\u6839\u64DA\u67E5\u8A62\u7684\u904E\u6FFE\u8868\u9054\u5F0F\uFF0C\u63D0\u53D6 n-grams"}),"\n",(0,B.jsx)(n.li,{children:"\u4F7F\u7528\u9019\u4E9B n-grams \u67E5\u8A62 Bloom filter\uFF0C\u5224\u65B7\u54EA\u4E9B\u65E5\u8A8C\u5340\u584A \u53EF\u80FD \u5305\u542B\u7B26\u5408\u904E\u6FFE\u689D\u4EF6\u7684\u65E5\u8A8C"}),"\n",(0,B.jsx)(n.li,{children:"\u904E\u6FFE\u6389\u88AB Bloom filter \u5224\u65B7\u70BA\u80AF\u5B9A\u4E0D\u7B26\u5408\u7684\u5340\u584A\uFF0C\u53EA\u5C07\u53EF\u80FD\u7B26\u5408\u7684\u5340\u584A\u9001\u7D66\u5F8C\u7E8C\u7684\u67E5\u8A62\u5F15\u64CE\u9032\u884C\u8A73\u7D30\u6383\u63CF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,B.jsx)(n.p,{children:"\u900F\u904E\u4E0A\u9762\u9019\u5169\u7A2E\u65B9\u5F0F\uFF0CLoki \u53EF\u4EE5\u5728\u4E0D\u589E\u52A0\u984D\u5916\u7684\u8CC7\u6E90\u7684\u60C5\u6CC1\u4E0B\uFF0C\u63D0\u9AD8\u67E5\u8A62\u7684\u6548\u80FD\u3002"}),"\n",(0,B.jsx)(n.p,{children:"\u4F46\u662F\uFF0C\u4E26\u4E0D\u662F\u6BCF\u7A2E LogQL \u90FD\u80FD\u53D7\u76CA\u65BC Bloom filter\uFF0C\u4EE5\u4E0B\u662F\u4E00\u4E9B\u53EF\u4EE5\u4F7F\u7528\u8DDF\u4E0D\u80FD\u4F7F\u7528 Bloom filter \u7684\u4F8B\u5B50 :"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:"\u67E5\u8A62\u61C9\u8A72\u5305\u542B\u81F3\u5C11\u4E00\u7A2E\u904E\u6FFE\u5F0F"}),"\n"]}),"\n",(0,B.jsx)(n.pre,{children:(0,B.jsx)(n.code,{children:'# \u4F7F\u7528\u5E03\u9686\u904E\u6FFE\u5668\n\n{host="rook", app="webserver"} |= "order=17863472" | logfmt\n'})}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsxs)(n.li,{children:["\u4F7F\u7528\u4E86 ",(0,B.jsx)(n.code,{children:"!="})," \u6216 ",(0,B.jsx)(n.code,{children:"!~"})," \u7684\u904E\u6FFE\u5F0F\u4EE5\u53CA\u5728 format \u4E4B\u5F8C\u7684\u904E\u6FFE\u5F0F\u4E0D\u6703\u4F7F\u7528\u5E03\u9686\u904E\u6FFE\u5668"]}),"\n"]}),"\n",(0,B.jsx)(n.pre,{children:(0,B.jsx)(n.code,{children:'# \u4E0D\u4F7F\u7528\u5E03\u9686\u904E\u6FFE\u5668\n\n{host="rook", app="webserver"} != "debug"\n{host="rook", app="webserver"} !~ "(staging|dev)"\n'})}),"\n",(0,B.jsx)(n.pre,{children:(0,B.jsx)(n.code,{children:'# `level="error"` \u4F7F\u7528\u5E03\u9686\u904E\u6FFE\u5668\n\n# `traceID="3ksn8d4jj3"` \u4E0D\u4F7F\u7528\u5E03\u9686\u904E\u6FFE\u5668\n\n{host="rook", app="webserver"}\n|= `level="error"`\n| logfmt\n| line_format \u201CERROR {{.err}}\u201D\n|= `traceID=\u201C3ksn8d4jj3\u201D`\n'})}),"\n",(0,B.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,B.jsxs)(n.ul,{children:["\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/oss/loki/",children:"Grafana Loki"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/go/webinar/getting-started-with-logging-and-grafana-loki/?pg=docs-loki-latest&plcmt=related",children:"How to get started with logging using Grafana Loki"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://taisho6339.gitbook.io/grafana-loki-deep-dive",children:"Grafana Loki Deep Dive"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://ithelp.ithome.com.tw/articles/10335935",children:"\u53EF\u89C0\u6E2C\u6027\u5B87\u5B99\u7684\u7B2C\u4E8C\u5341\u4E8C\u5929 - Grafana Loki \u4ECB\u7D39 - \u6027\u50F9\u6BD4\u7684\u738B\u8005"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/blog/2018/12/12/loki-prometheus-inspired-open-source-logging-for-cloud-natives/",children:"Loki: Prometheus-inspired, open source logging for cloud natives"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/blog/2023/12/11/open-source-log-monitoring-the-concise-guide-to-grafana-loki/",children:"Open source log monitoring: The concise guide to Grafana Loki"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://www.youtube.com/watch?v=_hv4i84Z68s",children:"All the Components of Loki Explained | Grafana Labs"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/blog/2024/05/29/grafana-loki-query-acceleration-how-we-sped-up-queries-without-adding-resources/",children:"Grafana Loki query acceleration: How we sped up queries without adding resources"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://medium.com/@jieshiun/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0-grafana-loki-%E5%BE%9E%E5%85%A5%E9%96%80%E5%88%B0%E7%B2%BE%E9%80%9A-feab84c209f0",children:"\u624B\u628A\u624B\u6559\u4F60 Grafana Loki : \u5F9E\u5165\u9580\u5230\u7CBE\u901A"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://medium.com/@NeroHin/devops-grafana-loki-promtail-logging-system-%E5%B0%8F%E8%A9%A6%E7%89%9B%E5%88%80-b922ba8ed0d8",children:"\u3010DevOps\u3011Grafana + Loki + Promtail Logging system \u5C0F\u8A66\u725B\u5200"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://www.qikqiak.com/post/grafana-loki-usage/",children:"Grafana Loki \u7B80\u660E\u6559\u7A0B"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://juejin.cn/post/7196699593836937276",children:"Grafana \u7CFB\u5217\u6587\u7AE0\uFF08\u4E5D\uFF09\uFF1A\u5F00\u6E90\u4E91\u539F\u751F\u65E5\u5FD7\u89E3\u51B3\u65B9\u6848 Loki \u7B80\u4ECB"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://juejin.cn/post/7197239663102705724",children:"Grafana \u7CFB\u5217\u6587\u7AE0\uFF08\u5341\uFF09\uFF1A\u4E3A\u4EC0\u4E48\u5E94\u8BE5\u4F7F\u7528 Loki"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/blog/2022/05/16/all-things-logs-best-practices-for-logging-and-grafana-loki/",children:"All things logs: best practices for logging and Grafana Loki"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://vik-y.medium.com/why-you-should-consider-loki-as-an-alternative-to-elasticsearch-ae3fad99ab9a",children:"Why You Should Consider Loki as an Alternative to Elasticsearch!"})}),"\n",(0,B.jsx)(n.li,{children:(0,B.jsx)(n.a,{href:"https://grafana.com/blog/2020/02/19/how-loki-reduces-log-storage/",children:"How Loki Reduces Log Storage"})}),"\n"]})]})}function R(e={}){let{wrapper:n}={...(0,M.a)(),...e.components};return n?(0,B.jsx)(n,{...e,children:(0,B.jsx)(P,{...e})}):P(e)}},32091:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/1-297c8451fdae33055090e0839baf3f20.gif"},2785:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/2-deb538bf7a0a69e6c938dee5adcdb3ea.gif"},77089:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/3-c82d9e3b6a38daa6905ac67783f7d049.gif"},39349:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/4-835f248c5bb2199d9c638a62878a4e0d.gif"},89504:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/5-07fcf05d46187b30988ca6dcf3f46709.gif"},78617:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-1-ad1158978292da846a982f97a8a9bb44.png"},66677:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-10-8ea8c59eab1344a5553431abe0b59e4c.png"},19561:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-2-d1728d71c5e6efbbdbf1e8ed14503ece.png"},63226:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-3-afd33d7da142558806603f5585317875.png"},64554:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-4-3f7a4948581705f9c575231640dee933.png"},89209:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-5-5a20ca48706bd76423a19d587ab851d7.png"},31158:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-6-17d3bdf2a6067940b53a8c8ec260f8e6.png"},78985:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-7-27297de2f2623d363647363fd4096d65.png"},91131:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/images/image-8-68f62bb3bb922a56e3adb5595be3f0c3.png"},50065:function(e,n,r){r.d(n,{Z:()=>o,a:()=>s});var i=r(67294);let l={},t=i.createContext(l);function s(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);