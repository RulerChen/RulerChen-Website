"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["8058"],{98622:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>c,default:()=>p,toc:()=>o,metadata:()=>l,assets:()=>t,contentTitle:()=>a});var l=JSON.parse('{"id":"CMU15-445/c06","title":"Memory & Disk I/O Management","description":"CMU15-445/645 Memory & Disk I/O Management","source":"@site/docs/CMU15-445/c06.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c06","permalink":"/RulerChen-Website/docs/CMU15-445/c06","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c06.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1754151222000,"sidebarPosition":6,"frontMatter":{"title":"Memory & Disk I/O Management","sidebar_position":6,"description":"CMU15-445/645 Memory & Disk I/O Management","keywords":["CMU15-445/645","Storage Models & Compression","CMU15-445/645 \u7B46\u8A18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Storage Models & Compression","permalink":"/RulerChen-Website/docs/CMU15-445/c05"},"next":{"title":"Hash Tables","permalink":"/RulerChen-Website/docs/CMU15-445/c07"}}'),r=i(85893),s=i(50065);let c={title:"Memory & Disk I/O Management",sidebar_position:"6",description:"CMU15-445/645 Memory & Disk I/O Management",keywords:["CMU15-445/645","Storage Models & Compression","CMU15-445/645 \u7B46\u8A18"],tags:["CMU15-445"]},a=void 0,t={},o=[{value:"Buffer Pool Management",id:"buffer-pool-management",level:2},{value:"Buffer Pool Optimization",id:"buffer-pool-optimization",level:2},{value:"Multiple Buffer Pools",id:"multiple-buffer-pools",level:3},{value:"Prefetching",id:"prefetching",level:3},{value:"Scan Sharing (Synchronized Scans)",id:"scan-sharing-synchronized-scans",level:3},{value:"Buffer Pool Bypass",id:"buffer-pool-bypass",level:3},{value:"Buffer Replacement Policies",id:"buffer-replacement-policies",level:2},{value:"Least Recently Used (LRU)",id:"least-recently-used-lru",level:3},{value:"Clock",id:"clock",level:3},{value:"LRU-K",id:"lru-k",level:3},{value:"Localization",id:"localization",level:3},{value:"Priority Hints",id:"priority-hints",level:3},{value:"Dirty Page",id:"dirty-page",level:3},{value:"OS problem",id:"os-problem",level:2},{value:"Scheduler",id:"scheduler",level:3},{value:"Page Cache",id:"page-cache",level:3},{value:"fsync",id:"fsync",level:3}];function d(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",ul:"ul",...(0,s.a)(),...e.components},{Head:l}=n;return l||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{children:(0,r.jsx)("title",{children:"CMU 15-445 Memory & Disk I/O Management"})}),"\n",(0,r.jsx)(n.p,{children:"\u9019\u7BC0\u6703\u8A0E\u8AD6 DBMS \u5982\u4F55\u7BA1\u7406\u5728\u8A18\u61B6\u9AD4\u548C\u786C\u789F\u4E2D\u79FB\u52D5\u7684\u8CC7\u6599\uFF0C\u4E3B\u8981\u5206\u70BA\u5169\u500B\u90E8\u5206 :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Spatial Control : \u6C7A\u5B9A\u628A page \u5BEB\u5230\u786C\u789F\u4E2D\u7684\u54EA\u500B\u4F4D\u7F6E\uFF0C\u76EE\u6A19\u662F\u5C07\u5E38\u5E38\u9700\u8981\u4E00\u8D77\u7528\u5230\u7684 page \u653E\u5728\u4E00\u8D77\u4F86\u63D0\u9AD8 I/O \u6548\u7387"}),"\n",(0,r.jsx)(n.li,{children:"Temporal Control : \u6C7A\u5B9A\u751A\u9EBC\u6642\u5019\u8981\u628A page \u8B80\u9032\u8A18\u61B6\u9AD4\u6216\u662F\u5BEB\u56DE\u786C\u789F\uFF0C\u76EE\u6A19\u662F\u964D\u4F4E I/O \u7684\u505C\u9813\u6642\u9593"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Buffer Pool",src:i(20481).Z+"",width:"960",height:"539"})}),"\n",(0,r.jsx)(n.p,{children:"\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u8207 mmap \u4E0D\u540C\uFF0Cbuffer pool \u4E0D\u4FDD\u8B49\u5169\u6B21\u8B80\u53D6\u540C\u4E00\u500B page \u6703\u5F97\u5230\u76F8\u540C\u7684\u8A18\u61B6\u9AD4\u4F4D\u7F6E\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"buffer-pool-management",children:"Buffer Pool Management"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u555F\u52D5 DBMS \u6642\uFF0CDBMS \u6703\u5411 OS \u7533\u8ACB\u4E00\u584A\u8A18\u61B6\u9AD4\uFF0C\u9019\u584A\u8A18\u61B6\u9AD4\u5C31\u662F buffer pool\u3002\nDBMS \u6703\u5C07\u9019\u584A\u8A18\u61B6\u9AD4\u5206\u6210\u76F8\u540C\u5927\u5C0F\u7684 frame\uFF0C\u7576\u9700\u8981\u8B80\u53D6 page \u6642\uFF0C\u5C31\u628A page \u8B80\u9032 frame \u4E2D\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u540C\u6642 DBMS \u6703\u7DAD\u8B77\u4E00\u500B page table \u4F86\u8A18\u9304\u6BCF\u500B page \u5728\u8A18\u61B6\u9AD4\u4E2D\u7684\u4F4D\u7F6E\uFF0C\u4E5F\u6703\u8A18\u9304\u4E00\u4E9B metadata\uFF0C\u6BD4\u5982 dirty flag (\u662F\u5426\u88AB\u4FEE\u6539\u904E)\u3001Pin / Reference Counter (\u662F\u5426\u88AB\u4F7F\u7528\u4E2D)\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Buffer Pool Management",src:i(33173).Z+"",width:"960",height:"538"})}),"\n",(0,r.jsx)(n.p,{children:"\u7576 page \u88AB\u5F15\u7528\u6642\uFF0CDBMS \u6703\u5C07\u9019\u500B page \u7684 reference counter +1 \u8868\u793A\u9019\u500B page \u6B63\u5728\u88AB\u4F7F\u7528\u4E2D\uFF0C\u4E0D\u80FD\u88AB\u79FB\u51FA\u8A18\u61B6\u9AD4\u3002\u7576\u6211\u5011\u8981\u8ACB\u6C42\u4E0D\u5728\u8A18\u61B6\u9AD4\u4E2D\u7684 page \u6642\uFF0CDBMS \u6703\u5148\u8ACB\u6C42\u4E00\u500B latch\uFF0C\u7136\u5F8C\u628A page \u8B80\u9032 buffer pool \u4E2D\uFF0C\u518D\u91CB\u653E latch\uFF0C\u9019\u6A23\u53EF\u4EE5\u907F\u514D\u591A\u500B thread \u540C\u6642\u4FEE\u6539\u540C\u4E00\u500B entry\u3002"}),"\n",(0,r.jsx)(n.p,{children:"latch \u8DDF lock \u7684\u5DEE\u5225\u5982\u4E0B :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["lock","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4FDD\u8B77\u8CC7\u6599\u5EAB\u4E0D\u53D7\u5176\u4ED6 transaction \u7684\u5E72\u64FE"}),"\n",(0,r.jsx)(n.li,{children:"\u901A\u5E38\u662F\u5728 transaction \u9032\u884C\u6642\u624D\u6703\u88AB\u4F7F\u7528"}),"\n",(0,r.jsx)(n.li,{children:"\u53EF\u4EE5\u9032\u884C rollback"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["latch","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4FDD\u8B77\u8CC7\u6599\u5EAB\u4E0D\u53D7\u5176\u4ED6 thread \u7684\u5E72\u64FE"}),"\n",(0,r.jsx)(n.li,{children:"\u7121\u6CD5 rollback"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5728 DBMS \u4E2D\uFF0C\u8A18\u61B6\u9AD4\u7684\u5206\u914D\u6703\u4F9D\u64DA\u5169\u500B\u539F\u5247 (Memory Allocation Policies) \u4F86\u9032\u884C\u5206\u914D :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Global Policies : \u8003\u616E\u6240\u6709\u67E5\u8A62\u4F86\u5206\u914D\u8A18\u61B6\u9AD4"}),"\n",(0,r.jsx)(n.li,{children:"Local Policies : \u53EA\u8003\u616E\u55AE\u4E00\u67E5\u8A62\u4F86\u5206\u914D\u8A18\u61B6\u9AD4"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"buffer-pool-optimization",children:"Buffer Pool Optimization"}),"\n",(0,r.jsx)(n.h3,{id:"multiple-buffer-pools",children:"Multiple Buffer Pools"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u53EF\u4EE5\u7DAD\u8B77\u591A\u500B buffer pool\uFF0C\u6BCF\u500B buffer pool \u6709\u4E0D\u540C\u7684\u5927\u5C0F\u548C\u66FF\u63DB\u7B56\u7565\uFF0C\u9019\u9EBC\u505A\u53EF\u4EE5\u6E1B\u5C11 latch \u7684\u7AF6\u722D\uFF0C\u4E26\u63D0\u5347 locality\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4F8B\u5982\u53EF\u4EE5\u6709\u4EE5\u4E0B\u5E7E\u7A2E buffer pool :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple buffer pool instances"}),"\n",(0,r.jsx)(n.li,{children:"Per-database buffer pool"}),"\n",(0,r.jsx)(n.li,{children:"Per-page type buffer pool"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5E38\u898B\u7684\u5206\u914D\u65B9\u5F0F\u6709\u5169\u7A2E :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Object Id : \u5728 record \u4E2D\u7522\u751F\u4E00\u500B object id\uFF0C\u7136\u5F8C\u6839\u64DA object id \u4F86\u6C7A\u5B9A\u653E\u5728\u54EA\u500B buffer pool"}),"\n",(0,r.jsx)(n.li,{children:"Hashing : \u6839\u64DA page id \u7684 hash \u4F86\u6C7A\u5B9A\u653E\u5728\u54EA\u500B buffer pool"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"prefetching",children:"Prefetching"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u53EF\u4EE5\u900F\u904E query plan \u4F86\u9810\u6E2C\u672A\u4F86\u53EF\u80FD\u6703\u7528\u5230\u7684 page\uFF0C\u7136\u5F8C\u63D0\u524D\u628A\u9019\u4E9B page \u8B80\u9032 buffer pool \u4E2D\u3002\n\u9019\u5176\u4E2D\u5305\u542B sequential scan \u548C index scan\uFF0C\u8207 OS \u4E0D\u540C\u7684\u662F\uFF0COS \u7121\u6CD5\u9810\u6E2C\u50CF index scan \u6703\u4F7F\u7528\u5230\u7684 page\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"scan-sharing-synchronized-scans",children:"Scan Sharing (Synchronized Scans)"}),"\n",(0,r.jsx)(n.p,{children:"scan sharing \u4E3B\u8981\u662F\u5728\u6709\u591A\u500B\u67E5\u8A62\u540C\u6642\u9032\u884C sequential scan \u6642\uFF0C\u53EF\u4EE5\u5171\u4EAB\u540C\u4E00\u500B scan \u7684\u7D50\u679C\u3002\n\u8209\u4F8B\u4F86\u8AAA\uFF0C\u5982\u679C\u6709 A \u548C B \u5169\u500B\u67E5\u8A62\u5148\u5F8C\u9032\u884C\uFF0C\u7576 B \u958B\u59CB\u67E5\u8A62\u6642\uFF0C\u53EF\u4EE5\u5148\u8DDF A \u4E00\u8D77\u6383\u63CF\uFF0C\u7B49\u5230 A \u7D50\u675F\u6642\uFF0C\u81EA\u5DF1\u518D\u91CD\u65B0\u6383\u63CF\u4E00\u958B\u59CB\u7F3A\u5C11\u7684\u90E8\u5206\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"buffer-pool-bypass",children:"Buffer Pool Bypass"}),"\n",(0,r.jsx)(n.p,{children:"\u7576\u9700\u8981\u4F7F\u7528 sequential scan \u4F86\u6383\u63CF\u8CC7\u6599\u91CF\u5F88\u5927\u7684\u8868\u6642\uFF0C\u5982\u679C DBMS \u5C07\u6BCF\u500B page \u90FD\u8B80\u9032 buffer pool \u4E2D\uFF0C\u6703\u5C0E\u81F4 buffer pool \u88AB\u6C59\u67D3\uFF0C\u56E0\u70BA\u9019\u4E9B page \u5927\u90FD\u53EA\u7528\u4E00\u6B21\uFF0C\u6703\u6392\u64E0\u5230\u5176\u4ED6\u5E38\u7528\u7684 page\uFF0C\u56E0\u6B64\u6211\u5011\u53EF\u4EE5\u55AE\u7368\u5206\u914D\u4E00\u584A\u8A18\u61B6\u9AD4\u4F86\u5B58\u653E\u9019\u4E9B page\uFF0C\u9019\u6A23\u53EF\u4EE5\u907F\u514D buffer pool \u88AB\u6C59\u67D3\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"buffer-replacement-policies",children:"Buffer Replacement Policies"}),"\n",(0,r.jsx)(n.p,{children:"\u7576 buffer pool \u88AB\u586B\u6EFF\u6642\uFF0CDBMS \u9700\u8981\u6C7A\u5B9A\u8981\u66FF\u63DB\u54EA\u4E9B page\uFF0C\u9019\u500B\u6C7A\u5B9A\u662F\u6839\u64DA\u66FF\u63DB\u7B56\u7565 (Replacement Policy) \u4F86\u6C7A\u5B9A\u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u66FF\u63DB\u7B56\u7565\u7684\u76EE\u6A19\u5982\u4E0B :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Correctness : \u78BA\u4FDD page \u5728\u88AB\u66FF\u63DB\u524D\u88AB\u5BEB\u56DE\u786C\u789F"}),"\n",(0,r.jsx)(n.li,{children:"Accuracy : \u78BA\u4FDD\u66FF\u63DB\u7684 page \u662F\u6700\u4E0D\u53EF\u80FD\u518D\u88AB\u4F7F\u7528\u7684"}),"\n",(0,r.jsx)(n.li,{children:"Speed : \u5FEB\u901F\u627E\u5230\u8981\u88AB\u66FF\u63DB\u7684 page\uFF0C\u56E0\u70BA\u6BCF\u6B21\u79FB\u9664\u90FD\u8981\u4F7F\u7528 latch"}),"\n",(0,r.jsx)(n.li,{children:"Metadata Overhead : \u7B56\u7565\u6240\u9700\u7684 metadata \u8D8A\u5C11\u8D8A\u597D"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"least-recently-used-lru",children:"Least Recently Used (LRU)"}),"\n",(0,r.jsx)(n.p,{children:"\u4F7F\u7528 linked list \u4F86\u8A18\u9304\u6BCF\u500B page \u6700\u5F8C\u4E00\u6B21\u88AB\u4F7F\u7528\u7684\u6642\u9593\uFF0C\u5982\u679C\u6EFF\u4E86\uFF0C\u5C31\u628A\u6700\u4E45\u6C92\u88AB\u4F7F\u7528\u7684 page \u66FF\u63DB\u6389\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"LRU",src:i(70952).Z+"",width:"956",height:"537"})}),"\n",(0,r.jsx)(n.h3,{id:"clock",children:"Clock"}),"\n",(0,r.jsx)(n.p,{children:"\u8207 LRU \u985E\u4F3C\uFF0C\u4F46\u662F clock \u4E0D\u9700\u8981\u7D00\u9304\u4E0A\u4E00\u6B21\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u800C\u662F\u8A18\u9304\u4E00\u500B reference bit\u3002"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7576 page \u88AB\u8A2A\u554F\u6642\uFF0Creference bit \u6703\u88AB\u8A2D\u70BA 1\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u7576\u9700\u8981\u79FB\u9664 page \u6642\uFF0C\u5F9E\u4E0A\u4E00\u6B21\u7684\u4F4D\u7F6E\u958B\u59CB\uFF0C\u8F2A\u6D41\u8A62\u554F reference bit\uFF0C\n\u5982\u679C reference bit \u662F 1\uFF0C\u5247\u5C07 reference bit \u8A2D\u70BA 0\uFF0C\u7136\u5F8C\u7E7C\u7E8C\u5F80\u4E0B\u627E\u3002\n\u5982\u679C reference bit \u662F 0\uFF0C\u5247\u5C07\u9019\u500B page \u79FB\u9664\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Clock",src:i(94084).Z+"",width:"959",height:"538"})}),"\n",(0,r.jsx)(n.h3,{id:"lru-k",children:"LRU-K"}),"\n",(0,r.jsx)(n.p,{children:"\u4E0D\u7BA1\u662F LRU \u9084\u662F clock\uFF0C\u90FD\u6703\u9047\u5230 sequential flooding \u7684\u554F\u984C\uFF0C\u6700\u65B0\u8B80\u53D6\u7684 page \u53CD\u800C\u662F\u6700\u4E0D\u9700\u8981\u7684 page\uFF0C\u56E0\u6B64\u6709\u4E86 LRU-K \u4F86\u89E3\u6C7A\u9019\u500B\u554F\u984C\u3002"}),"\n",(0,r.jsx)(n.p,{children:"LRU-K \u6703\u4FDD\u5B58\u6BCF\u500B page \u6700\u5F8C k \u6B21\u88AB\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u7136\u5F8C\u6839\u64DA\u9019\u500B\u6642\u9593\u4F86\u9810\u4F30\u4E0B\u6B21\u88AB\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u5982\u679C k = 1 \u5C31\u662F LRU\uFF0C\u901A\u5E38\u6703\u4F7F\u7528 k = 2\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4E0D\u904E\u9019\u7A2E\u65B9\u5F0F\u4E5F\u6709\u53EF\u80FD\u5C0E\u81F4\u6709\u4E9B page \u6703\u4E00\u76F4\u88AB\u6392\u51FA buffer pool\uFF0C\u6240\u4EE5\u6211\u5011\u6703\u5728\u8A18\u61B6\u9AD4\u4E2D\u7DAD\u8B77\u4E00\u500B hash table\uFF0C\u7D00\u9304\u4E00\u4E9B\u88AB\u6392\u51FA\u7684\u9801\u9762\u88AB\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u9019\u6A23\u5C31\u4E0D\u6703\u8B93\u9019\u4E9B page \u4E00\u76F4\u88AB\u6392\u51FA buffer pool\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9019\u7A2E\u65B9\u5F0F\u88AB PostgreSQL \u4EE5\u53CA SQL Server \u6240\u4F7F\u7528\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u800C MySQL \u5247\u662F\u4F7F\u7528\u4E86\u4E00\u7A2E\u985E\u4F3C\u7684 midpoint insertion strategy \u65B9\u6CD5\uFF0C\u9019\u7A2E\u65B9\u6CD5\u6703\u5C07 list \u5206\u6210 young list \u8DDF old list\uFF0C\u7576\u65B0\u7684 page \u88AB\u8A2A\u554F\u6642\uFF0C\u6703\u88AB\u653E\u5230 old list \u7684\u6700\u524D\u9762\uFF0C\u800C\u7576 old list \u88E1\u9762\u7684 page \u88AB\u8A2A\u554F\u5230\u6642\uFF0C\u6703\u88AB\u653E\u5230 young list \u7684\u6700\u524D\u9762\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"LRU-K",src:i(6510).Z+"",width:"958",height:"539"})}),"\n",(0,r.jsx)(n.h3,{id:"localization",children:"Localization"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u6703\u6839\u64DA\u6BCF\u500B\u67E5\u8A62\u4F86\u9078\u64C7\u8981\u88AB\u79FB\u9664\u7684 page\uFF0C\u9019\u6A23\u53EF\u4EE5\u76E1\u91CF\u6E1B\u5C11\u5C0D buffer pool \u7684\u6C59\u67D3\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5982 PostgreSQL \u6703\u5C0D\u6BCF\u500B\u67E5\u8A62\u7DAD\u8B77\u4E00\u500B ring buffer\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"priority-hints",children:"Priority Hints"}),"\n",(0,r.jsx)(n.p,{children:"\u6709\u6642\u5019 DBMS \u53EF\u4EE5\u77E5\u9053\u6BCF\u500B page \u5728\u57F7\u884C\u671F\u9593\u7684\u4E0A\u4E0B\u6587\u8A0A\u606F\uFF0C\u53EF\u4EE5\u5E6B\u52A9 DBMS \u9078\u64C7\u8981\u88AB\u79FB\u9664\u7684 page\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"dirty-page",children:"Dirty Page"}),"\n",(0,r.jsx)(n.p,{children:"\u79FB\u9664\u4E00\u500B dirty page \u7684\u6210\u672C\u662F\u975E\u5E38\u9AD8\u7684\uFF0C\u56E0\u70BA\u9084\u8981\u5C07\u5176\u5148\u5BEB\u5165\u786C\u789F\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9664\u4E86\u5728 replacement policy \u4E2D\u8003\u616E dirty page \u5916\uFF0CDBMS \u4E5F\u6703\u5728\u5F8C\u53F0\u5B9A\u671F\u5C07 dirty page \u5BEB\u5165\u786C\u789F\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"os-problem",children:"OS problem"}),"\n",(0,r.jsx)(n.p,{children:"\u7E3D\u9AD4\u4F86\u8AAA\uFF0CDBMS \u61C9\u8A72\u76E1\u91CF\u6E1B\u5C11\u5C0D OS \u7684\u4F9D\u8CF4\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"scheduler",children:"Scheduler"}),"\n",(0,r.jsx)(n.p,{children:"OS \u6703\u5617\u8A66\u900F\u904E\u91CD\u65B0\u6392\u5E8F\u4EE5\u53CA\u5408\u4F75 I/O \u4F86\u63D0\u9AD8\u6548\u7387\uFF0C\u4F46 OS \u4E26\u4E0D\u6703\u77E5\u9053\u90A3\u4E9B IO \u5C0D DBMS \u4F86\u8AAA\u662F\u91CD\u8981\u7684\uFF0C\u6240\u4EE5\u8A31\u591A DBMS \u6703\u5EFA\u8B70\u4F7F\u7528 deadline \u6216 noop scheduler (FIFO)\uFF0C\u5982 MySQL\u3001Oracle\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u540C\u6642\uFF0CDBMS \u6703\u81EA\u5DF1\u6709\u4E00\u500B scheduler \u4F86\u7BA1\u7406\u8B80\u5BEB\u8ACB\u6C42\uFF0C\u5B83\u6703\u6839\u64DA I/O \u65B9\u5F0F\u3001table / index / log\u3001sequential / random \u7B49\u7B49\u4F86\u6C7A\u5B9A\u8B80\u5BEB\u7684\u9806\u5E8F\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"page-cache",children:"Page Cache"}),"\n",(0,r.jsxs)(n.p,{children:["OS \u6703\u7DAD\u8B77\u4E00\u500B page cache \u4F86\u5B58\u653E\u6700\u8FD1\u88AB\u8B80\u53D6\u7684 page\uFF0C\u4F46\u9019\u6709\u53EF\u80FD\u6703\u8DDF DBMS \u885D\u7A81\uFF0C\u56E0\u6B64\u901A\u5E38\u6703\u4F7F\u7528 ",(0,r.jsx)(n.code,{children:"O_DIRECT"})," \u4F86\u907F\u514D\u9019\u500B\u554F\u984C\uFF0C\u9664\u4E86 PostgreSQL \u4EE5\u5916\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Page Cache",src:i(22922).Z+"",width:"956",height:"537"})}),"\n",(0,r.jsx)(n.h3,{id:"fsync",children:"fsync"}),"\n",(0,r.jsxs)(n.p,{children:["\u7576\u6211\u5011\u57F7\u884C ",(0,r.jsx)(n.code,{children:"fwrite"})," \u7684\u6642\u5019\uFF0COS \u4E26\u4E0D\u6703\u7ACB\u5373\u5C07\u8CC7\u6599\u5BEB\u5165\u786C\u789F\uFF0C\u800C\u662F\u6703\u5148\u5BEB\u5165 page cache\uFF0C\u7136\u5F8C\u518D\u7531 OS \u4F86\u6C7A\u5B9A\u4EC0\u9EBC\u6642\u5019\u5BEB\u5165\u786C\u789F\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7576\u6211\u5011\u57F7\u884C ",(0,r.jsx)(n.code,{children:"fsync"})," \u7684\u6642\u5019\uFF0COS \u6703\u5F37\u5236\u5C07 page cache \u7684\u8CC7\u6599\u5BEB\u5165\u786C\u789F\uFF0C\u4E26\u4E14\u6703 block \u4F4F\u9019\u500B thread \u76F4\u5230\u5BEB\u5165\u5B8C\u6210\uFF0C\u4E26\u544A\u8A34\u4F60\u5DF2\u7D93\u5B8C\u6210\u5BEB\u5165\u3002\u4F46\u5982\u679C fsync \u5931\u6557\uFF0C\u5B83\u4F9D\u7136\u6703\u5C07 dirty page \u6A19\u8A18\u70BA clean\uFF0C\u9019\u6A23\u7576\u4E0B\u6B21\u4F7F\u7528\u9019\u500B page \u6642\uFF0C\u6703\u5C0E\u81F4\u932F\u8AA4\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u9019\u662F linux \u91DD\u5C0D USB \u7684\u4E00\u500B\u8A2D\u8A08\uFF0C\u5C0E\u81F4 postgresql \u4E4B\u524D\u6709\u767C\u751F\u904E\u56B4\u91CD\u554F\u984C\uFF0C\u53EF\u4EE5\u53C3\u8003 ",(0,r.jsx)(n.a,{href:"https://wiki.postgresql.org/wiki/Fsync_Errors",children:"PostgreSQL Fsync Errors"}),"\u3002"]})]})}function p(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},33173:function(e,n,i){i.d(n,{Z:()=>l});let l=i.p+"assets/images/image-1-53d7213bffc644cfe107cce257cfd922.png"},70952:function(e,n,i){i.d(n,{Z:()=>l});let l=i.p+"assets/images/image-2-69b94d20eaac9bf800e93a81b628573c.png"},94084:function(e,n,i){i.d(n,{Z:()=>l});let l=i.p+"assets/images/image-3-cdac81bcf6348260d008b457e54bbe36.png"},6510:function(e,n,i){i.d(n,{Z:()=>l});let l=i.p+"assets/images/image-4-4e32a2f0129ef0fd182844aad57fcdfc.png"},22922:function(e,n,i){i.d(n,{Z:()=>l});let l=i.p+"assets/images/image-5-78626b6ddeca6717883cda04ee9e14cf.png"},20481:function(e,n,i){i.d(n,{Z:()=>l});let l=i.p+"assets/images/image-eb522a6c73fcc7ddcecac48e0cefc009.png"},50065:function(e,n,i){i.d(n,{Z:()=>a,a:()=>c});var l=i(67294);let r={},s=l.createContext(r);function c(e){let n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);