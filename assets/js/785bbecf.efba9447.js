"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2815],{89926:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>q,contentTitle:()=>F,default:()=>z,frontMatter:()=>U,metadata:()=>i,toc:()=>R});const i=JSON.parse('{"id":"Observability/loki","title":"[Loki] \u60e1\u4f5c\u5287\u4e4b\u795e - Loki \u89e3\u5bc6\u65e5\u8a8c\u8ff7\u5bae","description":"Grafana Loki \u57fa\u672c\u4ecb\u7d39","source":"@site/docs/Observability/loki.mdx","sourceDirName":"Observability","slug":"/Observability/loki","permalink":"/RulerChen-Website/docs/Observability/loki","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/Observability/loki.mdx","tags":[],"version":"current","lastUpdatedAt":1739371782000,"sidebarPosition":10,"frontMatter":{"title":"[Loki] \u60e1\u4f5c\u5287\u4e4b\u795e - Loki \u89e3\u5bc6\u65e5\u8a8c\u8ff7\u5bae","sidebar_position":10,"description":"Grafana Loki \u57fa\u672c\u4ecb\u7d39","keywords":["grafana","loki","log"]},"sidebar":"tutorialSidebar","previous":{"title":"Observability","permalink":"/RulerChen-Website/docs/Observability/"},"next":{"title":"[Grafana] \u773e\u795e\u4e4b\u93e1 - Grafana \u5c55\u73fe\u6578\u64da\u8996\u89ba\u5316\u7684\u5049\u5cb8","permalink":"/RulerChen-Website/docs/Observability/grafana"}}');var s,l,t,o,a,d,c,h,p,x,u,j,m,g,f,b,k,v,y,L,I,E,G,D,S,w,_,C,A,Q,O=r(74848),B=r(28453),M=r(96540);function V(){return V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},V.apply(null,arguments)}const T=e=>{let{title:n,titleId:r,...i}=e;return M.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",id:"Layer_1",width:236.87,height:142.1,x:0,y:0,viewBox:"0.36 0.95 236.87 142.1","aria-labelledby":r},i),n?M.createElement("title",{id:r},n):null,s||(s=M.createElement("style",null,".st0{fill:#f7f7f7}")),l||(l=M.createElement("path",{d:"M14.95 128.29h13.73c-1.01 5.66-5.81 9.74-11.49 9.74-6.64 0-11.85-5.38-11.85-12.25 0-6.81 5.48-12.34 12.21-12.34 3.74 0 6.94 2.09 8.97 3.85l.16.14 2.97-3.66-.14-.13c-3.59-3.35-7.72-5.13-11.96-5.13-9.48 0-17.19 7.75-17.19 17.28 0 9.64 7.39 17.19 16.82 17.19 9.04 0 16.41-7.27 16.78-16.54v-2.57H14.95zM40.78 121.28v-1.64h-4.16v23.05h4.93v-13.83c0-2.63 2-4.46 4.87-4.46h2.78v-4.75h-3.28c-2.08-.01-3.92.58-5.14 1.63M67.89 122.22a11.22 11.22 0 0 0-7.54-2.94c-6.58 0-11.93 5.31-11.93 11.84 0 6.58 5.35 11.93 11.93 11.93 2.84 0 5.52-1.04 7.59-2.94v2.58h4.25v-23.05h-4.3zm-.59 8.9c0 3.83-3.1 6.95-6.91 6.95s-6.91-3.12-6.91-6.95c0-3.81 3.1-6.91 6.91-6.91s6.91 3.1 6.91 6.91M75.73 118.71v23.98h4.89v-18.66h7.2v-4.39h-7.2v-1.07c0-1.84 1.51-3.33 3.38-3.33h3.83v-4.66H84c-4.87 0-8.27 3.34-8.27 8.13M106.87 122.22a11.23 11.23 0 0 0-7.54-2.95c-6.58 0-11.93 5.31-11.93 11.84 0 6.58 5.35 11.93 11.93 11.93 2.84 0 5.52-1.04 7.59-2.94v2.58h4.25v-23.05h-4.3zm-7.5 15.85c-3.81 0-6.91-3.12-6.91-6.95 0-3.81 3.1-6.91 6.91-6.91s6.91 3.1 6.91 6.91c0 3.83-3.1 6.95-6.91 6.95M124.52 119.28c-2.13 0-4.21.74-5.91 2.08v-1.72h-4.16v23.05h4.93v-13.61c0-2.69 2.21-4.87 4.92-4.87a4.87 4.87 0 0 1 4.87 4.87v13.61h4.98v-13.61c-.01-5.4-4.32-9.8-9.63-9.8M155.54 122.22a11.23 11.23 0 0 0-7.54-2.95c-6.58 0-11.93 5.31-11.93 11.84 0 6.58 5.35 11.93 11.93 11.93 2.84 0 5.52-1.04 7.59-2.94v2.58h4.25v-23.05h-4.3zm-.59 8.9c0 3.83-3.1 6.95-6.91 6.95s-6.91-3.12-6.91-6.95c0-3.81 3.1-6.91 6.91-6.91s6.91 3.1 6.91 6.91M178.48 134.37v-24.66h-5.07v24.66c0 5.42 2.5 8.05 7.63 8.05h1.49v-5.07h-1.4c-1.68 0-2.65-1.08-2.65-2.98M196.11 118.57c-6.68 0-12.11 5.43-12.11 12.11s5.43 12.11 12.11 12.11 12.11-5.43 12.11-12.11-5.43-12.11-12.11-12.11m7.04 12.11c0 3.88-3.16 7.04-7.04 7.04s-7.04-3.16-7.04-7.04 3.16-7.04 7.04-7.04 7.04 3.15 7.04 7.04M229.01 118.94h-6.03l-7.14 7.98v-17.21h-5.07v32.71h5.07v-8.48l1.08-1.27 6.91 9.66.06.09h6.04l-9.74-13.44zM231.81 118.94h4.97v23.48h-4.97zM234.17 117.57c1.8 0 3.06-1.24 3.06-3.02 0-1.48-1.15-3.02-3.06-3.02-1.58 0-3.02 1.44-3.02 3.02 0 1.69 1.33 3.02 3.02 3.02",className:"st0"})),t||(t=M.createElement("linearGradient",{id:"SVGID_1_",x1:542.915,x2:542.915,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),o||(o=M.createElement("path",{fill:"url(#SVGID_1_)",d:"m102.59 95.31-8.28 1.28 1.28 8.28 8.28-1.27z"})),a||(a=M.createElement("linearGradient",{id:"SVGID_2_",x1:596.576,x2:596.576,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),d||(d=M.createElement("path",{fill:"url(#SVGID_2_)",d:"m132.49 85.92 36.56-5.63-1.28-8.28-36.55 5.62z"})),c||(c=M.createElement("linearGradient",{id:"SVGID_3_",x1:569.155,x2:569.155,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),h||(h=M.createElement("path",{fill:"url(#SVGID_3_)",d:"m118.25 79.63 1.27 8.28 8.29-1.27-1.28-8.29z"})),p||(p=M.createElement("linearGradient",{id:"SVGID_4_",x1:556.035,x2:556.035,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),x||(x=M.createElement("path",{fill:"url(#SVGID_4_)",d:"m116.84 101.6-1.28-8.28-8.28 1.27 1.27 8.29z"})),u||(u=M.createElement("linearGradient",{id:"SVGID_5_",x1:542.915,x2:542.915,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),j||(j=M.createElement("path",{fill:"url(#SVGID_5_)",d:"m93.59 91.9 8.28-1.27-1.27-8.29-8.28 1.28z"})),m||(m=M.createElement("linearGradient",{id:"SVGID_6_",x1:596.576,x2:596.576,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),g||(g=M.createElement("path",{fill:"url(#SVGID_6_)",d:"m169.77 84.98-36.56 5.62 1.28 8.29 36.55-5.63z"})),f||(f=M.createElement("linearGradient",{id:"SVGID_7_",x1:569.155,x2:569.155,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),b||(b=M.createElement("path",{fill:"url(#SVGID_7_)",d:"m120.25 92.6 1.27 8.28 8.28-1.27-1.27-8.29z"})),k||(k=M.createElement("linearGradient",{id:"SVGID_8_",x1:556.035,x2:556.035,y1:723.249,y2:595.214,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),v||(v=M.createElement("path",{fill:"url(#SVGID_8_)",d:"m106.56 89.91 8.28-1.28-1.27-8.28-8.29 1.27z"})),y||(y=M.createElement("linearGradient",{id:"SVGID_9_",x1:540.495,x2:540.495,y1:720.762,y2:599.332,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),L||(L=M.createElement("path",{fill:"url(#SVGID_9_)",d:"m91.6 78.94 3.49-.54L84.9 12.12l-3.5.54z"})),I||(I=M.createElement("linearGradient",{id:"SVGID_10_",x1:545.361,x2:545.361,y1:724.13,y2:593.756,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),E||(E=M.createElement("path",{fill:"url(#SVGID_10_)",d:"m96.4 78.2 3.5-.54L88.96 6.5l-3.5.54z"})),G||(G=M.createElement("linearGradient",{id:"SVGID_11_",x1:553.668,x2:553.668,y1:727.089,y2:588.856,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),D||(D=M.createElement("path",{fill:"url(#SVGID_11_)",d:"m104.62 76.93 3.49-.54L96.51.95l-3.5.54z"})),S||(S=M.createElement("linearGradient",{id:"SVGID_12_",x1:558.534,x2:558.534,y1:722.492,y2:596.468,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),w||(w=M.createElement("path",{fill:"url(#SVGID_12_)",d:"m109.42 76.19 3.5-.54-10.58-68.78-3.5.54z"})),_||(_=M.createElement("linearGradient",{id:"SVGID_13_",x1:566.737,x2:566.737,y1:717.193,y2:605.243,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),C||(C=M.createElement("path",{fill:"url(#SVGID_13_)",d:"m117.53 74.95 3.5-.54-9.4-61.1-3.5.53z"})),A||(A=M.createElement("linearGradient",{id:"SVGID_14_",x1:571.603,x2:571.603,y1:718.808,y2:602.568,fill:"#000",gradientTransform:"rotate(-8.748 -3581.317 3299.473)",gradientUnits:"userSpaceOnUse"},M.createElement("stop",{offset:0,stopColor:"#faed1e"}),M.createElement("stop",{offset:1,stopColor:"#f15b2b"}))),Q||(Q=M.createElement("path",{fill:"url(#SVGID_14_)",d:"m122.34 74.21 3.5-.54-9.76-63.44-3.5.53z"})))},U={title:"[Loki] \u60e1\u4f5c\u5287\u4e4b\u795e - Loki \u89e3\u5bc6\u65e5\u8a8c\u8ff7\u5bae",sidebar_position:10,description:"Grafana Loki \u57fa\u672c\u4ecb\u7d39",keywords:["grafana","loki","log"]},F=void 0,q={},R=[{value:"Background",id:"background",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Storage",id:"storage",level:3},{value:"Multi-tenancy",id:"multi-tenancy",level:3},{value:"Components",id:"components",level:2},{value:"Distributor",id:"distributor",level:3},{value:"Ingester",id:"ingester",level:3},{value:"Query Frontend",id:"query-frontend",level:3},{value:"Query Scheduler",id:"query-scheduler",level:3},{value:"Querier",id:"querier",level:3},{value:"Index Gateway",id:"index-gateway",level:3},{value:"Compactor",id:"compactor",level:3},{value:"Ruler",id:"ruler",level:3},{value:"Other Components",id:"other-components",level:3},{value:"Deployment Mode",id:"deployment-mode",level:2},{value:"Monolithic mode",id:"monolithic-mode",level:3},{value:"Simple scalable mode",id:"simple-scalable-mode",level:3},{value:"Microservices mode",id:"microservices-mode",level:3},{value:"Label",id:"label",level:2},{value:"Label Best Practices",id:"label-best-practices",level:3},{value:"Automatic Stream Sharding",id:"automatic-stream-sharding",level:3},{value:"Structure Metadata",id:"structure-metadata",level:3},{value:"Bloom Filter",id:"bloom-filter",level:3},{value:"Reference",id:"reference",level:2}];function P(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,B.R)(),...e.components};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,O.jsx)(T,{style:{width:"200px",height:"200px"}})}),"\n",(0,O.jsx)(n.h2,{id:"background",children:"Background"}),"\n",(0,O.jsx)(n.p,{children:"\u9996\u5148\u4f86\u4e86\u89e3\u4e00\u4e0b Loki \u9019\u500b\u5de5\u5177\u51fa\u73fe\u7684\u80cc\u666f\uff0c\u4e0b\u5716\u8aaa\u660e\u4e86\u4e00\u822c\u60c5\u6cc1\u4e0b\u5982\u4f55\u7528\u50b3\u7d71\u7684\u76e3\u63a7\u65b9\u5f0f\u9032\u884c\u932f\u8aa4\u5206\u6790\u3002"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Observability Cloud",src:r(24681).A+"",width:"1442",height:"800"})}),"\n",(0,O.jsx)(n.p,{children:"\u9996\u5148 Prometheus \u6703\u4f9d\u64da\u4e00\u4e9b\u6307\u6a19\u4f86\u767c\u9001\u8b66\u5831\u7d66\u8ca0\u8cac\u4eba\uff0c\u8ca0\u8cac\u4eba\u5c31\u53bb\u6703\u67e5\u770b\u5100\u8868\u677f\u4f86\u67e5\u770b\u5230\u5e95\u662f\u54ea\u500b\u670d\u52d9\u51fa\u932f\uff0c\u627e\u5230\u4e4b\u5f8c\u5c31\u6703\u900f\u904e\u65e5\u8a8c\u4f86\u67e5\u770b\u932f\u8aa4\uff0c\u6216\u8005\u4f7f\u7528\u985e\u4f3c Jaeger \u7684\u8ffd\u8e64\u5de5\u5177\u4f86\u67e5\u770b\u8acb\u6c42\u7684\u6d41\u7a0b\u3002"}),"\n",(0,O.jsxs)(n.p,{children:["\u5728 Loki \u51fa\u73fe\u4e4b\u524d\uff0c\u5982\u679c\u6211\u5011\u9700\u8981\u67e5\u770b k8s \u4e2d\u7684\u65e5\u8a8c\uff0c\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 ",(0,O.jsx)(n.code,{children:"kubectl logs -l name=XXX | grep XXX"})," \u6307\u4ee4\u4f86\u67e5\u770b\uff0c\u9019\u6a23\u7684\u7f3a\u9ede\u662f\u9700\u8981\u9010\u4e00\u67e5\u770b\u6bcf\u500b pod\uff0c\u4e26\u4e14\u7576 pod \u88ab\u91cd\u555f\u6642\u5c31\u6709\u53ef\u80fd\u6703\u5c0e\u81f4\u65e5\u8a8c\u4e1f\u5931\uff0c\u540c\u6642\uff0c\u5728\u5100\u8868\u677f\u8ddf CLI \u4e2d\u5207\u63db\u4e5f\u662f\u4e00\u4ef6\u9ebb\u7169\u7684\u4e8b\u60c5\u3002"]}),"\n",(0,O.jsx)(n.p,{children:"\u6211\u5011\u7576\u7136\u53ef\u4ee5\u4f7f\u7528\u985e\u4f3c ELK \u7684\u7cfb\u7d71\u4f86\u5132\u5b58\u548c\u67e5\u770b\u65e5\u8a8c\uff0c\u4f46\u662f ELK \u672c\u8eab\u4e26\u4e0d\u662f\u70ba\u65e5\u8a8c\u6240\u8a2d\u8a08\uff0c\u56e0\u6b64\u5c31\u6703\u6709\u4e00\u4e9b\u7f3a\u9ede\uff0c\u4f8b\u5982\u5132\u5b58\u6210\u672c\u975e\u5e38\u6602\u8cb4\u3002"}),"\n",(0,O.jsxs)(n.p,{children:["\u4e5f\u56e0\u6b64\uff0cGrafana Labs \u63a8\u51fa\u4e86 Loki \u9019\u500b\u958b\u6e90\u7684\u65e5\u8a8c\u8490\u96c6\u5de5\u5177\uff0c\u76ee\u7684\u5c31\u662f ",(0,O.jsx)(n.code,{children:"Keep it simple. Just support grep!"}),"\u3002"]}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Observability Cloud",src:r(76498).A+"",width:"616",height:"267"})}),"\n",(0,O.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,O.jsx)(n.admonition,{type:"info",children:(0,O.jsxs)(n.blockquote,{children:["\n",(0,O.jsx)(n.p,{children:"Like Prometheus, but for logs."}),"\n"]})}),"\n",(0,O.jsx)(n.p,{children:"Loki \u662f\u5728 2018 \u5e74\u7684 KubeCon \u4e2d\u7531 Grafana Labs \u767c\u5e03\u7684\u958b\u6e90\u8edf\u9ad4\uff0c\u662f\u4e00\u500b\u53d7\u5230 Prometheus \u555f\u767c\u7684\u6c34\u5e73\u53ef\u64f4\u5c55\u3001\u9ad8\u53ef\u7528\u3001\u591a\u79df\u6236\u7684\u65e5\u8a8c\u805a\u5408\u7cfb\u7d71\uff0c\u8207 Prometheus \u7684\u4e0d\u540c\u4e4b\u8655\u5728\u65bc\u5b83\u5c08\u6ce8\u65bc\u65e5\u8a8c\u800c\u4e0d\u662f\u6307\u6a19\uff0c\u4e26\u900f\u904e push \u6a21\u578b\u4f86\u6536\u96c6\u65e5\u8a8c\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u5f9e\u6574\u9ad4\u7684\u67b6\u69cb\u4f86\u770b\uff0c\u4e3b\u8981\u53ef\u4ee5\u5206\u70ba\u4e09\u500b\u90e8\u5206 :"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Loki",src:r(98043).A+"",width:"1200",height:"372"})}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.strong,{children:"Agent"})," : \u5e38\u898b\u7684\u6709 Promtail\u3001Alloy \u8ddf Fluentd \u7b49\uff0c\u7528\u65bc\u6536\u96c6\u65e5\u8a8c\u548c\u6a19\u7c64\u4e26\u900f\u904e HTTP request \u5c07\u65e5\u8a8c\u767c\u9001\u5230 Loki"]}),"\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.strong,{children:"Loki"})," : \u7528\u65bc\u63a5\u6536\u3001\u5b58\u5132\u65e5\u8a8c\u4ee5\u53ca\u8655\u7406\u67e5\u8a62"]}),"\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.strong,{children:"Grafana"})," : \u53ef\u4ee5\u4f7f\u7528 LogQL \u4f86\u67e5\u8a62\u4e26\u986f\u793a Loki \u4e2d\u7684\u65e5\u8a8c"]}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"Loki \u5177\u6709\u4ee5\u4e0b\u7279\u9ede :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"\u64f4\u5c55\u6027 (Scalability) : Loki \u6709\u4e09\u7a2e\u4e0d\u540c\u7684\u90e8\u5c6c\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5c07\u6240\u6709\u7684\u7d44\u4ef6\u90fd\u90e8\u5c6c\u5728\u55ae\u4e00\u7bc0\u9ede\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u5c07\u6bcf\u500b\u7d44\u4ef6\u5206\u958b\u90e8\u5c6c\uff0c\u4ee5\u6eff\u8db3\u4e0d\u540c\u7684\u9700\u6c42"}),"\n",(0,O.jsx)(n.li,{children:"\u591a\u79df\u6236\u6027 (Multi-tenancy) : Loki \u53ef\u4ee5\u5141\u8a31\u591a\u500b\u79df\u6236\u5171\u4eab\u5be6\u4f8b\u3002\u6bcf\u500b\u79df\u6236\u7684\u8cc7\u6599\u90fd\u53ef\u4ee5\u900f\u904e\u8a2d\u5b9a ID \u8207\u5176\u4ed6\u79df\u6236\u5b8c\u5168\u9694\u96e2"}),"\n",(0,O.jsx)(n.li,{children:"\u5132\u5b58\u6548\u7387 (Storage Efficiency) : Loki \u4f7f\u7528\u4e86\u7d93\u904e\u58d3\u7e2e\u7684 chunks\u3001\u8f03\u5c0f\u7684\u7d22\u5f15\u4ee5\u53ca\u4f7f\u7528\u7269\u4ef6\u5b58\u5132\uff0c\u5927\u5e45\u964d\u4f4e\u4e86\u5132\u5b58\u6210\u672c"}),"\n",(0,O.jsxs)(n.li,{children:["\u8b66\u5831 (Alerting) : Loki \u4e2d\u7684 ",(0,O.jsx)(n.code,{children:"ruler"})," \u7d44\u4ef6\u53ef\u4ee5\u7528\u4f86\u76e3\u63a7\u65e5\u8a8c\u4e2d\u7684\u7570\u5e38"]}),"\n",(0,O.jsx)(n.li,{children:"Grafana \u6574\u5408 : Loki \u8207 Grafana \u7684\u6574\u5408\u975e\u5e38\u7dca\u5bc6\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u4f7f\u7528 LogQL \u8a9e\u8a00\u4f86\u67e5\u8a62\u65e5\u8a8c"}),"\n"]}),"\n",(0,O.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,O.jsxs)(n.p,{children:["Loki \u662f microservice-based \u7684\u67b6\u69cb\uff0c\u53ef\u4ee5\u5c07\u6240\u6709\u7684\u7d44\u4ef6\u5206\u958b\u90e8\u7f72\uff0c\u4e26\u4f7f\u7528 ",(0,O.jsx)(n.code,{children:"-target"})," \u63a7\u5236\u9019\u500b\u5bb9\u5668\u61c9\u8a72\u64d4\u4efb\u7684\u89d2\u8272\uff0c\u5177\u9ad4\u7684\u7d44\u4ef6\u5982\u4e0b\u5716\u6240\u793a :"]}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Loki Architecture",src:r(43236).A+"",width:"1024",height:"774"})}),"\n",(0,O.jsx)(n.p,{children:"\u7576\u8cc7\u6599\u5beb\u5165\u6642\uff0c\u6d41\u7a0b\u5982\u4e0b :"}),"\n",(0,O.jsxs)(n.ol,{children:["\n",(0,O.jsx)(n.li,{children:"Distributor \u63a5\u6536\u5305\u542b\u65e5\u8a8c\u6d41\u548c\u65e5\u8a8c\u884c\u7684 HTTP POST \u8acb\u6c42"}),"\n",(0,O.jsx)(n.li,{children:"Distributor \u5c0d\u8acb\u6c42\u4e2d\u5305\u542b\u7684\u6bcf\u500b\u65e5\u8a8c\u6d41\u9032\u884c\u54c8\u5e0c\u904b\u7b97\uff0c\u6839\u64da\u4e00\u81f4\u6027\u54c8\u5e0c\u74b0 (Consistent Hash Ring) \u7684\u8cc7\u8a0a\uff0c\u78ba\u8a8d\u6bcf\u500b\u6d41\u61c9\u88ab\u767c\u9001\u5230\u54ea\u500b Ingester"}),"\n",(0,O.jsx)(n.li,{children:"Distributor \u5c07\u6bcf\u500b\u65e5\u8a8c\u6d41\u767c\u9001\u5230\u5c0d\u61c9\u7684 Ingester \u5be6\u4f8b\u4ee5\u53ca\u914d\u7f6e\u7684\u526f\u672c (\u6839\u64da Replication Factor)"}),"\n",(0,O.jsx)(n.li,{children:"Ingester \u63a5\u6536\u5230\u65e5\u8a8c\u6d41\u5f8c\uff0c\u6703\u70ba\u8a72\u6d41\u7684\u6578\u64da\u5275\u5efa\u4e00\u500b\u65b0\u7684 chunk \u6216\u8005\u5c07\u6578\u64da\u8ffd\u52a0\u5230\u5df2\u5b58\u5728\u7684 chunk \u4e2d"}),"\n",(0,O.jsx)(n.li,{children:"Ingester \u78ba\u8a8d\u5beb\u5165\u64cd\u4f5c\u5b8c\u6210\uff0c\u5411 Distributor \u767c\u9001\u56de\u61c9"}),"\n",(0,O.jsx)(n.li,{children:"Distributor \u7b49\u5f85\u591a\u6578 (Quorum) Ingester \u7684\u5beb\u5165\u78ba\u8a8d"}),"\n",(0,O.jsx)(n.li,{children:"\u5beb\u5165\u64cd\u4f5c\u6210\u529f (\u5931\u6557) \u5f8c\uff0cDistributor \u5411\u5ba2\u6236\u7aef\u56de\u61c9\u64cd\u4f5c\u7d50\u679c"}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"\u7576\u8b80\u53d6\u8cc7\u6599\u6642\uff0c\u6d41\u7a0b\u5982\u4e0b :"}),"\n",(0,O.jsxs)(n.ol,{children:["\n",(0,O.jsx)(n.li,{children:"Query Frontend \u6536\u5230\u5305\u542b LogQL \u67e5\u8a62\u7684 HTTP GET \u8acb\u6c42"}),"\n",(0,O.jsx)(n.li,{children:"Query Frontend \u5c07\u67e5\u8a62\u5206\u89e3\u70ba\u591a\u500b\u5b50\u67e5\u8a62\uff0c\u4e26\u5c07\u9019\u4e9b\u5b50\u67e5\u8a62\u50b3\u905e\u7d66 Query Scheduler"}),"\n",(0,O.jsx)(n.li,{children:"Querier \u5f9e Query Scheduler \u4e2d\u63d0\u53d6\u5b50\u67e5\u8a62"}),"\n",(0,O.jsx)(n.li,{children:"Querier \u5c07\u5b50\u67e5\u8a62\u767c\u9001\u5230\u6240\u6709\u7684 Ingester\uff0c\u7528\u65bc\u8b80\u53d6\u8a18\u61b6\u9ad4\u4e2d\u7684\u6578\u64da"}),"\n",(0,O.jsx)(n.li,{children:"\u5982\u679c\u6709\u7684\u8a71\uff0cIngester \u6703\u5728\u8a18\u61b6\u9ad4\u4e2d\u67e5\u627e\u4e26\u8fd4\u56de\u76f8\u95dc\u6578\u64da"}),"\n",(0,O.jsx)(n.li,{children:"\u5982\u679c Ingester \u8fd4\u56de\u7684\u6578\u64da\u4e0d\u8db3\u6216\u6c92\u6709\u6578\u64da\uff0cQuerier \u6703\u5f9e\u5f8c\u7aef\u5b58\u5132\u4e2d\u5ef6\u9072\u52a0\u8f09\u76f8\u95dc\u6578\u64da\uff0c\u4e26\u5c0d\u5176\u57f7\u884c\u67e5\u8a62"}),"\n",(0,O.jsx)(n.li,{children:"Querier \u5c0d\u6240\u6709\u63a5\u6536\u5230\u7684\u6578\u64da\u9032\u884c\u8fed\u4ee3\u8207\u53bb\u91cd\u8655\u7406\uff0c\u751f\u6210\u5b50\u67e5\u8a62\u7684\u7d50\u679c"}),"\n",(0,O.jsx)(n.li,{children:"Query Frontend \u7b49\u5f85\u6240\u6709\u7684\u5b50\u67e5\u8a62\u5b8c\u6210\u4e26\u7531 Querier \u8fd4\u56de\u7d50\u679c"}),"\n",(0,O.jsx)(n.li,{children:"Query Frontend \u5c07\u6240\u6709\u5b50\u67e5\u8a62\u7684\u7d50\u679c\u5408\u4f75\uff0c\u4e26\u5c07\u7d50\u679c\u8fd4\u56de\u7d66\u5ba2\u6236\u7aef"}),"\n"]}),"\n",(0,O.jsx)(n.h3,{id:"storage",children:"Storage"}),"\n",(0,O.jsx)(n.p,{children:"\u524d\u9762\u63d0\u5230\uff0cLoki \u6700\u5927\u7684\u512a\u52e2\u5c31\u5728\u65bc\u5b83\u4f7f\u7528\u4e86 Object Storage (\u5982 GCS\u3001S3\u3001MinIO) \u4f86\u5b58\u5132\u65e5\u8a8c\uff0c\u6240\u6709\u7684\u8cc7\u6599\u90fd\u53ef\u4ee5\u88ab\u5206\u6210 index \u548c chunks \u5169\u90e8\u5206\u4f86\u5b58\u5132\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u5728 2.0 \u7248\u672c\u4e4b\u524d\uff0cLoki \u9700\u8981\u5c07 index \u548c chunks \u5206\u5225\u5132\u5b58\u5728\u4e0d\u540c\u7684\u5730\u65b9\uff0cindex \u5132\u5b58\u5728 NoSQL / key-value \u7684\u8cc7\u6599\u5eab\u4e2d\uff0cchunks \u5132\u5b58\u5728\u7269\u4ef6\u5b58\u5132\u4e2d\u3002\n\u5728 2.0 \u7248\u672c\u4e4b\u5f8c\uff0cLoki \u5f15\u9032\u4e86 index shipper \u4f86\u4f7f index \u4e5f\u80fd\u5920\u4ee5\u7269\u4ef6\u5b58\u5132\u7684\u5f62\u5f0f\u5132\u5b58\uff0c\u6e1b\u5c11\u4e86 Loki \u7684\u5c0d\u5916\u90e8\u670d\u52d9\u7684\u4f9d\u8cf4\uff0c\u4e00\u958b\u59cb\u63a1\u7528\u7684\u662f BoltDB\uff0c\u5728 2.8 \u7248\u672c\u4e4b\u5f8c\u6539\u70ba\u4f7f\u7528 tsdb"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.strong,{children:"Index"})," : \u7528\u65bc\u5b58\u5132\u65e5\u8a8c\u7684 metadata\uff0c\u4f8b\u5982\u65e5\u8a8c\u7684\u6a19\u7c64\u3001\u6642\u9593\u7b49\uff0c\u662f key-value \u7684\u5f62\u5f0f"]}),"\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.strong,{children:"Chunks"})," : \u7528\u65bc\u5b58\u5132\u65e5\u8a8c\u7684\u5167\u5bb9"]}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"\u4e0b\u5716\u5c55\u793a\u4e86 Loki \u5982\u4f55\u5132\u5b58 index \u548c chunks :"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Loki Storage",src:r(6477).A+"",width:"859",height:"531"})}),"\n",(0,O.jsx)(n.p,{children:"Loki \u6703\u5c07 label \u9032\u884c hash \u4f86\u751f\u6210\u552f\u4e00\u7684 stream ID\uff0c\u6240\u6709\u5177\u6709\u76f8\u540c stream ID \u7684 log line \u90fd\u6703\u88ab\u5b58\u5132\u5728\u540c\u4e00\u500b chunk \u4e2d\u3002\n\u7576 chunk \u88ab\u586b\u6eff\u6642\uff0cLoki \u6703\u5c07\u9019\u500b chunk \u58d3\u7e2e\u4e26\u4e0a\u50b3\u5230\u7269\u4ef6\u5b58\u5132\u4e2d\uff0c\u4e26\u4e14\u5728 index \u4e2d\u8a18\u9304\u4e00\u4e9b metadata \u8ddf\u8a72 chunk \u7684\u6642\u9593\u7bc4\u570d\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"multi-tenancy",children:"Multi-tenancy"}),"\n",(0,O.jsxs)(n.p,{children:["\u7576 Loki \u5728 Multi-tenancy \u6a21\u5f0f\u4e0b\u904b\u884c\u6642\uff0c\u8a18\u61b6\u9ad4\u548c\u7269\u4ef6\u5132\u5b58\u4e2d\u7684\u6240\u6709\u8cc7\u6599\u90fd\u53ef\u4ee5\u6309\u79df\u6236 ID \u9032\u884c\u5206\u5340\uff0c\u79df\u6236 ID \u6703\u4f9d\u64da\u8acb\u6c42\u4e2d\u7684 ",(0,O.jsx)(n.code,{children:"X-Scope-OrgID"})," HTTP header \u4f86\u6c7a\u5b9a\u3002\n\u7576 Loki \u4e0d\u8655\u65bc Multi-tenancy \u6a21\u5f0f\u6642\uff0cheader \u6703\u88ab\u5ffd\u7565\u4e14\u79df\u6236 ID \u5c07\u8a2d\u5b9a\u70ba fake\u3002"]}),"\n",(0,O.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,O.jsx)(n.h3,{id:"distributor",children:"Distributor"}),"\n",(0,O.jsx)(n.p,{children:"Distributor \u662f Loki \u7684\u5165\u53e3\uff0c\u5b83\u63a5\u6536\u4f86\u81ea\u641c\u96c6\u5668\u7684\u65e5\u8a8c\u4e26\u5c07\u5176\u5206\u767c\u7d66 Ingester\u3002\n\u7531\u65bc Distributor \u662f stateless \u7684\uff0c\u6240\u4ee5\u901a\u5e38\u6703\u5728 Distributor \u524d\u9762\u90e8\u5c6c\u4e00\u500b\u8ca0\u8f09\u5747\u8861\u5668\uff0c\u4ee5\u4fbf\u5c07\u6d41\u91cf\u5206\u767c\u5230\u591a\u500b Distributor \u4e0a\uff0c\u9019\u6a23\u505a\u53ef\u4ee5\u6700\u5927\u7a0b\u5ea6\u7684\u6e1b\u8f15 Ingester \u7684\u58d3\u529b\u4e26\u9632\u79a6 DDoS \u653b\u64ca\u3002"}),"\n",(0,O.jsx)(n.p,{children:"Distributor \u6709\u4ee5\u4e0b\u5e7e\u500b\u4e3b\u8981\u529f\u80fd :"}),"\n",(0,O.jsxs)(n.ol,{children:["\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Validate"}),"\n",(0,O.jsx)(n.p,{children:"\u78ba\u4fdd\u50b3\u5165\u7684\u683c\u5f0f\u7b26\u5408\u898f\u7bc4\uff0c\u50cf\u662f\u6aa2\u67e5\u6a19\u7c64\u662f\u5426\u6709\u6548\uff0c\u6642\u9593\u6233\u662f\u5426\u5408\u6cd5\u7b49"}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Preprocessing"}),"\n",(0,O.jsxs)(n.p,{children:["Distributor \u6703\u5c07\u6a19\u7c64\u9032\u884c\u6392\u5e8f\u65b9\u4fbf\u5f8c\u9762\u9032\u884c\u54c8\u5e0c\u904b\u7b97\uff0c\u4f8b\u5982\u5c07 ",(0,O.jsx)(n.code,{children:"c=b,a=b"})," \u8f49\u63db\u70ba ",(0,O.jsx)(n.code,{children:"a=b,c=b"})]}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Rate limiting"}),"\n",(0,O.jsx)(n.p,{children:"\u53ef\u4ee5\u5c0d\u6bcf\u500b\u4e0d\u540c\u7684\u79df\u6236\u9032\u884c\u9650\u6d41\uff0c\u4ee5\u9632\u6b62\u67d0\u500b\u79df\u6236\u7684\u65e5\u8a8c\u904e\u591a\u5c0e\u81f4\u7cfb\u7d71\u58d3\u529b\u904e\u5927"}),"\n",(0,O.jsx)(n.p,{children:"Loki \u5141\u8a31\u6211\u5011\u5728\u96c6\u7fa4\u7d1a\u5225\u9032\u884c\u9650\u6d41\uff0c\u6703\u6839\u64da\u7576\u524d Distributor \u7684\u6578\u91cf\u4f86\u8a08\u7b97\uff0c\u8209\u4f8b\u4f86\u8aaa\uff0c\u5047\u5982\u6709 10 \u500b Distributor \u4e14\u6211\u5011\u7684\u9650\u6d41\u70ba 10 MB/s\uff0c\u90a3\u9ebc\u6bcf\u500b Distributor \u7684\u9650\u6d41\u5c31\u662f 1 MB/s"}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Forwarding"}),"\n",(0,O.jsx)(n.p,{children:"\u4e00\u65e6\u65e5\u8a8c\u88ab\u9a57\u8b49\u4e26\u9810\u8655\u7406\uff0cDistributor \u5c31\u6703\u5c07\u65e5\u8a8c\u8f49\u767c\u7d66\u6307\u5b9a\u7684 Ingester"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Replication factor"}),"\n",(0,O.jsxs)(n.p,{children:["\u70ba\u4e86\u964d\u4f4e\u55ae\u500b Ingester \u53ef\u80fd\u907a\u5931\u8cc7\u6599\u7684\u98a8\u96aa\uff0cDistributor \u6703\u5c07\u5beb\u5165\u8cc7\u6599\u8f49\u767c\u5230\u591a\u500b Ingester\uff0c\u9019\u500b\u6578\u91cf\u7531 Loki \u7684\u8a2d\u5b9a\u6a94\u4e2d\u7684 ",(0,O.jsx)(n.code,{children:"replication_factor"})," \u6c7a\u5b9a\uff0c\u9810\u8a2d\u70ba 3"]}),"\n",(0,O.jsx)(n.p,{children:"Distributor \u6703\u900f\u904e ring \u4f86\u5224\u65b7\u76ee\u524d\u90a3\u4e9b Ingester \u662f\u6d3b\u8457\u7684\uff0c\u4e26\u5c07\u8cc7\u6599\u8f49\u767c\u7d66\u9019\u4e9b Ingester \u4e26\u7b49\u5f85\u56de\u61c9"}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"WAL (Write-Ahead Log)"}),"\n",(0,O.jsx)(n.p,{children:"\u9664\u4e86 Replication factor \u4e4b\u5916\uff0cIngester \u9084\u6703\u6709 Write-Ahead Log (WAL) \u4f86\u4fdd\u8b49\u5728\u91cd\u65b0\u555f\u52d5\u6642\u4e0d\u6703\u907a\u5931\u8cc7\u6599"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Hashing"}),"\n",(0,O.jsx)(n.p,{children:"Distributor \u6703\u5c07\u65e5\u8a8c\u6d41\u9032\u884c\u54c8\u5e0c\u904b\u7b97\uff0c\u4e26\u6839\u64da\u4e00\u81f4\u6027\u54c8\u5e0c\u74b0 (Consistent Hash Ring) \u7684\u8cc7\u8a0a\uff0c\u78ba\u8a8d\u6bcf\u500b\u6d41\u61c9\u88ab\u767c\u9001\u5230\u54ea\u500b Ingester"}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Quorum consistency"}),"\n",(0,O.jsx)(n.p,{children:"\u6240\u6709\u7684 Distributor \u90fd\u6703\u5171\u4eab\u540c\u4e00\u500b ring \u4ee5\u78ba\u4fdd\u5beb\u5165\u8acb\u6c42\u53ef\u4ee5\u88ab\u8def\u7531\u5230\u4efb\u4e00\u500b Ingester"}),"\n",(0,O.jsxs)(n.p,{children:["Loki \u4f7f\u7528\u4e86 dynamo-style quorum consistency \u4f86\u78ba\u4fdd\u5beb\u5165\u7684\u4e00\u81f4\u6027\uff0c\u9019\u610f\u5473\u8457\u81f3\u5c11\u9700\u8981 ",(0,O.jsx)(n.code,{children:"replication_factor / 2 + 1"})," \u500b Ingester \u56de\u61c9\u624d\u6703\u986f\u793a\u6210\u529f\uff0c\u5426\u5247\u6703\u91cd\u65b0\u9032\u884c\u5beb\u5165"]}),"\n"]}),"\n"]}),"\n",(0,O.jsx)(n.h3,{id:"ingester",children:"Ingester"}),"\n",(0,O.jsx)(n.p,{children:"Ingester \u662f Loki \u7684\u6838\u5fc3\uff0c\u5b83\u8ca0\u8cac\u63a5\u6536\u65e5\u8a8c\u4e26\u5c07\u5176\u5beb\u5165\u7269\u4ef6\u5b58\u5132\u4e2d\uff0c\u540c\u6642\u4e5f\u8ca0\u8cac\u5f9e\u8a18\u61b6\u9ad4\u4e2d\u8b80\u53d6\u65e5\u8a8c\u4e26\u63d0\u4f9b\u7d66 Querier \u9032\u884c\u67e5\u8a62\u3002"}),"\n",(0,O.jsx)(n.p,{children:"Ingester \u5305\u542b\u4e00\u500b\u751f\u547d\u7ba1\u7406\u5668 (Lifecycler)\uff0c\u7528\u65bc\u7ba1\u7406\u5728\u54c8\u5e0c\u74b0\u5167\u7684\u751f\u547d\u9031\u671f\uff0c\u5206\u5225\u70ba :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"PENDING : \u7576 Ingester \u555f\u52d5\u4e26\u5728\u7b49\u5f85\u4e00\u500b\u820a\u7684 Ingester \u505a handoff \u6642\u5c31\u6703\u8655\u65bc PENDING \u72c0\u614b (\u9700\u8981\u6ce8\u610f handoff \u9019\u500b\u6a5f\u5236\u5df2\u7d93\u68c4\u7528)"}),"\n",(0,O.jsx)(n.li,{children:"JOINING : \u7576 Ingester \u6b63\u5728\u5c07\u4ee4\u724c\u63d2\u5165\u5230\u54c8\u5e0c\u74b0\u4e2d\u6642\u5c31\u6703\u8655\u65bc JOINING \u72c0\u614b\uff0c\u6b64\u6642\u5df2\u7d93\u53ef\u4ee5\u63a5\u6536\u5beb\u5165\u8acb\u6c42"}),"\n",(0,O.jsx)(n.li,{children:"ACTIVE : \u5b8c\u6210\u521d\u59cb\u5316\u4e26\u958b\u59cb\u63a5\u6536\u8b80\u5beb\u8acb\u6c42\u6642\u5c31\u6703\u8655\u65bc ACTIVE \u72c0\u614b"}),"\n",(0,O.jsx)(n.li,{children:"LEAVING : \u7576 Ingester \u6e96\u5099\u96e2\u958b\u54c8\u5e0c\u74b0\u6642\u5c31\u6703\u8655\u65bc LEAVING \u72c0\u614b\uff0c\u6b64\u6642\u4f9d\u7136\u53ef\u4ee5\u8655\u7406\u8b80\u53d6\u8acb\u6c42\u4f86\u63d0\u4f9b\u8a18\u61b6\u9ad4\u4e2d\u7684\u8cc7\u6599"}),"\n",(0,O.jsx)(n.li,{children:"UNHEALTHY : \u7576 Ingester \u7121\u6cd5\u767c\u9001 heartbeat \u6642\u5c31\u6703\u8655\u65bc UNHEALTHY \u72c0\u614b"}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"Ingester \u63a5\u6536\u5230\u7684\u6bcf\u500b log stream \u6703\u88ab\u7d44\u7e54\u6210\u591a\u500b chunks \u5132\u5b58\u5728\u8a18\u61b6\u9ad4\u4e2d\uff0c\u4e26\u5728\u53ef\u914d\u7f6e\u7684\u6642\u9593\u5f8c flush \u5230\u7269\u4ef6\u5b58\u5132\u4e2d\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u5728\u4ee5\u4e0b\u7684\u60c5\u6cc1\u4e0b\uff0cchunk \u6703\u88ab\u6a19\u8a18\u6210 read-only \u4e26\u58d3\u7e2e :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"Chunk \u88ab\u5beb\u6eff"}),"\n",(0,O.jsx)(n.li,{children:"Chunk \u6709\u4e00\u6bb5\u6642\u9593\u6c92\u6709\u88ab\u5beb\u5165"}),"\n",(0,O.jsx)(n.li,{children:"\u767c\u751f flush"}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"\u6bcf\u7576\u6709 chunk \u88ab\u6a19\u8a18\u6210 read-only \u6642\uff0c\u5c31\u6703\u6709\u65b0\u7684 chunk \u88ab\u5275\u5efa\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u5982\u679c Ingester \u7a81\u7136\u5d29\u6f70\uff0c\u672a\u88ab\u5beb\u5165\u7269\u4ef6\u5b58\u5132\u4e2d\u7684 chunk \u6703\u88ab\u4e1f\u5931\uff0c\u56e0\u6b64 Loki \u901a\u5e38\u6703\u8a2d\u7f6e replica factor \u4e26\u4f7f\u7528 WAL \u4f86\u4fdd\u8b49\u5728 Ingester \u91cd\u555f\u6642\u4e0d\u6703\u907a\u5931\u8cc7\u6599\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u7576 Ingester \u8981\u5c07 chunk \u5beb\u5165\u7269\u4ef6\u5b58\u5132\u4e2d\u6642\uff0c\u6703\u4f9d\u64da\u79df\u6236 ID\u3001\u6a19\u7c64\u3001\u5167\u5bb9\u4f86\u8a08\u7b97\u4e00\u500b hash \u503c\uff0c\u8b93\u5f8c\u7aef\u4e0d\u9700\u8981\u91cd\u8986\u5132\u5b58\u76f8\u540c\u7684 chunk\uff0c\u4f46\u5982\u679c\u6709\u8cc7\u6599\u5beb\u5165\u5931\u6557\uff0c\u5247\u6703\u5728\u5f8c\u7aef\u5132\u5b58\u591a\u500b\u526f\u672c\uff0cQuerier \u6703\u5728\u67e5\u8a62\u6642\u9032\u884c\u53bb\u91cd\u3002"}),"\n",(0,O.jsxs)(n.p,{children:["Loki \u9810\u8a2d\u70ba\u63a5\u53d7\u7121\u5e8f\u7684\u65e5\u8a8c\uff0c\u4f46\u53ef\u4ee5\u900f\u904e\u8a2d\u5b9a ",(0,O.jsx)(n.code,{children:"unordered_writes"})," \u4f86\u63a5\u53d7\u6709\u5e8f\u7684\u65e5\u8a8c\uff0c\u5982\u679c\u8a2d\u7f6e\u6210\u6709\u5e8f\u7684\u8a71\uff0c\u5247\u6703\u5728 Distributor \u4e2d\u9032\u884c\u9a57\u8b49\u3002"]}),"\n",(0,O.jsx)(n.p,{children:"\u5c0d\u65bc\u76f8\u540c\u7d0d\u7c73\u7684 timestamp\uff0c\u5982\u679c\u5167\u5bb9\u5b8c\u5168\u76f8\u540c\uff0c\u5247 Loki \u6703\u5c07\u5176\u8996\u70ba\u91cd\u8907\u7684\u65e5\u8a8c\uff0c\u4e26\u4e14\u53ea\u6703\u5132\u5b58\u4e00\u4efd\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"query-frontend",children:"Query Frontend"}),"\n",(0,O.jsx)(n.p,{children:"Query Frontend \u662f\u4e00\u500b\u53ef\u9078\u7684\u7d44\u4ef6\uff0c\u53ef\u4ee5\u7528\u65bc\u52a0\u901f\u67e5\u8a62\u3002\u7576\u6709 Query Frontend \u6642\uff0c\u61c9\u8a72\u8981\u5c07\u67e5\u8a62\u7684\u6d41\u91cf\u5c0e\u5411\u5230 Query Frontend \u4e0a\uff0c\u518d\u7531 Query Frontend \u5c07\u67e5\u8a62\u5206\u767c\u7d66 Querier\u3002"}),"\n",(0,O.jsx)(n.p,{children:"Query Frontend \u662f\u4e00\u7a2e\u7121\u72c0\u614b\u7684\u7d44\u4ef6\uff0c\u5728\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\u53ea\u9700\u8981\u5169\u500b\u5c31\u8db3\u5920\u4e86\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f Query Frontend \u7684\u4e3b\u8981\u529f\u80fd :"}),"\n",(0,O.jsxs)(n.ol,{children:["\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Queueing"}),"\n",(0,O.jsx)(n.p,{children:"\u5373\u4f7f\u6c92\u6709\u7368\u7acb\u7684 Query Scheduler\uff0cQuery Frontend \u4e5f\u53ef\u4ee5\u5c07\u67e5\u8a62\u6392\u968a"}),"\n",(0,O.jsx)(n.p,{children:"\u6392\u968a\u529f\u80fd\u53ef\u4ee5\u5e36\u4f86\u4ee5\u4e0b\u7684\u597d\u8655 :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"\u9632\u6b62 Querier \u7684\u8a18\u61b6\u9ad4\u6ea2\u51fa (OOM) : \u5982\u679c\u767c\u751f\u4e86 OOM\uff0c\u4e5f\u53ef\u4ee5\u9032\u884c\u91cd\u8a66\uff0c\u63d0\u5347\u67e5\u8a62\u7684\u7a69\u5b9a\u6027\uff0c\u540c\u6642\u4e5f\u53ef\u4ee5\u964d\u4f4e\u8a18\u61b6\u9ad4\u7684\u9700\u6c42"}),"\n",(0,O.jsx)(n.li,{children:"\u8ca0\u8f09\u5747\u8861 : \u5c07\u5927\u578b\u67e5\u8a62\u5206\u6563\u5230\u591a\u500b Querier \u4e0a\uff0c\u907f\u514d\u55ae\u500b Querier \u88ab\u58d3\u57ae"}),"\n",(0,O.jsx)(n.li,{children:"\u79df\u6236\u7684\u516c\u5e73\u8abf\u5ea6 : \u53ef\u4ee5\u7528\u65bc\u9632\u6b62\u55ae\u4e00\u79df\u6236\u7684 DDoS \u5f71\u97ff\u5230\u5176\u4ed6\u79df\u6236"}),"\n"]}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Splitting"}),"\n",(0,O.jsx)(n.p,{children:"Query Frontend \u53ef\u4ee5\u5c07\u5927\u578b\u67e5\u8a62\u5206\u5272\u6210\u591a\u500b\u5b50\u67e5\u8a62\u4f86\u4e26\u884c\u8655\u7406\uff0c\u5728\u9032\u884c\u5408\u4f75\uff0c\u53ef\u4ee5\u907f\u514d\u55ae\u500b\u67e5\u8a62\u904e\u65bc\u9f90\u5927\u800c\u5c0e\u81f4 OOM"}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Caching"}),"\n",(0,O.jsx)(n.p,{children:"Query Frontend \u63d0\u4f9b\u4e86\u591a\u7a2e\u4e0d\u540c\u7684 cache \u7b56\u7565\uff0c\u7528\u65bc\u63d0\u5347\u67e5\u8a62\u7684\u901f\u5ea6 :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"Metric queries : \u53ef\u4ee5\u5feb\u53d6\u524d\u7aef\u7684 metric \u67e5\u8a62\u7d50\u679c\uff0c\u5982\u679c\u584a\u53d6\u7684\u7d50\u679c\u4e0d\u5b8c\u6574\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528\u5b50\u67e5\u8a62\u4f86\u88dc\u5168\u3002\u6b64\u5916\uff0c\u53ef\u4ee5\u9078\u64c7\u6027\u5730\u5c07\u67e5\u8a62\u8207 step \u53c3\u6578\u5c0d\u9f4a\uff0c\u4ee5\u63d0\u9ad8 cache \u7684\u547d\u4e2d\u7387\uff0c\u4e26\u5c07\u7d50\u679c\u5feb\u53d6\u5230 redis \u6216 memory \u4e2d\u3002"}),"\n",(0,O.jsx)(n.li,{children:"Log queries : \u5c0d\u65bc log query\uff0cQuery Frontend \u4f7f\u7528 negative cache \u4f86\u8a18\u9304\u7a7a\u7684\u6642\u9593\u6bb5"}),"\n",(0,O.jsx)(n.li,{children:"Index stats queries (\u7d22\u5f15\u7d71\u8a08\u67e5\u8a62) : \u4e3b\u8981\u7528\u65bc Loki \u5167\u90e8\uff0c\u985e\u4f3c Metric queries\uff0c\u53ea\u80fd\u5728 single store \u7684 tsdb \u4e2d\u4f7f\u7528"}),"\n",(0,O.jsx)(n.li,{children:"Log volume queries (\u65e5\u8a8c\u91cf\u67e5\u8a62) : \u4e3b\u8981\u7528\u65bc Loki \u5167\u90e8\uff0c\u985e\u4f3c Metric queries\uff0c\u53ea\u80fd\u5728 single store \u7684 tsdb \u4e2d\u4f7f\u7528"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,O.jsx)(n.h3,{id:"query-scheduler",children:"Query Scheduler"}),"\n",(0,O.jsx)(n.p,{children:"Query Scheduler \u662f Loki \u7684\u4e00\u500b\u53ef\u9078\u7d44\u4ef6\uff0c\u63d0\u4f9b\u6bd4 Querier Frontend \u66f4\u9032\u968e\u7684\u6392\u968a\u529f\u80fd\uff0c\u5982\u968e\u5c64\u5f0f\u7684\u968a\u5217\u3002"}),"\n",(0,O.jsxs)(n.p,{children:["\u53ef\u4ee5\u53c3\u8003 ",(0,O.jsx)(n.a,{href:"https://grafana.com/docs/loki/latest/operations/query-fairness/",children:"advanced queuing functionality"}),"\u3002"]}),"\n",(0,O.jsx)(n.h3,{id:"querier",children:"Querier"}),"\n",(0,O.jsx)(n.p,{children:"Querier \u8ca0\u8cac\u5be6\u969b\u57f7\u884c LogQL \u67e5\u8a62\uff0c\u5b83\u6703\u5f9e Ingester \u8ddf Object Storage \u4e2d\u8b80\u53d6\u8cc7\u6599\uff0c\u4e26\u5c07\u7d50\u679c\u8fd4\u56de\u7d66 Query Frontend\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u7531\u65bc replication_factor \u7684\u5b58\u5728\uff0c\u6709\u6642\u5019 Querier \u6703\u6536\u5230\u91cd\u8986\u7684\u8cc7\u6599\uff0c\u56e0\u6b64 Loki \u6703\u5728 Querier \u4e2d\u9032\u884c\u53bb\u91cd\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"index-gateway",children:"Index Gateway"}),"\n",(0,O.jsx)(n.p,{children:"Index Gateway \u8ca0\u8cac\u8655\u7406\u6709\u95dc\u65bc metadata \u7684\u67e5\u8a62\uff0c\u4f8b\u5982 label names \u7b49\u7b49\u7684\u67e5\u8a62\u3002"}),"\n",(0,O.jsx)(n.p,{children:"Query Frontend \u6703\u8ddf Index Gateway \u67e5\u8a62\u65e5\u8a8c\u91cf\uff0c\u4ee5\u4fbf\u6c7a\u5b9a\u8a72\u7528\u751a\u9ebc\u65b9\u6cd5\u9032\u884c\u67e5\u8a62\u5206\u7247\u3002\nQuerier \u5247\u6703\u5411 Index Gateway \u67e5\u8a62 chunks \u7684\u5f15\u7528\uff0c\u4ee5\u4fbf\u77e5\u9053\u8981\u67e5\u8a62\u54ea\u4e9b chunks\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"compactor",children:"Compactor"}),"\n",(0,O.jsx)(n.p,{children:"Compactor \u6703\u5b9a\u671f\u904b\u884c\uff0c\u5f9e\u7269\u4ef6\u5b58\u5132\u4e2d\u8b80\u53d6 tsdb \u6a94\u6848\u9032\u884c\u5408\u4f75\u5f8c\u518d\u5beb\u56de\u7269\u4ef6\u5b58\u5132\u4e2d\uff0c\u6b64\u5916\uff0cCompactor \u4e5f\u8ca0\u8cac\u65e5\u8a8c\u7684\u4fdd\u7559\u8ddf\u522a\u9664\u529f\u80fd\uff0c\u901a\u5e38\u6703\u4f7f\u7528\u55ae\u4e00\u7684\u5be6\u4f8b\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"ruler",children:"Ruler"}),"\n",(0,O.jsx)(n.p,{children:"\u53ef\u4ee5\u5728\u7269\u4ef6\u5b58\u5132\u4e2d\u8a2d\u5b9a\u544a\u8b66\u898f\u5247\uff0cRuler \u6703\u5b9a\u671f\u6aa2\u67e5\u9019\u4e9b\u898f\u5247\u4e26\u767c\u9001\u544a\u8b66\uff0c\u4e5f\u53ef\u4ee5\u5c07\u9019\u4e9b\u898f\u5247\u59d4\u8a17\u7d66 Query Frontend \u4f86\u57f7\u884c\uff0c\u9019\u7a2e\u6a21\u5f0f\u7a31\u70ba Remote Rule Evaluation\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"other-components",children:"Other Components"}),"\n",(0,O.jsx)(n.p,{children:"\u9664\u4e86\u4e4b\u5916\uff0c\u76ee\u524d\u4e5f\u6709\u4e00\u4e9b\u57fa\u65bc\u5e03\u9686\u904e\u6ffe\u5668 (Bloom filter) \u7684\u7d44\u4ef6\u5728\u7b46\u8005\u5beb\u9019\u7bc7\u6587\u7ae0\u6642\u9084\u5728\u8655\u5728\u5be6\u9a57\u6027\u7684\u968e\u6bb5\uff0c\u4f8b\u5982 :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"Bloom Planner"}),"\n",(0,O.jsx)(n.li,{children:"Bloom Builder"}),"\n",(0,O.jsx)(n.li,{children:"Bloom Gateway"}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"\u9019\u4e09\u500b\u7d44\u4ef6\u65e8\u5728\u5229\u7528\u5e03\u9686\u904e\u6ffe\u5668\u4f86\u52a0\u901f chunk \u7684\u67e5\u8a62\uff0c\u5feb\u901f\u904e\u6ffe\u6389\u90a3\u4e9b\u4e0d\u53ef\u80fd\u7b26\u5408\u689d\u4ef6\u7684 chunk\u3002"}),"\n",(0,O.jsx)(n.h2,{id:"deployment-mode",children:"Deployment Mode"}),"\n",(0,O.jsx)(n.p,{children:"\u5982\u524d\u6240\u8ff0\uff0cLoki \u662f\u4e00\u500b\u6709\u5f88\u591a\u5fae\u670d\u52d9\u7d44\u6210\u7684\u5206\u6563\u5f0f\u7cfb\u7d71\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u64da\u4e0d\u540c\u7684\u9700\u6c42\u4f86\u90e8\u7f72\u4e0d\u540c\u7684\u6a21\u5f0f\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"monolithic-mode",children:"Monolithic mode"}),"\n",(0,O.jsx)(n.p,{children:"\u6700\u7c21\u55ae\u7684\u90e8\u5c6c\u65b9\u6cd5\u5c31\u662f\u55ae\u9ad4\u90e8\u5c6c\u6a21\u5f0f\uff0c\u5c07\u6240\u6709\u7684\u7d44\u4ef6\u90fd\u90e8\u5c6c\u5728\u540c\u4e00\u500b\u7bc0\u9ede\u4e0a\uff0c\u5c0d\u65bc 20GB/day \u5de6\u53f3\u7684\u65e5\u8a8c\u91cf\u4f86\u8aaa\uff0c\u9019\u6a23\u7684\u90e8\u5c6c\u65b9\u5f0f\u662f\u8db3\u5920\u7684\u3002"}),"\n",(0,O.jsxs)(n.p,{children:["\u9019\u7a2e\u65b9\u5f0f\u540c\u6a23\u4e5f\u53ef\u4ee5\u505a\u6c34\u5e73\u64f4\u5c55\uff0c\u53ea\u9700\u8981\u5728\u8a2d\u5b9a\u6a94\u4e2d\u8a2d\u5b9a ",(0,O.jsx)(n.code,{children:"ring"})," \u548c ",(0,O.jsx)(n.code,{children:"memberlist_config"})," \u5c31\u53ef\u4ee5\u4e86\u3002"]}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Monolithic mode",src:r(74710).A+"",width:"618",height:"606"})}),"\n",(0,O.jsx)(n.h3,{id:"simple-scalable-mode",children:"Simple scalable mode"}),"\n",(0,O.jsx)(n.p,{children:"\u9019\u7a2e\u6a21\u5f0f\u662f Helm Chart \u9810\u8a2d\u7684\u90e8\u5c6c\u65b9\u5f0f\uff0c\u5c07\u7d44\u5efa\u5206\u6210\u8b80\u53d6\u3001\u5beb\u5165\u3001\u5f8c\u7aef\u4e09\u500b\u90e8\u5206\uff0c\u4e26\u4f7f\u7528 Nginx \u4f5c\u70ba\u53cd\u5411\u4ee3\u7406\u4f86\u5206\u958b\u8f49\u767c\u8b80\u5beb\u8acb\u6c42\uff0c\u5c0d\u65bc TB \u7d1a\u5225\u7684\u65e5\u8a8c\u91cf\u4f86\u8aaa\uff0c\u9019\u6a23\u7684\u90e8\u5c6c\u65b9\u5f0f\u662f\u8db3\u5920\u7684\u3002"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.code,{children:"target=write"})," : Distributor\u3001Ingester\uff0c\u662f\u6709\u72c0\u614b\u7684\uff0c\u7531 k8s statefulset \u63a7\u5236"]}),"\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.code,{children:"target=read"})," : Querier\u3001Query Frontend\uff0c\u662f\u7121\u72c0\u614b\u7684\uff0c\u7531 k8s deployment \u63a7\u5236"]}),"\n",(0,O.jsxs)(n.li,{children:[(0,O.jsx)(n.code,{children:"target=backend"})," : Compactor\u3001Ruler\u3001Index Gateway\u3001Query Scheduler\uff0c\u662f\u6709\u72c0\u614b\u7684\uff0c\u7531 k8s statefulset \u63a7\u5236"]}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Simple scalable mode",src:r(28511).A+"",width:"971",height:"725"})}),"\n",(0,O.jsx)(n.h3,{id:"microservices-mode",children:"Microservices mode"}),"\n",(0,O.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u9078\u64c7\u5c07\u5168\u90e8\u7684\u7d44\u4ef6\u90fd\u5206\u958b\u90e8\u7f72\u4ee5\u63d0\u4f9b\u6700\u597d\u7684\u64f4\u5c55\u6027\uff0c\u4f46\u540c\u6642\u4e5f\u6703\u589e\u52a0\u90e8\u7f72\u7684\u8907\u96dc\u5ea6\u3002"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Microservices mode",src:r(81448).A+"",width:"956",height:"667"})}),"\n",(0,O.jsx)(n.h2,{id:"label",children:"Label"}),"\n",(0,O.jsx)(n.p,{children:"Labels \u5c0d\u65bc Loki \u4f86\u8aaa\u662f\u4e00\u500b\u975e\u5e38\u91cd\u8981\u7684\u7d44\u4ef6\uff0c\u5b83\u4e0d\u50c5\u53ef\u4ee5\u7528\u65bc\u7576 sharding key \u4f86\u6c7a\u5b9a\u65e5\u8a8c\u7684\u5b58\u5132\u4f4d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u7528\u65bc\u67e5\u8a62\u6642\u7684\u904e\u6ffe\uff0c\u56e0\u6b64\u6b63\u78ba\u7684\u4f7f\u7528 label \u53ef\u4ee5\u986f\u8457\u63d0\u9ad8 Loki \u7684\u6548\u80fd\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"label-best-practices",children:"Label Best Practices"}),"\n",(0,O.jsx)(n.p,{children:"\u63a5\u4e0b\u4f86\u6703\u900f\u904e\u4e00\u500b\u4f8b\u5b50\u4f86\u8aaa\u660e\u5982\u4f55\u6b63\u78ba\u5730\u4f7f\u7528 label \u4f86\u63d0\u9ad8 Loki \u7684\u6548\u80fd\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u9996\u5148\u6211\u5011\u53ef\u4ee5\u7c21\u55ae\u7684\u5206\u914d\u4e00\u500b label \u4f86\u8868\u793a host\uff0c\u4f8b\u5982 :"}),"\n",(0,O.jsx)(n.pre,{children:(0,O.jsx)(n.code,{children:'{host="rook"}\n'})}),"\n",(0,O.jsx)(n.p,{children:"\u9019\u6642\u5019 Loki \u5c31\u6703\u57fa\u65bc\u9019\u500b label \u4f86\u5efa\u7acb stream\uff0c\u5728\u56fa\u5b9a\u7684\u6642\u9593\u9593\u9694\u5f8c\uff0cLoki \u6703\u5c07\u9019\u4e9b stream \u58d3\u7e2e\u6210 chunks \u4e26\u4e0a\u50b3\u5230\u7269\u4ef6\u5b58\u5132\u4e2d\u3002"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Label",src:r(53730).A+"",width:"960",height:"640"})}),"\n",(0,O.jsx)(n.p,{children:"\u5728 rook \u9019\u500b host \u4e0a\uff0c\u6211\u5011\u53ef\u80fd\u540c\u6642\u904b\u884c\u4e86\u5f88\u591a\u500b service\uff0c\u4f7f\u7528\u8005\u76ee\u524d\u7121\u6cd5\u900f\u904e\u65e5\u8a8c\u77e5\u9053\u9019\u689d log \u4f86\u81ea\u65bc\u54ea\u500b\u7cfb\u7d71\uff0c\u56e0\u6b64\u6c7a\u5b9a\u53ef\u4ee5\u518d\u52a0\u4e0a\u4e00\u500b label \u4f86\u8868\u793a\u670d\u52d9\u540d\u7a31\uff0c\u4f8b\u5982 :"}),"\n",(0,O.jsx)(n.pre,{children:(0,O.jsx)(n.code,{children:"{host=\u201drook\u201d, app=\u201dwebserver\u201d}\n{host=\u201drook\u201d, app=\u201dftp\u201d}\n{host=\u201drook\u201d, app=\u201dmiddleware\u201d}\n"})}),"\n",(0,O.jsx)(n.p,{children:"\u65bc\u662f\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u4f7f\u7528 app \u4f86\u67e5\u8a62\u4e86"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Label",src:r(28701).A+"",width:"960",height:"640"})}),"\n",(0,O.jsx)(n.p,{children:"\u63a5\u8457\u4f7f\u7528\u8005\u53c8\u9047\u5230\u4e86\u65b0\u7684\u554f\u984c\uff0c\u6211\u60f3\u8981\u67e5\u8a62\u6bcf\u7b46\u8a02\u55ae\u7684\u65e5\u8a8c\uff0c\u4f46\u662f Loki \u4e26\u6c92\u6709\u8fa6\u6cd5\u76f4\u63a5\u67e5\u8a62\u5230\u9019\u4e9b\u65e5\u8a8c\uff0c\u56e0\u6b64\u6c7a\u5b9a\u518d\u65b0\u589e\u4e00\u500b label \u4f86\u8868\u793a\u8a02\u55ae ID\uff0c\u4f8b\u5982 :"}),"\n",(0,O.jsx)(n.pre,{children:(0,O.jsx)(n.code,{children:"{host=\u201drook\u201d, app=\u201dwebserver\u201d, order_id=\u201d123\u201d}\n{host=\u201drook\u201d, app=\u201dwebserver\u201d, order_id=\u201d456\u201d}\n{host=\u201drook\u201d, app=\u201dwebserver\u201d, order_id=\u201d789\u201d}\n"})}),"\n",(0,O.jsx)(n.p,{children:"\u9019\u6642\u5019\u5c31\u9047\u5230\u554f\u984c\u4e86\uff0c\u6bcf\u7b46 log \u90fd\u88ab\u5132\u5b58\u5728 short-lived \u7684 stream \u4e2d\uff0c\u7576\u6bcf\u500b stream \u90fd\u88ab\u5beb\u6210\u7368\u7acb\u7684\u6587\u4ef6\u6642\uff0c\u5c31\u6703\u7522\u751f\u975e\u5e38\u591a\u5360\u7528\u7a7a\u9593\u7684\u5c0f\u6a94\u6848\uff0c\u964d\u4f4e\u4e86 Loki \u7684\u6548\u80fd\u3002"}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Label",src:r(57380).A+"",width:"960",height:"640"})}),"\n",(0,O.jsx)(n.p,{children:"\u56e0\u6b64\uff0c\u8207\u5176\u5b83\u7684\u65e5\u8a8c\u7cfb\u7d71\u76f8\u6bd4\uff0c\u6211\u5011\u9700\u8981\u5728 label \u7684\u8a2d\u8a08\u4e0a\u6709\u4e0d\u540c\u7684\u601d\u8003\u65b9\u5f0f\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b Loki \u7684 label \u8a2d\u8a08\u539f\u5247 :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"Describe infrastructure : \u4f8b\u5982 region\u3001zone\u3001host\u3001cluster\u3001namespace\u3001environment \u7b49\u7b49"}),"\n",(0,O.jsx)(n.li,{children:"Long-lived : \u9019\u4e9b\u6a19\u7c64\u61c9\u8a72\u9577\u671f\u5b58\u5728"}),"\n",(0,O.jsxs)(n.li,{children:["Intuitive : \u6a19\u7c64\u61c9\u8a72\u662f\u76f4\u89c0\u7684\uff0c\u4f8b\u5982 ",(0,O.jsx)(n.code,{children:"app"}),"\u3001",(0,O.jsx)(n.code,{children:"service"}),"\u3001",(0,O.jsx)(n.code,{children:"component"})," \u7b49\u7b49"]}),"\n"]}),"\n",(0,O.jsx)(n.h3,{id:"automatic-stream-sharding",children:"Automatic Stream Sharding"}),"\n",(0,O.jsx)(n.p,{children:"\u540c\u6642\uff0c\u70ba\u4e86\u9632\u6b62\u540c\u4e00\u500b stream \u7684\u6d41\u91cf\u592a\u591a\u5c0e\u81f4\u6240\u6709\u7684\u65e5\u8a8c\u90fd\u88ab\u5206\u767c\u5230\u540c\u4e00\u500b Ingester \u4e2d\uff0cLoki \u4e5f\u5f15\u5165\u4e86 automatic stream sharding \u6a5f\u5236\uff0c\u9019\u6a23\u53ef\u4ee5\u8b93 Loki \u5728\u5beb\u5165\u6642\u81ea\u52d5\u5c07\u6d41\u91cf\u5206\u767c\u5230\u4e0d\u540c\u7684 Ingester \u4e2d\u3002"}),"\n",(0,O.jsxs)(n.p,{children:[(0,O.jsx)(n.img,{alt:"Label",src:r(83191).A+"",width:"960",height:"640"}),"\n",(0,O.jsx)(n.img,{alt:"Label",src:r(36382).A+"",width:"960",height:"640"})]}),"\n",(0,O.jsx)(n.h3,{id:"structure-metadata",children:"Structure Metadata"}),"\n",(0,O.jsx)(n.p,{children:"\u5728\u9019\u6a23\u7684 label \u8a2d\u8a08\u4e0b\u6709\u53ef\u80fd\u6703\u7522\u751f\u4e00\u4e9b\u554f\u984c\uff0c\u4f8b\u5982\u6211\u5011\u60f3\u8981\u641c\u5c0b\u67d0\u500b Pod \u7684 ID\uff0c\u4f46\u662f\u7531\u65bc\u9019\u500b\u503c\u662f\u4e00\u500b\u9ad8\u57fa\u6578\u7684 label\uff0c\u56e0\u6b64\u6211\u5011\u4e0d\u78ba\u5b9a\u662f\u4e0d\u662f\u61c9\u8a72\u628a\u9019\u500b\u503c\u653e\u5728 label \u4e2d\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u5728\u65b0\u7248\u7684 Loki \u4e2d\uff0cLoki \u5f15\u5165\u4e86 structured metadata \u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u5c07 key-value \u7684\u503c\u5132\u5b58\u5728\u65e5\u8a8c\u884c\u7684\u65c1\u908a\u800c\u4e0d\u662f\u5b58\u5728 label \u4e2d\uff0c\u9019\u6a23\u5c31\u53ef\u4ee5\u907f\u514d\u7522\u751f\u9ad8\u57fa\u6578\u7684 label \u4e26\u4e14\u53ef\u4ee5\u66f4\u5feb\u7684\u67e5\u8a62\u5230\u9019\u4e9b\u8cc7\u6599\u3002"}),"\n",(0,O.jsx)(n.h3,{id:"bloom-filter",children:"Bloom Filter"}),"\n",(0,O.jsx)(n.p,{children:"\u90a3\u9ebc\u5982\u679c\u6211\u60f3\u5728 Loki \u4e2d\u641c\u5c0b\u552f\u4e00\u7684 ID \u6642\u61c9\u8a72\u600e\u9ebc\u8fa6\u5462?"}),"\n",(0,O.jsxs)(n.p,{children:["\u8209\u4f8b\u4f86\u8aaa\uff0c\u6211\u53ef\u80fd\u6703\u60f3\u505a\u4ee5\u4e0b\u7684\u641c\u5c0b ",(0,O.jsx)(n.code,{children:"{env=\u201dprod\u201d} |= \u201c603e0dcf-9b24-4c37-8f0d-6d8ebe5c5c8a\u201d"})]}),"\n",(0,O.jsx)(n.p,{children:"Loki \u6703\u63a1\u7528\u5927\u91cf\u5e73\u884c\u5316\u7684\u65b9\u5f0f\u4f86\u8655\u7406\u9019\u500b\u554f\u984c\uff0c\u540c\u6642\u4f7f\u7528 Bloom filter \u642d\u914d n-gram \u4f86\u9032\u884c\u904e\u6ffe\u3002"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"Bloom filter : \u4e00\u7a2e\u6a5f\u7387\u578b\u8cc7\u6599\u7d50\u69cb\uff0c\u7528\u65bc\u5feb\u901f\u6aa2\u67e5\u4e00\u500b\u5143\u7d20\u662f\u5426\u5728\u4e00\u500b\u96c6\u5408\u4e2d\uff0c\u7a7a\u9593\u6548\u7387\u975e\u5e38\u9ad8"}),"\n",(0,O.jsx)(n.li,{children:"n-gram : \u4e00\u7a2e\u5c07\u5b57\u4e32\u62c6\u5206\u6210 n \u500b\u9023\u7e8c\u7684\u5b50\u5b57\u4e32\u7684\u65b9\u6cd5\uff0c\u9019\u6a23\u505a\u7684\u539f\u56e0\u662f\u53ef\u4ee5\u63d0\u9ad8\u5f48\u6027\u8207\u5bb9\u932f\uff0c\u540c\u6642\u53ef\u4ee5\u8b93\u6211\u5011\u6355\u6349\u5230 schemaless \u7684 log"}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:(0,O.jsx)(n.img,{alt:"Label",src:r(61965).A+"",width:"900",height:"584"})}),"\n",(0,O.jsx)(n.p,{children:"\u6211\u5011\u53ef\u4ee5\u5f9e\u4e0a\u5716\u4e2d\u770b\u5230\u5169\u500b\u95dc\u9375\u7684\u7d44\u4ef6\uff0c\u5206\u5225\u662f Bloom Compactor \u8ddf Bloom Gateway\u3002"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Bloom Compactor :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"\u8ca0\u8cac\u5728 Loki \u7684\u7269\u4ef6\u5132\u5b58\u4e2d\u7684\u65e5\u8a8c\u5340\u584a (chunks) \u5efa\u7acb Bloom filter"}),"\n",(0,O.jsx)(n.li,{children:"\u91dd\u5c0d\u6bcf\u500b\u65e5\u8a8c\u5e8f\u5217 (series\uff0c\u985e\u4f3c\u65bc stream id) \u5efa\u7acb Bloom filter"}),"\n",(0,O.jsx)(n.li,{children:"\u5f9e\u6bcf\u500b\u65e5\u8a8c\u5e8f\u5217\u7684\u6bcf\u500b\u65e5\u8a8c\u884c\u4e2d\u63d0\u53d6 n-grams"}),"\n",(0,O.jsx)(n.li,{children:"\u5c07\u6bcf\u500b n-gram \u7684\u96dc\u6e4a\u503c \u4ee5\u53ca (n-gram + chunk ID) \u7684\u96dc\u6e4a\u503c \u52a0\u5165\u5230\u5c0d\u61c9\u65e5\u8a8c\u5e8f\u5217\u7684 Bloom filter \u4e2d"}),"\n",(0,O.jsx)(n.li,{children:"\u5c07 Bloom filter \u805a\u5408\u5230\u5340\u584a\u6a94\u6848 (block files) \u4e2d\uff0c\u4e26\u7522\u751f\u5143\u6578\u64da\u6a94\u6848 (metadata files) \u8a18\u9304 Bloom \u5340\u584a\u548c\u5c0d\u61c9\u7684 TSDB \u7d22\u5f15\u6a94\u6848\u7684\u95dc\u806f"}),"\n"]}),"\n"]}),"\n",(0,O.jsxs)(n.li,{children:["\n",(0,O.jsx)(n.p,{children:"Bloom Gateway :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"\u63a5\u6536\u4f86\u81ea Index Gateway \u7684\u5340\u584a\u904e\u6ffe\u8acb\u6c42"}),"\n",(0,O.jsx)(n.li,{children:"\u6839\u64da\u67e5\u8a62\u7684\u904e\u6ffe\u8868\u9054\u5f0f\uff0c\u63d0\u53d6 n-grams"}),"\n",(0,O.jsx)(n.li,{children:"\u4f7f\u7528\u9019\u4e9b n-grams \u67e5\u8a62 Bloom filter\uff0c\u5224\u65b7\u54ea\u4e9b\u65e5\u8a8c\u5340\u584a \u53ef\u80fd \u5305\u542b\u7b26\u5408\u904e\u6ffe\u689d\u4ef6\u7684\u65e5\u8a8c"}),"\n",(0,O.jsx)(n.li,{children:"\u904e\u6ffe\u6389\u88ab Bloom filter \u5224\u65b7\u70ba\u80af\u5b9a\u4e0d\u7b26\u5408\u7684\u5340\u584a\uff0c\u53ea\u5c07\u53ef\u80fd\u7b26\u5408\u7684\u5340\u584a\u9001\u7d66\u5f8c\u7e8c\u7684\u67e5\u8a62\u5f15\u64ce\u9032\u884c\u8a73\u7d30\u6383\u63cf"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,O.jsx)(n.p,{children:"\u900f\u904e\u4e0a\u9762\u9019\u5169\u7a2e\u65b9\u5f0f\uff0cLoki \u53ef\u4ee5\u5728\u4e0d\u589e\u52a0\u984d\u5916\u7684\u8cc7\u6e90\u7684\u60c5\u6cc1\u4e0b\uff0c\u63d0\u9ad8\u67e5\u8a62\u7684\u6548\u80fd\u3002"}),"\n",(0,O.jsx)(n.p,{children:"\u4f46\u662f\uff0c\u4e26\u4e0d\u662f\u6bcf\u7a2e LogQL \u90fd\u80fd\u53d7\u76ca\u65bc Bloom filter\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u53ef\u4ee5\u4f7f\u7528\u8ddf\u4e0d\u80fd\u4f7f\u7528 Bloom filter \u7684\u4f8b\u5b50 :"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:"\u67e5\u8a62\u61c9\u8a72\u5305\u542b\u81f3\u5c11\u4e00\u7a2e\u904e\u6ffe\u5f0f"}),"\n"]}),"\n",(0,O.jsx)(n.pre,{children:(0,O.jsx)(n.code,{children:'# \u4f7f\u7528\u5e03\u9686\u904e\u6ffe\u5668\n\n{host="rook", app="webserver"} |= "order=17863472" | logfmt\n'})}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsxs)(n.li,{children:["\u4f7f\u7528\u4e86 ",(0,O.jsx)(n.code,{children:"!="})," \u6216 ",(0,O.jsx)(n.code,{children:"!~"})," \u7684\u904e\u6ffe\u5f0f\u4ee5\u53ca\u5728 format \u4e4b\u5f8c\u7684\u904e\u6ffe\u5f0f\u4e0d\u6703\u4f7f\u7528\u5e03\u9686\u904e\u6ffe\u5668"]}),"\n"]}),"\n",(0,O.jsx)(n.pre,{children:(0,O.jsx)(n.code,{children:'# \u4e0d\u4f7f\u7528\u5e03\u9686\u904e\u6ffe\u5668\n\n{host="rook", app="webserver"} != "debug"\n{host="rook", app="webserver"} !~ "(staging|dev)"\n'})}),"\n",(0,O.jsx)(n.pre,{children:(0,O.jsx)(n.code,{children:'# `level="error"` \u4f7f\u7528\u5e03\u9686\u904e\u6ffe\u5668\n\n# `traceID="3ksn8d4jj3"` \u4e0d\u4f7f\u7528\u5e03\u9686\u904e\u6ffe\u5668\n\n{host="rook", app="webserver"}\n|= `level="error"`\n| logfmt\n| line_format \u201cERROR {{.err}}\u201d\n|= `traceID=\u201c3ksn8d4jj3\u201d`\n'})}),"\n",(0,O.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,O.jsxs)(n.ul,{children:["\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/oss/loki/",children:"Grafana Loki"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/go/webinar/getting-started-with-logging-and-grafana-loki/?pg=docs-loki-latest&plcmt=related",children:"How to get started with logging using Grafana Loki"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://taisho6339.gitbook.io/grafana-loki-deep-dive",children:"Grafana Loki Deep Dive"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://ithelp.ithome.com.tw/articles/10335935",children:"\u53ef\u89c0\u6e2c\u6027\u5b87\u5b99\u7684\u7b2c\u4e8c\u5341\u4e8c\u5929 - Grafana Loki \u4ecb\u7d39 - \u6027\u50f9\u6bd4\u7684\u738b\u8005"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/blog/2018/12/12/loki-prometheus-inspired-open-source-logging-for-cloud-natives/",children:"Loki: Prometheus-inspired, open source logging for cloud natives"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/blog/2023/12/11/open-source-log-monitoring-the-concise-guide-to-grafana-loki/",children:"Open source log monitoring: The concise guide to Grafana Loki"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://www.youtube.com/watch?v=_hv4i84Z68s",children:"All the Components of Loki Explained | Grafana Labs"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/blog/2024/05/29/grafana-loki-query-acceleration-how-we-sped-up-queries-without-adding-resources/",children:"Grafana Loki query acceleration: How we sped up queries without adding resources"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://medium.com/@jieshiun/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0-grafana-loki-%E5%BE%9E%E5%85%A5%E9%96%80%E5%88%B0%E7%B2%BE%E9%80%9A-feab84c209f0",children:"\u624b\u628a\u624b\u6559\u4f60 Grafana Loki : \u5f9e\u5165\u9580\u5230\u7cbe\u901a"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://medium.com/@NeroHin/devops-grafana-loki-promtail-logging-system-%E5%B0%8F%E8%A9%A6%E7%89%9B%E5%88%80-b922ba8ed0d8",children:"\u3010DevOps\u3011Grafana + Loki + Promtail Logging system \u5c0f\u8a66\u725b\u5200"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://www.qikqiak.com/post/grafana-loki-usage/",children:"Grafana Loki \u7b80\u660e\u6559\u7a0b"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://juejin.cn/post/7196699593836937276",children:"Grafana \u7cfb\u5217\u6587\u7ae0\uff08\u4e5d\uff09\uff1a\u5f00\u6e90\u4e91\u539f\u751f\u65e5\u5fd7\u89e3\u51b3\u65b9\u6848 Loki \u7b80\u4ecb"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://juejin.cn/post/7197239663102705724",children:"Grafana \u7cfb\u5217\u6587\u7ae0\uff08\u5341\uff09\uff1a\u4e3a\u4ec0\u4e48\u5e94\u8be5\u4f7f\u7528 Loki"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/blog/2022/05/16/all-things-logs-best-practices-for-logging-and-grafana-loki/",children:"All things logs: best practices for logging and Grafana Loki"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://vik-y.medium.com/why-you-should-consider-loki-as-an-alternative-to-elasticsearch-ae3fad99ab9a",children:"Why You Should Consider Loki as an Alternative to Elasticsearch!"})}),"\n",(0,O.jsx)(n.li,{children:(0,O.jsx)(n.a,{href:"https://grafana.com/blog/2020/02/19/how-loki-reduces-log-storage/",children:"How Loki Reduces Log Storage"})}),"\n"]})]})}function z(e={}){const{wrapper:n}={...(0,B.R)(),...e.components};return n?(0,O.jsx)(n,{...e,children:(0,O.jsx)(P,{...e})}):P(e)}},53730:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/1-297c8451fdae33055090e0839baf3f20.gif"},28701:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/2-deb538bf7a0a69e6c938dee5adcdb3ea.gif"},57380:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/3-c82d9e3b6a38daa6905ac67783f7d049.gif"},83191:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/4-835f248c5bb2199d9c638a62878a4e0d.gif"},36382:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/5-07fcf05d46187b30988ca6dcf3f46709.gif"},24681:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-1-ad1158978292da846a982f97a8a9bb44.png"},61965:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-10-8ea8c59eab1344a5553431abe0b59e4c.png"},76498:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-2-d1728d71c5e6efbbdbf1e8ed14503ece.png"},98043:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-3-afd33d7da142558806603f5585317875.png"},43236:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-4-3f7a4948581705f9c575231640dee933.png"},6477:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-5-5a20ca48706bd76423a19d587ab851d7.png"},74710:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-6-17d3bdf2a6067940b53a8c8ec260f8e6.png"},28511:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-7-27297de2f2623d363647363fd4096d65.png"},81448:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/image-8-68f62bb3bb922a56e3adb5595be3f0c3.png"},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var i=r(96540);const s={},l=i.createContext(s);function t(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);