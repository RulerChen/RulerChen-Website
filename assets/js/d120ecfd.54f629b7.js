"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["4667"],{7064:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>a,toc:()=>t,default:()=>p,metadata:()=>i,assets:()=>o,contentTitle:()=>c});var i=JSON.parse('{"id":"CMU15-445/c06","title":"Memory & Disk I/O Management","description":"CMU15-445/645 Memory & Disk I/O Management","source":"@site/docs/CMU15-445/c06.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c06","permalink":"/RulerChen-Website/docs/CMU15-445/c06","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c06.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1757434915000,"sidebarPosition":6,"frontMatter":{"title":"Memory & Disk I/O Management","sidebar_position":6,"description":"CMU15-445/645 Memory & Disk I/O Management","keywords":["CMU15-445/645","Storage Models & Compression","CMU15-445/645 \u7B46\u8A18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Storage Models & Compression","permalink":"/RulerChen-Website/docs/CMU15-445/c05"},"next":{"title":"Hash Tables","permalink":"/RulerChen-Website/docs/CMU15-445/c07"}}'),r=l(4848),s=l(4429);let a={title:"Memory & Disk I/O Management",sidebar_position:"6",description:"CMU15-445/645 Memory & Disk I/O Management",keywords:["CMU15-445/645","Storage Models & Compression","CMU15-445/645 \u7B46\u8A18"],tags:["CMU15-445"]},c,o={},t=[{value:"Buffer Pool Management",id:"buffer-pool-management",level:2},{value:"DBMS vs OS",id:"dbms-vs-os",level:2},{value:"Buffer Replacement Policies",id:"buffer-replacement-policies",level:2},{value:"Least Recently Used (LRU)",id:"least-recently-used-lru",level:3},{value:"Clock",id:"clock",level:3},{value:"LRU-K",id:"lru-k",level:3},{value:"Buffer Pool Optimization",id:"buffer-pool-optimization",level:2},{value:"Multiple Buffer Pools",id:"multiple-buffer-pools",level:3},{value:"Prefetching",id:"prefetching",level:3},{value:"Scan Sharing (Synchronized Scans)",id:"scan-sharing-synchronized-scans",level:3},{value:"Buffer Pool Bypass",id:"buffer-pool-bypass",level:3},{value:"Localization",id:"localization",level:3},{value:"Dirty Page Flushing",id:"dirty-page-flushing",level:3},{value:"OS problem",id:"os-problem",level:2},{value:"Scheduler",id:"scheduler",level:3},{value:"Page Cache",id:"page-cache",level:3}];function d(e){let n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components},{Head:l,ImageModal:i}=n;return l||h("Head",!0),i||h("ImageModal",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{children:(0,r.jsx)("title",{children:"CMU 15-445 Memory & Disk I/O Management"})}),"\n",(0,r.jsx)(n.p,{children:"\u9019\u7BC0\u6703\u8A0E\u8AD6 DBMS \u5982\u4F55\u8B93\u8CC7\u6599\u5728\u786C\u789F\u8DDF\u8A18\u61B6\u9AD4\u4E2D\u79FB\u52D5\uFF0C\u4E3B\u8981\u5206\u70BA\u5169\u500B\u90E8\u5206 :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Spatial Control : \u6C7A\u5B9A\u628A page \u5BEB\u5230\u786C\u789F\u4E2D\u7684\u54EA\u500B\u4F4D\u7F6E\uFF0C\u76EE\u6A19\u662F\u5C07\u5E38\u5E38\u9700\u8981\u4E00\u8D77\u7528\u5230\u7684 page \u653E\u5728\u4E00\u8D77\u4F86\u63D0\u9AD8 I/O \u6548\u7387"}),"\n",(0,r.jsx)(n.li,{children:"Temporal Control : \u6C7A\u5B9A\u751A\u9EBC\u6642\u5019\u8981\u628A page \u8B80\u9032\u8A18\u61B6\u9AD4\u6216\u662F\u5BEB\u56DE\u786C\u789F\uFF0C\u76EE\u6A19\u662F\u964D\u4F4E I/O \u7684\u505C\u9813\u6642\u9593"}),"\n"]}),"\n",(0,r.jsx)(i,{src:"/img/cmu15-445/c06/image.webp",caption:"Disk-oriented DBMS workflow"}),"\n",(0,r.jsx)(n.h2,{id:"buffer-pool-management",children:"Buffer Pool Management"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u555F\u52D5 DBMS \u6642\uFF0CDBMS \u6703\u5411 OS \u7533\u8ACB\u4E00\u584A\u8A18\u61B6\u9AD4\u4F86\u5B58\u653E page\uFF0C\u9019\u584A\u8A18\u61B6\u9AD4\u5C31\u662F buffer pool\u3002\nDBMS \u6703\u5C07\u9019\u584A\u8A18\u61B6\u9AD4\u5206\u6210\u591A\u500B frame\uFF0C\u6BCF\u500B frame \u5C31\u53EF\u4EE5\u5C0D\u61C9\u5230\u4E00\u500B page\uFF0C\u7576\u9700\u8981\u8B80\u53D6 page \u6642\uFF0C\u5C31\u628A page \u8B80\u9032 frame \u4E2D\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u540C\u6642 DBMS \u6703\u7DAD\u8B77\u4E00\u500B page table \u4F86\u8A18\u9304\u6BCF\u500B page \u5728\u8A18\u61B6\u9AD4\u4E2D\u7684\u4F4D\u7F6E\uFF0C\u4E5F\u6703\u8A18\u9304\u4E00\u4E9B metadata\uFF0C\u6BD4\u5982 dirty flag (\u662F\u5426\u88AB\u4FEE\u6539\u904E)\u3001Pin / Reference Counter (\u662F\u5426\u88AB\u4F7F\u7528\u4E2D) \u4F86\u5E6B\u52A9\u7BA1\u7406 page\u3002"}),"\n",(0,r.jsx)(i,{src:"/img/cmu15-445/c06/image-1.webp",caption:"Buffer Pool Metadata"}),"\n",(0,r.jsx)(n.p,{children:"\u7576 page \u88AB\u5F15\u7528\u6642\uFF0CDBMS \u6703\u5C07\u9019\u500B page \u7684 reference counter +1 \u8868\u793A\u9019\u500B page \u6B63\u5728\u88AB\u4F7F\u7528\u4E2D\uFF0C\u4E0D\u80FD\u88AB\u79FB\u51FA\u8A18\u61B6\u9AD4\u3002\n\u7576\u6211\u5011\u8981\u8ACB\u6C42\u4E0D\u5728\u8A18\u61B6\u9AD4\u4E2D\u7684 page \u6642\uFF0CDBMS \u6703\u5148\u8ACB\u6C42\u4E00\u500B latch\uFF0C\u7136\u5F8C\u628A page \u8B80\u9032 buffer pool \u4E2D\uFF0C\u518D\u91CB\u653E latch\uFF0C\u9019\u6A23\u53EF\u4EE5\u907F\u514D\u591A\u500B thread \u540C\u6642\u4FEE\u6539\u540C\u4E00\u500B entry\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"dbms-vs-os",children:"DBMS vs OS"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u8207 OS \u90FD\u6D89\u53CA\u8A18\u61B6\u9AD4\u8207\u786C\u789F\u7684\u7BA1\u7406\uFF0C\u4F46\u5169\u8005\u7684\u8A2D\u8A08\u76EE\u6A19\u8DDF\u65B9\u5411\u90FD\u4E0D\u592A\u4E00\u6A23\u3002\nDBMS \u5E0C\u671B\u80FD\u8655\u7406\u6BD4\u8A18\u61B6\u9AD4\u5927\u5F88\u591A\u7684\u8CC7\u6599\uFF0C\u4E26\u5728\u8B80\u53D6\u6642\u4FDD\u6301\u4F4E\u5EF6\u9072\uFF0C\u800C\u4F5C\u696D\u7CFB\u7D71\u63D0\u4F9B\u7684\u6A5F\u5236\u4E3B\u8981\u662F\u901A\u7528\u4E14\u4FDD\u8B77\u6574\u500B\u7CFB\u7D71\u7684\u5B89\u5168\u6027\u8207\u7A69\u5B9A\u6027\u3002"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u53EF\u4EE5\u88AB\u7406\u89E3\u70BA\u4E00\u500B\u64C1\u6709\u865B\u64EC\u5730\u5740\u7A7A\u9593\u7684\u7CFB\u7D71\uFF0C\u5B83\u6C7A\u5B9A\u4F55\u6642\u5C07\u786C\u789F\u4E0A\u7684\u8CC7\u6599 (page) \u8F09\u5165\u8A18\u61B6\u9AD4\uFF0C\u985E\u4F3C OS \u7684\u865B\u64EC\u8A18\u61B6\u9AD4\u6982\u5FF5\u3002\n\u4F46\u5982\u679C\u76F4\u63A5\u4F7F\u7528 OS \u63D0\u4F9B\u7684\u6A5F\u5236 (\u4F8B\u5982 mmap)\uFF0C\u6703\u5E36\u4F86\u5E7E\u500B\u554F\u984C :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4EA4\u6613\u5B89\u5168\u6027 : OS \u6703\u5728\u4EFB\u4F55\u6642\u9593\u9EDE\u628A dirty page \u5BEB\u56DE\u786C\u789F\uFF0C\u7834\u58DE DBMS \u7684 ACID \u4FDD\u8B49"}),"\n",(0,r.jsx)(n.li,{children:"IO \u505C\u9813 : DBMS \u4E0D\u77E5\u9053\u54EA\u4E9B\u9801\u9762\u5728\u5167\u5B58\u4E2D\uFF0C\u5728 page fault \u6642\uFF0COS \u6703\u4F7F\u7DDA\u7A0B\u505C\u9813"}),"\n",(0,r.jsx)(n.li,{children:"\u932F\u8AA4\u8655\u7406 : \u96E3\u4EE5\u9A57\u8B49\u9801\u9762\uFF0C\u4EFB\u4F55\u8A2A\u554F\u90FD\u53EF\u80FD\u5C0E\u81F4 DBMS \u5FC5\u9808\u8655\u7406 SIGBUS \u4FE1\u865F"}),"\n",(0,r.jsx)(n.li,{children:"\u6027\u80FD\u554F\u984C : OS \u6839\u64DA\u67E5\u8A62\u9700\u6C42\u4F86\u7BA1\u7406\u9801\u9762\uFF0C\u7121\u6CD5\u9032\u884C\u9810\u53D6\u6216\u662F\u6700\u4F73\u5316 IO"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u56E0\u6B64\uFF0CDBMS \u901A\u5E38\u6703\u4F7F\u7528\u8F03\u70BA\u4F4E\u968E\u7684 system call \u4F86\u7BA1\u7406\u8CC7\u6599\uFF0C\u50CF\u662F :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"madvise"})," : \u544A\u8A34 OS \u6211\u5011\u9700\u8981\u54EA\u4E9B\u9801\u9762"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mlock"})," : \u544A\u8A34 OS \u54EA\u4E9B\u9801\u9762\u4E0D\u80FD\u88AB\u5BEB\u5165"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"msync"})," : \u901A\u77E5 OS \u5C07\u67D0\u4E9B\u8A18\u61B6\u9AD4\u5BEB\u5230\u786C\u789F\u4E0A"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u900F\u904E\u9019\u4E9B system call\uFF0CDBMS \u53EF\u4EE5\u66F4\u6709\u6548\u7387\u7684\u7BA1\u7406\u8A18\u61B6\u9AD4\u8207\u786C\u789F\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"buffer-replacement-policies",children:"Buffer Replacement Policies"}),"\n",(0,r.jsx)(n.p,{children:"\u7576 buffer pool \u88AB\u586B\u6EFF\u6642\uFF0CDBMS \u9700\u8981\u900F\u904E\u6F14\u7B97\u6CD5\u4F86\u6C7A\u5B9A\u8981\u5C07\u54EA\u500B page \u79FB\u51FA\u8A18\u61B6\u9AD4\uFF0C\u9019\u500B\u6F14\u7B97\u6CD5\u7A31\u70BA replacement policy\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"least-recently-used-lru",children:"Least Recently Used (LRU)"}),"\n",(0,r.jsx)(n.p,{children:"LRU \u6703\u5C07\u6700\u8FD1\u6700\u5C11\u88AB\u4F7F\u7528\u7684 page \u79FB\u9664\uFF0C\u9019\u500B\u7B56\u7565\u7684\u5047\u8A2D\u662F\u6700\u8FD1\u88AB\u4F7F\u7528\u904E\u7684 page \u5728\u672A\u4F86\u4E5F\u6703\u88AB\u4F7F\u7528\u5230\u3002\n\u901A\u5E38\u6703\u4F7F\u7528 linked list \u4F86\u8A18\u9304\u6BCF\u500B page \u6700\u5F8C\u4E00\u6B21\u88AB\u4F7F\u7528\u7684\u6642\u9593\uFF0C\u5982\u679C\u6EFF\u4E86\uFF0C\u5C31\u628A\u6700\u4E45\u6C92\u88AB\u4F7F\u7528\u7684 page \u66FF\u63DB\u6389\u3002"}),"\n",(0,r.jsx)(i,{src:"/img/cmu15-445/c06/image-2.webp",caption:"LRU"}),"\n",(0,r.jsx)(n.h3,{id:"clock",children:"Clock"}),"\n",(0,r.jsx)(n.p,{children:"\u8207 LRU \u985E\u4F3C\uFF0C\u4F46\u662F clock \u4E0D\u9700\u8981\u7D00\u9304\u4E0A\u4E00\u6B21\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u800C\u662F\u8A18\u9304\u4E00\u500B reference bit\u3002"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7576 page \u88AB\u8A2A\u554F\u6642\uFF0Creference bit \u6703\u88AB\u8A2D\u70BA 1\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u7576\u9700\u8981\u79FB\u9664 page \u6642\uFF0C\u5F9E\u4E0A\u4E00\u6B21\u7684\u4F4D\u7F6E\u958B\u59CB\uFF0C\u8F2A\u6D41\u8A62\u554F reference bit\uFF0C\n\u5982\u679C reference bit \u662F 1\uFF0C\u5247\u5C07 reference bit \u8A2D\u70BA 0\uFF0C\u7136\u5F8C\u7E7C\u7E8C\u5F80\u4E0B\u627E\u3002\n\u5982\u679C reference bit \u662F 0\uFF0C\u5247\u5C07\u9019\u500B page \u79FB\u9664\u3002"}),"\n"]}),"\n",(0,r.jsx)(i,{src:"/img/cmu15-445/c06/image-3.webp",caption:"Clock"}),"\n",(0,r.jsx)(n.h3,{id:"lru-k",children:"LRU-K"}),"\n",(0,r.jsx)(n.p,{children:"\u4E0D\u7BA1\u662F LRU \u9084\u662F clock\uFF0C\u90FD\u6703\u9047\u5230 sequential flooding \u7684\u554F\u984C\uFF0C\u4E5F\u5C31\u662F\u6307\u6700\u65B0\u8B80\u53D6\u7684 page \u53CD\u800C\u662F\u6700\u4E0D\u9700\u8981\u7684 page\uFF0C\u4E5F\u56E0\u6B64\u6709\u4E86 LRU-K \u4F86\u89E3\u6C7A\u9019\u500B\u554F\u984C\u3002"}),"\n",(0,r.jsx)(n.p,{children:"LRU-K \u6703\u4FDD\u5B58\u6BCF\u500B page \u6700\u5F8C k \u6B21\u88AB\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u7136\u5F8C\u6839\u64DA\u9019\u500B\u6642\u9593\u4F86\u9810\u4F30\u4E0B\u6B21\u88AB\u8A2A\u554F\u7684\u6642\u9593\uFF0C\u5982\u679C k = 1 \u5C31\u662F LRU\uFF0C\u901A\u5E38\u6703\u4F7F\u7528 k = 2\u3002"}),"\n",(0,r.jsx)(n.p,{children:"MySQL \u5C31\u662F\u63A1\u7528\u4E86\u985E\u4F3C\u7684\u6982\u5FF5\u53EB\u505A midpoint insertion strategy\u3002\n\u9019\u7A2E\u65B9\u6CD5\u6703\u5C07 list \u5206\u6210 young list \u8DDF old list\uFF0C\u7576\u65B0\u7684 page \u88AB\u8A2A\u554F\u6642\uFF0C\u6703\u88AB\u653E\u5230 old list \u7684\u6700\u524D\u9762\uFF0C\u800C\u7576 old list \u88E1\u9762\u7684 page \u88AB\u8A2A\u554F\u5230\u6642\uFF0C\u6703\u88AB\u653E\u5230 young list \u7684\u6700\u524D\u9762\u3002"}),"\n",(0,r.jsx)(i,{src:"/img/cmu15-445/c06/image-4.webp",caption:"LRU-K"}),"\n",(0,r.jsx)(n.h2,{id:"buffer-pool-optimization",children:"Buffer Pool Optimization"}),"\n",(0,r.jsx)(n.p,{children:"\u9664\u4E86\u9078\u64C7\u9069\u5408\u7684 replacement policy \u5916\uFF0CDBMS \u4E5F\u6703\u900F\u904E\u5176\u4ED6\u65B9\u5F0F\u4F86\u512A\u5316 buffer pool\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"multiple-buffer-pools",children:"Multiple Buffer Pools"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u53EF\u4EE5\u7DAD\u8B77\u591A\u500B buffer pool\uFF0C\u6BCF\u500B buffer pool \u6709\u4E0D\u540C\u7684\u5927\u5C0F\u548C\u66FF\u63DB\u7B56\u7565\uFF0C\u9019\u9EBC\u505A\u53EF\u4EE5\u6E1B\u5C11 latch \u7684\u7AF6\u722D\uFF0C\u4E26\u4E14\u53EF\u4EE5\u70BA\u4E0D\u540C\u578B\u614B\u7684 page \u9078\u64C7\u4E0D\u540C\u7684\u5B58\u53D6\u7B56\u7565\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4F8B\u5982\u53EF\u4EE5\u6709\u4EE5\u4E0B\u5E7E\u7A2E buffer pool :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple buffer pool instances"}),"\n",(0,r.jsx)(n.li,{children:"Per-database buffer pool"}),"\n",(0,r.jsx)(n.li,{children:"Per-page type buffer pool"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5E38\u898B\u7684\u5206\u914D\u65B9\u5F0F\u6709\u5169\u7A2E :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Object_id : \u5728 record \u4E2D\u7522\u751F\u4E00\u500B object_id\uFF0C\u7136\u5F8C\u7DAD\u8B77\u4E00\u500B hash table \u4F86\u8A18\u9304 object_id \u5C0D\u61C9\u5230\u54EA\u500B buffer pool"}),"\n",(0,r.jsx)(n.li,{children:"Hashing : \u6839\u64DA page_id \u7684 hash \u4F86\u6C7A\u5B9A\u653E\u5728\u54EA\u500B buffer pool"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"prefetching",children:"Prefetching"}),"\n",(0,r.jsx)(n.p,{children:"DBMS \u53EF\u4EE5\u900F\u904E query plan \u4F86\u9810\u6E2C\u672A\u4F86\u53EF\u80FD\u6703\u7528\u5230\u7684 page\uFF0C\u7136\u5F8C\u63D0\u524D\u628A\u9019\u4E9B page \u8B80\u9032 buffer pool \u4E2D\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"scan-sharing-synchronized-scans",children:"Scan Sharing (Synchronized Scans)"}),"\n",(0,r.jsx)(n.p,{children:"Scan sharing \u4E3B\u8981\u662F\u5728\u6709\u591A\u500B\u67E5\u8A62\u540C\u6642\u9032\u884C sequential scan \u6642\uFF0C\u53EF\u4EE5\u5171\u4EAB\u540C\u4E00\u500B scan \u7684\u7D50\u679C\u3002\n\u8209\u4F8B\u4F86\u8AAA\uFF0C\u5982\u679C\u6709 A \u548C B \u5169\u500B\u67E5\u8A62\u5148\u5F8C\u9032\u884C\uFF0C\u7576 B \u958B\u59CB\u67E5\u8A62\u6642\uFF0C\u53EF\u4EE5\u5148\u8DDF A \u4E00\u8D77\u6383\u63CF\uFF0C\u7B49\u5230 A \u7D50\u675F\u6642\uFF0C\u81EA\u5DF1\u518D\u91CD\u65B0\u6383\u63CF\u4E00\u958B\u59CB\u7F3A\u5C11\u7684\u90E8\u5206\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"buffer-pool-bypass",children:"Buffer Pool Bypass"}),"\n",(0,r.jsx)(n.p,{children:"\u7576\u9700\u8981\u4F7F\u7528 sequential scan \u4F86\u6383\u63CF\u8CC7\u6599\u91CF\u5F88\u5927\u7684\u8868\u6642\uFF0C\u5982\u679C DBMS \u5C07\u6BCF\u500B page \u90FD\u8B80\u9032 buffer pool \u4E2D\uFF0C\u5C31\u6703\u5C0E\u81F4 buffer pool \u88AB\u6C59\u67D3\uFF0C\u56E0\u6B64\u6211\u5011\u53EF\u4EE5\u55AE\u7368\u5206\u914D\u4E00\u584A\u8A18\u61B6\u9AD4\u4F86\u5B58\u653E\u9019\u4E9B page\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"localization",children:"Localization"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 DBMS \u4E2D\uFF0C\u5982\u679C\u6709\u5927\u578B\u7684\u67E5\u8A62 (",(0,r.jsx)(n.code,{children:"SELECT * FROM large_table"}),")\uFF0C\u6703\u9700\u8981\u8B80\u53D6\u5927\u91CF\u7684 page\uFF0C\u9019\u6A23\u6703\u5C0E\u81F4 buffer pool \u88AB\u6C59\u67D3\uFF0C\u56E0\u70BA\u9019\u4E9B page \u5927\u591A\u53EA\u6703\u88AB\u4F7F\u7528\u4E00\u6B21\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u800C localization \u5C31\u662F\u7528\u4F86\u8655\u7406\u9019\u500B\u554F\u984C\u7684\uFF0C\u5B83\u7684\u610F\u601D\u662F\u7CFB\u7D71\u4E0D\u6703\u5168\u5C40\u5171\u4EAB\u4E00\u500B buffer pool\uFF0C\u800C\u662F\u6839\u64DA\u6BCF\u500B\u67E5\u8A62\u4F86\u5206\u914D buffer pool \u7684\u7A7A\u9593\uFF0C\u7576\u8981\u66FF\u63DB\u6642\u5C31\u512A\u5148\u79FB\u9664\u9019\u500B\u67E5\u8A62\u6240\u4F7F\u7528\u7684 page\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4EE5 PostgreSQL \u70BA\u4F8B\uFF0C\u5B83\u6703\u5C0D\u6BCF\u500B\u67E5\u8A62\u7DAD\u8B77\u4E00\u500B ring buffer \u7528\u65BC\u9650\u5236\u67E5\u8A62\u53EF\u4F7F\u7528\u7684 buffer \u6578\u91CF\uFF0C\u7576\u67E5\u8A62\u7E7C\u7E8C\u8B80\u53D6\u65B0\u7684 page \u6642\uFF0C\u6703\u5C07 ring buffer \u4E2D\u6700\u820A\u7684 page \u66FF\u63DB\u6389\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"dirty-page-flushing",children:"Dirty Page Flushing"}),"\n",(0,r.jsx)(n.p,{children:"\u7576 buffer pool \u4E2D\u7684 page \u88AB\u4FEE\u6539\u5F8C\uFF0C\u8A72\u9801\u6703\u88AB\u6A19\u8A18\u70BA dirty page\uFF0C\u8868\u793A\u8A18\u61B6\u9AD4\u4E2D\u7684\u5167\u5BB9\u5DF2\u7D93\u548C\u78C1\u789F\u4E0A\u7684\u7248\u672C\u4E0D\u4E00\u81F4\u3002\n\u5728\u6DD8\u6C70 dirty page \u4E4B\u524D\uFF0CDBMS \u5FC5\u9808\u5148\u5C07\u5176\u5BEB\u56DE\u78C1\u789F\uFF0C\u5426\u5247\u6703\u9020\u6210\u8CC7\u6599\u907A\u5931\u6216\u4E0D\u4E00\u81F4\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u65BC\u5BEB\u5165\u78C1\u789F\u7684\u6210\u672C\u9AD8\uFF0C\u82E5\u5728\u6DD8\u6C70\u6642\u624D\u540C\u6B65\uFF0C\u6703\u5C0E\u81F4\u5EF6\u9072\u3002\n\u56E0\u6B64 DBMS \u6703\u4F7F\u7528 background writer\uFF0C\u9031\u671F\u6027\u5730\u5C07 dirty page \u5237\u56DE\u78C1\u789F\uFF0C\u6E05\u9664 dirty \u6A19\u8A18\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"os-problem",children:"OS problem"}),"\n",(0,r.jsx)(n.p,{children:"\u7E3D\u9AD4\u4F86\u8AAA\uFF0CDBMS \u61C9\u8A72\u76E1\u91CF\u6E1B\u5C11\u5C0D OS \u7684\u4F9D\u8CF4\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"scheduler",children:"Scheduler"}),"\n",(0,r.jsx)(n.p,{children:"\u786C\u789F I/O (\u7279\u5225\u662F HDD)\uFF0C\u662F\u9700\u8981\u975E\u5E38\u4E45\u7684\u6642\u9593\u4F86\u5B8C\u6210\u7684\uFF0C\u56E0\u6B64 OS \u70BA\u4E86\u63D0\u9AD8\u6574\u9AD4\u7CFB\u7D71\u7684\u6548\u80FD\uFF0C\u6703\u900F\u904E I/O Scheduler \u4F86\u5408\u4F75\u53CA\u7BA1\u7406 I/O \u8ACB\u6C42\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4F46\u554F\u984C\u5728\u65BC OS \u4E26\u4E0D\u6703\u77E5\u9053\u90A3\u4E9B\u6771\u897F\u5C0D DBMS \u4F86\u8AAA\u662F\u91CD\u8981\u7684\uFF0C\u8B6C\u5982\u8AAA WAL \u80AF\u5B9A\u6BD4\u5176\u4ED6\u8CC7\u6599\u91CD\u8981\uFF0C\u800C VACUUM \u76F8\u5C0D\u4F86\u8AAA\u5C31\u4E0D\u90A3\u9EBC\u91CD\u8981\u3002\n\u6240\u4EE5\u8A31\u591A DBMS \u6703\u5EFA\u8B70\u4F7F\u7528 deadline \u6216 noop scheduler (FIFO) \u4F86\u76E1\u91CF\u6E1B\u5C11 scheduler \u7684\u5F71\u97FF\uFF0C\u5982 MySQL\u3001Oracle\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u540C\u6642\uFF0CDBMS \u6703\u81EA\u5DF1\u6709\u4E00\u500B scheduler \u4F86\u7BA1\u7406\u8B80\u5BEB\u8ACB\u6C42\uFF0C\u5B83\u6703\u6839\u64DA\u8ACB\u6C42\u7684\u985E\u578B\u4F86\u81EA\u5DF1\u6C7A\u5B9A\u8B80\u5BEB\u7684\u9806\u5E8F\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"page-cache",children:"Page Cache"}),"\n",(0,r.jsxs)(n.p,{children:["OS \u6703\u7DAD\u8B77\u4E00\u500B page cache \u4F86\u5B58\u653E\u6700\u8FD1\u88AB\u8B80\u53D6\u7684 page\uFF0C\u4F46\u9019\u6709\u53EF\u80FD\u6703\u8DDF DBMS \u885D\u7A81\uFF0C\u4E26\u5C0E\u81F4\u96D9\u91CD\u5FEB\u53D6\u6216\u662F\u4E0D\u4E00\u81F4\u7684\u554F\u984C\u3002\n\u56E0\u6B64\u901A\u5E38\u6703\u4F7F\u7528 ",(0,r.jsx)(n.code,{children:"O_DIRECT"})," \u4F86\u907F\u514D\u9019\u500B\u554F\u984C\uFF0C\u9664\u4E86 PostgreSQL \u4EE5\u5916\u3002"]}),"\n",(0,r.jsx)(i,{src:"/img/cmu15-445/c06/image-5.webp",caption:"OS Page Cache"})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function h(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},4429:function(e,n,l){l.d(n,{R:()=>a,x:()=>c});var i=l(6540);let r={},s=i.createContext(r);function a(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);