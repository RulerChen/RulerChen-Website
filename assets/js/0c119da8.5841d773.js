"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3500],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(t),g=r,m=u["".concat(l,".").concat(g)]||u[g]||d[g]||i;return t?a.createElement(m,s(s({ref:n},p),{},{components:t})):a.createElement(m,s({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=g;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[u]="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=t[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},5512:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=t(7462),r=(t(7294),t(3905));const i={title:"<Suspense>",sidebar_position:"4",description:"",keywords:["Suspense","React"]},s=void 0,o={unversionedId:"Web Programming/React/React Components and APIs/React Component/Suspense",id:"Web Programming/React/React Components and APIs/React Component/Suspense",title:"<Suspense>",description:"",source:"@site/docs/Web Programming/React/React Components and APIs/React Component/Suspense.mdx",sourceDirName:"Web Programming/React/React Components and APIs/React Component",slug:"/Web Programming/React/React Components and APIs/React Component/Suspense",permalink:"/RulerChen-Website/docs/Web Programming/React/React Components and APIs/React Component/Suspense",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"<Suspense>",sidebar_position:4,description:"",keywords:["Suspense","React"]},sidebar:"tutorialSidebar",previous:{title:"<StrictMode>",permalink:"/RulerChen-Website/docs/Web Programming/React/React Components and APIs/React Component/StrictMode"},next:{title:"APIs",permalink:"/RulerChen-Website/docs/category/apis"}},l={},c=[{value:"Syntax",id:"syntax",level:2},{value:"Usage",id:"usage",level:2},{value:"Displaying a fallback while content is loading",id:"displaying-a-fallback-while-content-is-loading",level:3},{value:"Revealing content together at once",id:"revealing-content-together-at-once",level:3},{value:"Revealing nested content as it loads",id:"revealing-nested-content-as-it-loads",level:3},{value:"Showing stale content while fresh content is loading",id:"showing-stale-content-while-fresh-content-is-loading",level:3},{value:"Preventing already revealed content from hiding",id:"preventing-already-revealed-content-from-hiding",level:3},{value:"Indicating that a transition is happening",id:"indicating-that-a-transition-is-happening",level:3},{value:"Resetting Suspense boundaries on navigation",id:"resetting-suspense-boundaries-on-navigation",level:3},{value:"Providing a fallback for server errors and server-only content",id:"providing-a-fallback-for-server-errors-and-server-only-content",level:3}],p={toc:c},u="wrapper";function d(e){let{components:n,...t}=e;return(0,r.kt)(u,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"syntax"},"Syntax"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"<Suspense fallback={<Loading />}>\n  <SomeComponent />\n</Suspense>\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"children")," : \u4f60\u60f3\u8981\u6e32\u67d3\u7684 UI\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fallback")," : \u4e00\u500b\u5728\u7b49\u5f85 ",(0,r.kt)("inlineCode",{parentName:"li"},"children")," \u52a0\u8f09\u6642\u986f\u793a\u7684 React \u5143\u7d20\u3002")),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("h3",{id:"displaying-a-fallback-while-content-is-loading"},"Displaying a fallback while content is loading"),(0,r.kt)("p",null,"\u53ea\u6709\u5169\u7a2e\u60c5\u6cc1\u6703\u986f\u793a fallback :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5728 Suspense-enabled frameworks (Next.js ...) \u57f7\u884c Data-fetching"),(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"lazy")," \u7684\u7d44\u4ef6")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Suspense")," \u4e0d\u6703\u7b49\u5f85 Effect \u6216\u8005 Event Handlers \uff0c\u6240\u4ee5\u4f60\u9700\u8981\u81ea\u5df1\u8655\u7406\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"<Suspense fallback={<Loading />}>\n  <Albums />\n</Suspense>\n")),(0,r.kt)("h3",{id:"revealing-content-together-at-once"},"Revealing content together at once"),(0,r.kt)("p",null,"\u6703\u7b49\u5f85\u6240\u6709\u7d44\u4ef6\u90fd\u8dd1\u5b8c\u624d\u986f\u793a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"<Suspense fallback={<Loading />}>\n  <Biography />\n  <Panel>\n    <Albums />\n  </Panel>\n</Suspense>\n")),(0,r.kt)("h3",{id:"revealing-nested-content-as-it-loads"},"Revealing nested content as it loads"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"<Suspense fallback={<BigSpinner />}>\n  <Biography />\n  <Suspense fallback={<AlbumsGlimmer />}>\n    <Panel>\n      <Albums />\n    </Panel>\n  </Suspense>\n</Suspense>\n")),(0,r.kt)("h3",{id:"showing-stale-content-while-fresh-content-is-loading"},"Showing stale content while fresh content is loading"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"useDeferredValue")," \u4f86\u50b3\u905e\u820a\u7684\u7248\u672c\uff0c\u76f4\u5230\u65b0\u7684\u7248\u672c\u6e96\u5099\u597d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},'import { Suspense, useState, useDeferredValue } from "react";\nimport SearchResults from "./SearchResults.js";\n\nexport default function App() {\n  const [query, setQuery] = useState("");\n  const deferredQuery = useDeferredValue(query);\n  const isStale = query !== deferredQuery;\n  return (\n    <>\n      <label>\n        Search albums:\n        <input value={query} onChange={(e) => setQuery(e.target.value)} />\n      </label>\n      <Suspense fallback={<h2>Loading...</h2>}>\n        <div style={{ opacity: isStale ? 0.5 : 1 }}>\n          <SearchResults query={deferredQuery} />\n        </div>\n      </Suspense>\n    </>\n  );\n}\n')),(0,r.kt)("h3",{id:"preventing-already-revealed-content-from-hiding"},"Preventing already revealed content from hiding"),(0,r.kt)("p",null,"\u7576\u4e00\u500b\u7d44\u4ef6\u88ab Suspense \u6642\uff0c\u4ed6\u7684\u7236\u7d44\u4ef6\u4e5f\u6703\u88ab Suspense \uff0c\u9019\u53ef\u80fd\u9020\u6210\u756b\u9762\u7684\u4e0d\u548c\u8ae7\uff0c\u9019\u6642\u5019\u4f60\u53ef\u80fd\u9700\u8981 ",(0,r.kt)("inlineCode",{parentName:"p"},"startTransition")," \u4f86\u907f\u514d\u9019\u7a2e\u60c5\u6cc1\u3002"),(0,r.kt)("h3",{id:"indicating-that-a-transition-is-happening"},"Indicating that a transition is happening"),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 useTransition` \u8868\u793a\u5728 loading \u7684\u72c0\u614b"),(0,r.kt)("h3",{id:"resetting-suspense-boundaries-on-navigation"},"Resetting Suspense boundaries on navigation"),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u8981\u524d\u5f80\u4e00\u500b\u5e36\u6709\u53c3\u6578\u7684\u8def\u5f91\uff0c\u4f60\u53ef\u80fd\u6703\u9700\u8981\u7528 key \u544a\u8a34 React \u4ed6\u5011\u662f\u4e0d\u540c\u7684\u6771\u897f\u3002"),(0,r.kt)("h3",{id:"providing-a-fallback-for-server-errors-and-server-only-content"},"Providing a fallback for server errors and server-only content"),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528 streaming server rendering APIs \u7684\u8a71\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"<Suspense>")," \u4f86\u8655\u7406\u53ef\u80fd\u767c\u751f\u7684\u932f\u8aa4\u3002"))}d.isMDXComponent=!0}}]);