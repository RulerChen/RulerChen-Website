"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7814],{3451:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>t});var l=n(5893),s=n(1151);const i={title:"P1 - Buffer Pool Manager",sidebar_position:"31",description:"Buffer Pool Manager",keywords:["CMU15-445/645","Buffer Pool Manager","CMU15-445/645 \u7b46\u8a18"]},c=void 0,d={id:"CMU15-445/p1",title:"P1 - Buffer Pool Manager",description:"Buffer Pool Manager",source:"@site/docs/CMU15-445/p1.mdx",sourceDirName:"CMU15-445",slug:"/CMU15-445/p1",permalink:"/RulerChen-Website/docs/CMU15-445/p1",draft:!1,unlisted:!1,editUrl:"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/p1.mdx",tags:[],version:"current",lastUpdatedAt:1730259735e3,sidebarPosition:31,frontMatter:{title:"P1 - Buffer Pool Manager",sidebar_position:31,description:"Buffer Pool Manager",keywords:["CMU15-445/645","Buffer Pool Manager","CMU15-445/645 \u7b46\u8a18"]},sidebar:"tutorialSidebar",previous:{title:"P0 - C++ Primer",permalink:"/RulerChen-Website/docs/CMU15-445/p0"},next:{title:"P2 - Hash Index",permalink:"/RulerChen-Website/docs/CMU15-445/p2"}},o={},t=[{value:"Problem Description",id:"problem-description",level:2},{value:"Solution",id:"solution",level:2},{value:"LRU-K Replacement Policy",id:"lru-k-replacement-policy",level:3},{value:"Disk Scheduler",id:"disk-scheduler",level:3},{value:"Buffer Pool Manager",id:"buffer-pool-manager",level:3},{value:"Reference",id:"reference",level:2}];function a(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components},{Head:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n,{children:(0,l.jsx)("title",{children:"CMU 15-445/645 Project#1 Buffer Pool Manager"})}),"\n",(0,l.jsx)(r.h2,{id:"problem-description",children:"Problem Description"}),"\n",(0,l.jsx)(r.p,{children:"\u5728\u9019\u500b project \u4e2d\uff0c\u6211\u5011\u9700\u8981\u5be6\u73fe\u4e00\u500b buffer pool manager\uff0c\u7e3d\u5171\u6709 3 \u500b Task :"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:["LRU-K Replacement Policy : \u4fee\u6539 ",(0,l.jsx)(r.code,{children:"/src/buffer/lru_k_replacer.cpp"})," \u4f86\u5be6\u73fe LRU-K replacement policy"]}),"\n",(0,l.jsxs)(r.li,{children:["Disk Scheduler : \u4fee\u6539 ",(0,l.jsx)(r.code,{children:"/src/storage/disk/disk_scheduler.cpp"})," \u4f86\u5be6\u73fe disk scheduler"]}),"\n",(0,l.jsxs)(r.li,{children:["Buffer Pool Manager : \u4fee\u6539 ",(0,l.jsx)(r.code,{children:"/src/buffer/buffer_pool_manager.cpp"})," \u4f86\u5be6\u73fe buffer pool manager"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"solution",children:"Solution"}),"\n",(0,l.jsx)(r.p,{children:"\u66ab\u6642\u6c92\u6709\u91dd\u5c0d leaderboard \u505a\u4efb\u4f55\u512a\u5316\uff0c\u5982\u679c\u60f3\u8981\u9032\u884c\u6548\u80fd\u512a\u5316\uff0c\u53ef\u4ee5\u53c3\u8003\u6700\u4e0b\u65b9 Reference \u4e2d\u7684\u6587\u7ae0\u3002"}),"\n",(0,l.jsx)(r.h3,{id:"lru-k-replacement-policy",children:"LRU-K Replacement Policy"}),"\n",(0,l.jsxs)(r.p,{children:["\u53ea\u9700\u8981\u5168\u90e8\u90fd\u4f7f\u7528 ",(0,l.jsx)(r.code,{children:"std::scoped_lock"})," \u5373\u53ef\uff0c\u9806\u4fbf\u91dd\u5c0d ",(0,l.jsx)(r.code,{children:"LRUKNode"})," \u5beb\u4e00\u4e9b get function \u4f86\u65b9\u4fbf\u53d6\u5f97\u8cc7\u6599\u3002"]}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"Evict"})," : \u512a\u5148\u5ea6\u662f\u5148\u627e\u6709 inf \u7684\uff0c\u90fd\u662f inf \u5c31\u6bd4\u4e0a\u6b21\u7684\u6642\u9593\u8ab0\u6bd4\u8f03\u65e9\uff0c\u90fd\u6c92\u6709 inf \u7684\u8a71\u4e5f\u662f\u627e\u6700\u65e9\u7684"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"RecordAccess"})," : \u66f4\u65b0 ",(0,l.jsx)(r.code,{children:"history_"})," \u4e2d\u7684\u8cc7\u6599"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"Remove"})," : \u76f4\u63a5\u522a\u9664\u5373\u53ef"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"SetEvictable"})," : \u5224\u65b7\u73fe\u5728\u7684\u60c5\u6cc1\u4e26\u8a2d\u5b9a\u5373\u53ef"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"Size"})," : \u76f4\u63a5\u56de\u50b3 ",(0,l.jsx)(r.code,{children:"curr_size_"})," \u5373\u53ef"]}),"\n"]}),"\n",(0,l.jsxs)(r.p,{children:["\u5728\u57f7\u884c\u6e2c\u8a66\u4e4b\u524d\uff0c\u9700\u8981\u5148\u53bb ",(0,l.jsx)(r.code,{children:"/test/buffer/lru_k_replacer_test.cpp"})," \u4e2d\u5c07\u6e2c\u8a66\u540d\u7a31\u4e2d\u7684 ",(0,l.jsx)(r.code,{children:"DISABLED_SampleTest"})," \u6539\u6210 ",(0,l.jsx)(r.code,{children:"SampleTest"}),"\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4 :"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"cd build\nmake lru_k_replacer_test -j$(nproc)\n\n./test/lru_k_replacer_test\n"})}),"\n",(0,l.jsx)(r.h3,{id:"disk-scheduler",children:"Disk Scheduler"}),"\n",(0,l.jsx)(r.p,{children:"\u9700\u8981\u4fee\u6539\u5169\u500b function :"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"Schedule"})," : \u53ea\u9700\u8981\u5c07 r \u4e1f\u5230 ",(0,l.jsx)(r.code,{children:"request_queue_"})," \u4e2d\u5373\u53ef"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"StartWorkerThread"})," : \u8a2d\u8a08\u4e00\u500b while \u8ff4\u5708\uff0c\u4e26\u5c07 request \u4f9d\u64da read / write \u7684\u60c5\u6cc1\u4f86\u57f7\u884c"]}),"\n"]}),"\n",(0,l.jsxs)(r.p,{children:["\u5728\u57f7\u884c\u6e2c\u8a66\u4e4b\u524d\uff0c\u9700\u8981\u5148\u53bb ",(0,l.jsx)(r.code,{children:"/test/storage/disk_scheduler_test,"})," \u4e2d\u5c07\u6e2c\u8a66\u540d\u7a31\u4e2d\u7684 ",(0,l.jsx)(r.code,{children:"DISABLED_"})," \u62ff\u6389\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4 :"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"cd build\nmake disk_scheduler_test -j$(nproc)\n\n./test/disk_scheduler_test\n"})}),"\n",(0,l.jsx)(r.h3,{id:"buffer-pool-manager",children:"Buffer Pool Manager"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"FetchPage"})," :"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"UnpinPage"})," :"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"FlushPage"})," :"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"NewPage"})," :"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"DeletePage"})," :"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"FlushAllPages"})," :"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"reference",children:"Reference"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:(0,l.jsx)(r.a,{href:"https://4ever-xxxl.github.io/cmu-15445-project-1/",children:"CMU 15445 Project 1"})}),"\n",(0,l.jsx)(r.li,{children:(0,l.jsx)(r.a,{href:"https://www.aneureka.com/posts/cmu-15445-p1-opt",children:"CMU 15-445 2023 P1 \u4f18\u5316\u653b\u7565"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},1151:(e,r,n)=>{n.d(r,{Z:()=>d,a:()=>c});var l=n(7294);const s={},i=l.createContext(s);function c(e){const r=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),l.createElement(i.Provider,{value:r},e.children)}}}]);