"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["7861"],{23694:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>c,default:()=>h,toc:()=>a,metadata:()=>i,assets:()=>d,contentTitle:()=>t});var i=JSON.parse('{"id":"CMU15-445/p0","title":"P0 - C++ Primer","description":"C++ Primer","source":"@site/docs/CMU15-445/p0.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/p0","permalink":"/RulerChen-Website/docs/CMU15-445/p0","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/p0.mdx","tags":[],"version":"current","lastUpdatedAt":1748006674000,"sidebarPosition":30,"frontMatter":{"title":"P0 - C++ Primer","sidebar_position":30,"description":"C++ Primer","keywords":["CMU15-445/645","C++ Primer","CMU15-445/645 \u7B46\u8A18"]},"sidebar":"tutorialSidebar","previous":{"title":"Distributed OLAP Database Systems","permalink":"/RulerChen-Website/docs/CMU15-445/c23"},"next":{"title":"P1 - Buffer Pool Manager","permalink":"/RulerChen-Website/docs/CMU15-445/p1"}}'),l=s(85893),r=s(50065);let c={title:"P0 - C++ Primer",sidebar_position:"30",description:"C++ Primer",keywords:["CMU15-445/645","C++ Primer","CMU15-445/645 \u7B46\u8A18"]},t=void 0,d={},a=[{value:"Problem Description",id:"problem-description",level:2},{value:"Learning Resource",id:"learning-resource",level:2},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Solution",id:"solution",level:2},{value:"Task 1: Hyperloglog",id:"task-1-hyperloglog",level:3},{value:"Task 2: Presto Hyperloglog",id:"task-2-presto-hyperloglog",level:3},{value:"Submit",id:"submit",level:2}];function o(e){let n={a:"a",annotation:"annotation",code:"code",h2:"h2",h3:"h3",li:"li",math:"math",mi:"mi",mn:"mn",mrow:"mrow",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,r.a)(),...e.components},{Head:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s,{children:(0,l.jsx)("title",{children:"CMU 15-445 2024Fall Project#0 C++ Primer"})}),"\n",(0,l.jsx)(n.h2,{id:"problem-description",children:"Problem Description"}),"\n",(0,l.jsx)(n.p,{children:"\u9019\u500B\u7248\u672C\u662F 2024 Fall \u7684\u7248\u672C\uFF0C\u76EE\u6A19\u662F\u5BE6\u73FE\u4E00\u500B\u5E38\u898B\u7684\u8CC7\u6599\u7D50\u69CB Hyperloglog\uFF0C\u4E26\u719F\u6089 C++ \u7684\u8A9E\u6CD5\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u60F3\u8981\u5FEB\u901F\u4E0A\u624B\u5C08\u6848\u67B6\u69CB\uFF0C\u53EF\u4EE5\u4F7F\u7528 AI\uFF0C\u8B6C\u5982 ",(0,l.jsx)(n.a,{href:"https://deepwiki.com/cmu-db/bustub/1-overview",children:"deepwiki"}),"\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"learning-resource",children:"Learning Resource"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/cmu-db/15445-bootcamp",children:"15-445 C++ Bootcamp"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.youtube.com/watch?v=G9gnSGKYIg4",children:"Debug a C++ project in VS Code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://seisman.github.io/how-to-write-makefile/overview.html",children:"Makefile"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.bilibili.com/video/BV14h41187FZ/?vd_source=0b8d45cc2260b9a7a9d948d819ac16f3",children:"CMake"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u6211\u4F7F\u7528\u7684\u74B0\u5883\u662F WSL (Ubuntu 24.04) \u548C VSCode"}),"\n",(0,l.jsxs)(n.li,{children:["\u5B89\u88DD VSCode \u5957\u4EF6 ",(0,l.jsx)(n.code,{children:"C/C++ Extension Pack"}),"\u3001",(0,l.jsx)(n.code,{children:"clangd"}),"\u3001",(0,l.jsx)(n.code,{children:"CMake Tools"}),"\u3001",(0,l.jsx)(n.code,{children:"Clang-Format"})]}),"\n",(0,l.jsx)(n.li,{children:"\u5C07 bustub clone \u4E0B\u4F86\uFF0C\u4E26\u4E14\u56DE\u9000\u5230 2024 Fall \u7684 commit\uFF0C\u9019\u6A23\u53EF\u4EE5\u907F\u514D\u4E00\u4E9B\u4E0D\u5FC5\u8981\u7684\u554F\u984C"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/cmu-db/bustub.git\ncd bustub\ngit checkout f97256b88b20468c01023928b63f5693d697674c\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u63A5\u8457\u53EF\u4EE5\u628A ",(0,l.jsx)(n.code,{children:".git"})," \u6A94\u6848\u79FB\u9664\u4E26\u63A5\u4E0A\u81EA\u5DF1\u7684 git repo (\u6CE8\u610F\u4E0D\u8981\u516C\u958B repo \u5728 github \u4E0A\u4E26\u4E14\u628A github action \u95DC\u6389)"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'rm -rf .git\n\ngit init\ngit add .\ngit commit -m "init"\ngit remote add origin <your-git-repo>\ngit push -u origin main\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["\u7531\u65BC\u6211\u4F7F\u7528\u7684\u662F 24.04\uFF0C\u6240\u4EE5\u9700\u8981\u4FEE\u6539\u4E00\u4E0B ",(0,l.jsx)(n.code,{children:"packages.sh"})," \u7684\u5167\u5BB9\uFF0C\u4E26\u9806\u4FBF\u5B89\u88DD ",(0,l.jsx)(n.code,{children:"clangd"})," \u7684\u5957\u4EF6\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:'title="build_support/packages.sh" showLineNumbers {10,33-34}',children:'install_linux() {\n  # Update apt-get.\n  apt-get -y update\n  # Install packages.\n  apt-get -y install \\\n      build-essential \\\n      clang-14 \\\n      clang-format-14 \\\n      clang-tidy-14 \\\n      clangd-14 \\\n      cmake \\\n      doxygen \\\n      git \\\n      pkg-config \\\n      zlib1g-dev \\\n      libelf-dev \\\n      libdwarf-dev\n}\n\ninstall() {\n  set -x\n  UNAME=$(uname | tr "[:lower:]" "[:upper:]" )\n\n  case $UNAME in\n    DARWIN) install_mac ;;\n\n    LINUX)\n      version=$(cat /etc/os-release | grep VERSION_ID | cut -d \'"\' -f 2)\n      case $version in\n        18.04) install_linux ;;\n        20.04) install_linux ;;\n        22.04) install_linux ;;\n        # add this line\n        24.04) install_linux ;;\n        *) give_up ;;\n      esac\n      ;;\n\n    *) give_up ;;\n  esac\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsx)(n.li,{children:"\u5B89\u88DD\u5957\u4EF6"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo build_support/packages.sh\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"6",children:["\n",(0,l.jsx)(n.li,{children:"\u5617\u8A66\u7DE8\u8B6F\u4E00\u4E0B\uFF0C\u770B\u770B\u6709\u6C92\u6709\u554F\u984C"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=/usr/bin/clang-14 -DCMAKE_CXX_COMPILER=/usr/bin/clang++-14 -B build\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd build\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"make -j`nproc`\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"7",children:["\n",(0,l.jsx)(n.li,{children:"\u8A2D\u5B9A formatter \u4EE5\u53CA cmake\u3001clangd \u7B49\u7B49"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/settings.json"',children:'{\n  "C_Cpp.clang_format_path": "/usr/bin/clang-format-14",\n  "C_Cpp.formatting": "clangFormat",\n  "C_Cpp.clang_format_style": "file",\n  "clang-format.executable": "/usr/bin/clang-format-14",\n  "clangd.path": "/usr/bin/clangd-14",\n  "cmake.configureSettings": {\n    "CMAKE_C_COMPILER": "/usr/bin/clang-14",\n    "CMAKE_CXX_COMPILER": "/usr/bin/clang++-14"\n  },\n  "editor.formatOnSave": true\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"8",children:["\n",(0,l.jsxs)(n.li,{children:["\u63A5\u8457\u8A2D\u5B9A debugger\uFF0C\u6211\u4F7F\u7528\u7684 debugger \u662F ",(0,l.jsx)(n.code,{children:"GDB"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo apt install gdb\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u4EE5\u4E0B\u9019\u500B\u8A2D\u5B9A\u53EF\u4EE5\u5E6B\u52A9\u6211\u5011\u986F\u793A STL \u5BB9\u5668\u7684\u5167\u5BB9 :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/launch.json"',children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "C/C++: g++ build and debug active file",\n      "type": "cppdbg",\n      "request": "launch",\n      "program": "${workspaceFolder}/build/test/${fileBasenameNoExtension}",\n      "args": [],\n      "cwd": "${workspaceFolder}",\n      "stopAtEntry": true,\n      "MIMode": "gdb",\n      "miDebuggerPath": "/usr/bin/gdb",\n      "setupCommands": [\n        {\n          "description": "Test",\n          "text": "python import sys;sys.path.insert(0, \'/usr/share/gcc/python\');from libstdcxx.v6.printers import register_libstdcxx_printers;register_libstdcxx_printers(None)",\n          "ignoreFailures": false\n        },\n        {\n          "description": "Enable pretty-printing for gdb",\n          "text": "-enable-pretty-printing",\n          "ignoreFailures": true\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u4E4B\u5F8C\u5982\u679C\u8981\u57F7\u884C debug\uFF0C\u8A2D\u5B9A\u597D\u65B7\u9EDE\u5C0D\u8457 test file \u6309 ",(0,l.jsx)(n.code,{children:"F5"})," \u5373\u53EF\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,l.jsxs)(n.p,{children:["P0 \u4E3B\u8981\u6709\u5169\u500B task\uFF0C\u7B2C\u4E00\u500B\u662F\u5BE6\u4F5C\u57FA\u672C\u7684 Hyperloglog\uFF0C\u7B2C\u4E8C\u500B\u662F\u5BE6\u4F5C Presto \u7684 Hyperloglog\uFF0C",(0,l.jsx)(n.code,{children:".h"})," \u548C ",(0,l.jsx)(n.code,{children:".cpp"})," \u7684\u6A94\u6848\u5206\u5225\u5728 ",(0,l.jsx)(n.code,{children:"src/include/primer"})," \u548C ",(0,l.jsx)(n.code,{children:"src/primer"})," \u88E1\u9762\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u6211\u8A8D\u70BA\u6BD4\u8F03\u9700\u8981\u6CE8\u610F\u7684\u662F C++ \u4E2D ",(0,l.jsx)(n.code,{children:"std::bitset"})," \u7684\u4F7F\u7528\uFF0C\u9019\u500B\u8CC7\u6599\u7D50\u69CB\u53EF\u4EE5\u7528\u4F86\u5132\u5B58\u4E8C\u9032\u4F4D\u7684\u6578\u5B57\uFF0C\u4E26\u4E14\u53EF\u4EE5\u7528 ",(0,l.jsx)(n.code,{children:"<<"})," \u548C ",(0,l.jsx)(n.code,{children:">>"})," \u4F86\u505A\u4F4D\u79FB\u904B\u7B97\uFF0C\u4E5F\u9700\u8981\u7279\u5225\u6CE8\u610F ",(0,l.jsx)(n.code,{children:"std::bitset"})," \u7684 ",(0,l.jsx)(n.code,{children:"[0]"})," \u6307\u7684\u662F\u6700\u53F3\u908A\u7684 bit\uFF0C\u800C\u4E0D\u662F\u6700\u5DE6\u908A\u7684 bit\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"task-1-hyperloglog",children:"Task 1: Hyperloglog"}),"\n",(0,l.jsx)(n.p,{children:"\u5927\u81F4\u8AAA\u660E\u4E00\u4E0B Hyperloglog \u7684\u5BE6\u4F5C\uFF0C\u9019\u500B\u8CC7\u6599\u7D50\u69CB\u4E3B\u8981\u662F\u7528\u4F86\u4F30\u8A08\u4E0D\u91CD\u8907\u7684\u5143\u7D20\u7684\u6578\u91CF\uFF0C\u4E26\u4E14\u53EF\u4EE5\u5728 O(1) \u7684\u6642\u9593\u548C\u56FA\u5B9A\u7684\u7A7A\u9593\u5167\u5B8C\u6210\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u9996\u5148\u6211\u5011\u6703\u5C07\u6240\u6709\u7684\u5143\u7D20 hash \u6210\u4E00\u500B 64 bits \u7684\u6574\u6578\uFF0C\u7136\u5F8C\u5C07\u9019\u500B\u6574\u6578\u5206\u6210\u5169\u500B\u90E8\u5206\uFF0C\u524D\u9762\u7684 ",(0,l.jsx)(n.code,{children:"n_bits"})," \u4EE3\u8868\u6876\u7684 index (\u7E3D\u5171\u6709 ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsx)(n.mrow,{children:(0,l.jsxs)(n.msup,{children:[(0,l.jsx)(n.mn,{children:"2"}),(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mi,{children:"n"}),(0,l.jsx)(n.mi,{children:"b"}),(0,l.jsx)(n.mi,{children:"i"}),(0,l.jsx)(n.mi,{children:"t"}),(0,l.jsx)(n.mi,{children:"s"})]})]})}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"2^{nbits}"})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8491em"}}),(0,l.jsxs)(n.span,{className:"mord",children:[(0,l.jsx)(n.span,{className:"mord",children:"2"}),(0,l.jsx)(n.span,{className:"msupsub",children:(0,l.jsx)(n.span,{className:"vlist-t",children:(0,l.jsx)(n.span,{className:"vlist-r",children:(0,l.jsx)(n.span,{className:"vlist",style:{height:"0.8491em"},children:(0,l.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,l.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(n.span,{className:"mord mtight",children:[(0,l.jsx)(n.span,{className:"mord mathnormal mtight",children:"nbi"}),(0,l.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"}),(0,l.jsx)(n.span,{className:"mord mathnormal mtight",children:"s"})]})})]})})})})})]})]})})]})," \u500B\u6876)\uFF0C\u5728\u9019\u4E9B\u6578\u5B57\u4E4B\u5F8C\uFF0C\u6211\u5011\u5C31\u8981\u958B\u59CB\u6578 ",(0,l.jsx)(n.code,{children:"leading zeros"})," \u7684\u6578\u91CF\u76F4\u5230\u9047\u5230\u7B2C\u4E00\u500B ",(0,l.jsx)(n.code,{children:"1"})," \u70BA\u6B62 (\u5305\u542B ",(0,l.jsx)(n.code,{children:"1"}),")\uFF0C\u518D\u628A ",(0,l.jsx)(n.code,{children:"leading zeros"})," \u53D6\u6700\u5927\u503C\u4E4B\u5F8C\u653E\u9032\u6876\u88E1\u9762\uFF0C\u6700\u5F8C\u518D\u7528\u9019\u4E9B\u6876\u4F86\u4F30\u8A08\u4E0D\u91CD\u8907\u7684\u5143\u7D20\u7684\u6578\u91CF\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u9019\u500B task \u6709\u56DB\u500B function \u9700\u8981\u5BE6\u4F5C\uFF0C\u5206\u5225\u662F ",(0,l.jsx)(n.code,{children:"HyperLogLog(inital_bits)"}),", ",(0,l.jsx)(n.code,{children:"PositionOfLeftmostOne()"}),", ",(0,l.jsx)(n.code,{children:"AddElem(val)"}),", \u548C ",(0,l.jsx)(n.code,{children:"ComputeCardinality()"}),"\uFF0C\u4E26\u4E14\u6709\u5169\u500B\u5BEB\u597D\u7684 function\uFF0C\u5206\u5225\u662F ",(0,l.jsx)(n.code,{children:"ComputeBinary(hash_t hash)"})," \u548C ",(0,l.jsx)(n.code,{children:"CalculateHash(...)"}),"\uFF0C\u9019\u5169\u500B function \u5206\u5225\u662F\u7528\u4F86\u5C07 hash \u503C\u8F49\u6210\u4E8C\u9032\u4F4D\u7684\u6578\u5B57\u548C\u8A08\u7B97 hash \u503C\u7684\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"HyperLogLog(int initial_bits)"})," : \u9019\u500B constructor \u6703\u521D\u59CB\u5316\u6876\u7684\u6578\u91CF\uFF0C\u4E26\u4E14\u5C07\u6240\u6709\u7684\u6876\u7684\u503C\u8A2D\u6210 0\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u9700\u8981\u8655\u7406\u50B3\u9032\u4F86\u7684 ",(0,l.jsx)(n.code,{children:"n_bits"})," \u6709\u53EF\u80FD\u6703\u662F\u8CA0\u6578\u7684\u60C5\u6CC1"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"PositionOfLeftmostOne()"})," : \u9019\u500B function \u6703\u8A08\u7B97\u4E8C\u9032\u4F4D\u8868\u793A\u6CD5\u4E2D\u5F9E bucket_index \u7D50\u675F\u5F8C\u7684\u4E0B\u4E00\u500B bit \u958B\u59CB\u5230\u7B2C\u4E00\u500B ",(0,l.jsx)(n.code,{children:"1"})," \u7684\u4F4D\u7F6E\uFF0C\u8981\u7279\u5225\u6CE8\u610F\u7684\u662F ",(0,l.jsx)(n.code,{children:"1"})," \u7684\u4F4D\u7F6E\u4E5F\u9700\u8981\u8A08\u7B97\uFF0C\u4E26\u4E14\u5982\u679C ",(0,l.jsx)(n.code,{children:"n_bits"})," \u70BA 0\uFF0C\u4E5F\u9700\u8981\u4FDD\u7559\u7B2C\u4E00\u500B bit \u7576\u4F5C index"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"AddElem(val)"})," : \u9019\u500B function \u6703\u5C07\u50B3\u9032\u4F86\u7684 ",(0,l.jsx)(n.code,{children:"val"})," \u505A hash\uFF0C\u7136\u5F8C\u5C07\u9019\u500B hash \u503C\u8F49\u6210\u4E8C\u9032\u4F4D\u7684\u6578\u5B57\uFF0C\u63A5\u8457\u8A08\u7B97\u6876\u7684 index \u548C ",(0,l.jsx)(n.code,{children:"leading zeros"})," \u7684\u6578\u91CF\uFF0C\u6700\u5F8C\u53D6\u6700\u5927\u503C\u653E\u9032\u6876\u88E1\u9762"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ComputeCardinality()"})," : \u9019\u500B function \u6703\u56DE\u50B3\u8A08\u7B97\u5F8C\u7684 cardinality\uFF0C\u4F9D\u7167\u516C\u5F0F\u4F86\u5BEB\u5373\u53EF\uFF0C\u6700\u5F8C\u8A18\u5F97\u7528 ",(0,l.jsx)(n.code,{children:"std::floor"})," \u4F86\u53D6\u6574\u6578\uFF0C\u4E26\u4E14\u8981\u6CE8\u610F ",(0,l.jsx)(n.code,{children:"n_bits"})," \u70BA 0 \u7684\u60C5\u6CC1"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"task-2-presto-hyperloglog",children:"Task 2: Presto Hyperloglog"}),"\n",(0,l.jsx)(n.p,{children:"\u9019\u500B task \u4E3B\u8981\u662F\u8981\u5BE6\u4F5C Presto \u7684 Hyperloglog\uFF0C\u662F\u4E00\u7A2E Hyperloglog \u7684\u4FEE\u6539\u7248\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728\u9019\u500B\u4FEE\u6539\u7248\u4E2D\uFF0C",(0,l.jsx)(n.code,{children:"leading zeros"})," \u7684\u5132\u5B58\u548C\u8A08\u7B97\u65B9\u5F0F\u90FD\u6709\u6240\u6539\u8B8A\u3002\n\u5132\u5B58\u6703\u5206\u6210\u5169\u500B\u90E8\u5206\uFF0C\u5206\u5225\u662F 4 bits \u7684 ",(0,l.jsx)(n.code,{children:"dense_bucket_"})," \u8DDF 3 bits \u7684 ",(0,l.jsx)(n.code,{children:"overflow_bucket_"}),"\u3002\n\u8A08\u7B97\u65B9\u5F0F\u662F\u5C07 ",(0,l.jsx)(n.code,{children:"leading zeros"})," \u6539\u6210\u5F9E\u6700\u53F3\u908A\u958B\u59CB\u53D6\u503C\u5230\u7B2C\u4E00\u500B ",(0,l.jsx)(n.code,{children:"1"})," \u7684\u4F4D\u7F6E (\u4E0D\u5305\u542B ",(0,l.jsx)(n.code,{children:"1"}),")\uFF0C\u7136\u5F8C\u5C07\u9019\u500B\u503C\u653E\u9032 ",(0,l.jsx)(n.code,{children:"dense_bucket_"})," \u88E1\u9762\uFF0C\u5982\u679C\u9019\u500B\u503C\u8D85\u904E 4 bits\uFF0C\u518D\u628A\u591A\u9918\u7684\u90E8\u5206\u653E\u5230 ",(0,l.jsx)(n.code,{children:"overflow_bucket_"})," \u88E1\u9762\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u9019\u500B task \u4E3B\u8981\u6709\u4E09\u500B function \u9700\u8981\u5BE6\u4F5C\uFF0C\u5206\u5225\u662F ",(0,l.jsx)(n.code,{children:"PrestoHyperLogLog(initial_bits)"}),"\u3001",(0,l.jsx)(n.code,{children:"AddElem(val)"})," \u548C ",(0,l.jsx)(n.code,{children:"ComputeCardinality()"}),"\uFF0C\u9019\u4E09\u500B function \u7684\u908F\u8F2F\u548C Hyperloglog \u7684\u5DEE\u4E0D\u591A\uFF0C\u53EA\u662F\u8981\u6CE8\u610F ",(0,l.jsx)(n.code,{children:"dense_bucket_"})," \u548C ",(0,l.jsx)(n.code,{children:"overflow_bucket_"})," \u7684\u8655\u7406\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"PrestoHyperLogLog(int initial_bits)"})," : \u8207 task 1 \u985E\u4F3C\uFF0C\u53EA\u662F\u6539\u6210\u8981\u521D\u59CB\u5316 ",(0,l.jsx)(n.code,{children:"dense_bucket_"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"AddElem(val)"})," : \u8207 task 1 \u985E\u4F3C\uFF0C\u53EA\u662F\u8981\u6CE8\u610F\u5C07 ",(0,l.jsx)(n.code,{children:"leading zeros"})," \u7684\u8A08\u7B97\u65B9\u5F0F\u6539\u6210\u5F9E\u6700\u53F3\u908A\u958B\u59CB\u53D6\u503C\u5230\u7B2C\u4E00\u500B ",(0,l.jsx)(n.code,{children:"1"})," \u7684\u4F4D\u7F6E (\u4E0D\u5305\u542B ",(0,l.jsx)(n.code,{children:"1"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ComputeCardinality()"})," : \u8207 task 1 \u985E\u4F3C\uFF0C\u53EA\u662F\u5C07 ",(0,l.jsx)(n.code,{children:"overflow_bucket_"})," \u5DE6\u79FB 4 bits \u518D\u76F8\u52A0"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"submit",children:"Submit"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u8981\u8A3B\u518A GradeScope\uFF0C\u53EF\u4EE5\u53C3\u8003 ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/qq_40878302/article/details/136005292",children:"\u9019\u500B\u7DB2\u7AD9"})," \u8DDF ",(0,l.jsx)(n.a,{href:"https://15445.courses.cs.cmu.edu/fall2024/faq.html",children:"\u5B98\u7DB2"}),"\u3002"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5C07 ",(0,l.jsx)(n.code,{children:"/test/primer/hyperloglog_test.cpp"})," \u7684\u6240\u6709 test case \u4E2D\u7684 ",(0,l.jsx)(n.code,{children:"DISABLE_"})," \u90FD\u79FB\u9664\uFF0C\u8209\u4F8B\u4F86\u8AAA :"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",metastring:'title="test/primer/hyperloglog_test.cpp"',children:"TEST(HyperLogLogTest, DISABLE_BasicTest1) {}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6539\u6210"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",metastring:'title="test/primer/hyperloglog_test.cpp"',children:"TEST(HyperLogLogTest, BasicTest1) {}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u9019\u6A23\u5C31\u53EF\u4EE5\u57F7\u884C\u6240\u6709\u7684 test case \u4E86\u3002"}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"\u91CD\u65B0\u7DE8\u8B6F\u4E26\u6E2C\u8A66\u6240\u6709\u7684 test case"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_C_COMPILER=/usr/bin/clang-14 -DCMAKE_CXX_COMPILER=/usr/bin/clang++-14 -B build\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd build\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"make -j$(nproc) hyperloglog_test\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"./test/hyperloglog_test\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u4E26\u78BA\u8A8D\u6240\u6709\u7684 test case \u90FD\u80FD\u901A\u904E\uFF0C\u4EE3\u8868\u6210\u529F\u5B8C\u6210\u4E86\u9019\u500B\u4F5C\u696D\u3002"}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsxs)(n.li,{children:["\u4FEE\u6539 ",(0,l.jsx)(n.code,{children:"CMakeLists.txt"}),"\uFF0C\u5C07 ",(0,l.jsx)(n.code,{children:"P0_FILES"})," \u8A2D\u5B9A\u70BA\u4EE5\u4E0B (\u9700\u8981\u91CD\u65B0\u57F7\u884C ",(0,l.jsx)(n.code,{children:"cmake"})," \u6307\u4EE4\u4F86\u66F4\u65B0 makefile) :"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:'title="CMakeLists.txt" showLineNumbers {6}',children:'set(P0_FILES\n        "src/include/primer/hyperloglog.h"\n        "src/include/primer/hyperloglog_presto.h"\n        "src/primer/hyperloglog.cpp"\n        "src/primer/hyperloglog_presto.cpp"\n        "GRADESCOPE.md"\n)\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsx)(n.li,{children:"\u9032\u884C\u6392\u7248\uFF0C\u78BA\u5B9A\u6D88\u9664\u6240\u6709 error \u548C warning (\u7279\u5225\u662F check-clang-tidy-p0) :"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"make format\nmake check-lint\nmake check-clang-tidy-p0\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsxs)(n.li,{children:["\u7C3D\u540D\uFF0C\u6703\u7522\u751F\u4E00\u500B ",(0,l.jsx)(n.code,{children:"GRADESCOPE.md"})," :"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python3 gradescope_sign.py\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"6",children:["\n",(0,l.jsxs)(n.li,{children:["\u7E73\u4EA4\u4F5C\u696D\uFF0C\u53EF\u80FD\u9700\u8981\u5148\u57F7\u884C ",(0,l.jsx)(n.code,{children:"sudo apt-get install zip"})," \u4F86\u5B89\u88DD ",(0,l.jsx)(n.code,{children:"zip"}),"\uFF0C\u7136\u5F8C\u57F7\u884C\u4EE5\u4E0B\u6307\u4EE4 :"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"make submit-p0\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"7",children:["\n",(0,l.jsxs)(n.li,{children:["\u4E0A\u50B3 ",(0,l.jsx)(n.code,{children:".zip"})," \u6A94\u5230 GradeScope"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},50065:function(e,n,s){s.d(n,{Z:()=>t,a:()=>c});var i=s(67294);let l={},r=i.createContext(l);function c(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);