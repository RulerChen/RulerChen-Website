"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["8738"],{61326:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>r,default:()=>E,toc:()=>t,metadata:()=>i,assets:()=>a,contentTitle:()=>c});var i=JSON.parse('{"id":"CMU15-445/c02","title":"Modern SQL","description":"CMU15-445/645 Modern SQL","source":"@site/docs/CMU15-445/c02.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c02","permalink":"/RulerChen-Website/docs/CMU15-445/c02","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c02.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1754151222000,"sidebarPosition":2,"frontMatter":{"title":"Modern SQL","sidebar_position":2,"description":"CMU15-445/645 Modern SQL","keywords":["CMU15-445/645","Modern SQL","CMU15-445/645 \u7B46\u8A18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Relational Model & Algebra","permalink":"/RulerChen-Website/docs/CMU15-445/c01"},"next":{"title":"Database Storage","permalink":"/RulerChen-Website/docs/CMU15-445/c03"}}'),d=s(85893),l=s(50065);let r={title:"Modern SQL",sidebar_position:"2",description:"CMU15-445/645 Modern SQL",keywords:["CMU15-445/645","Modern SQL","CMU15-445/645 \u7B46\u8A18"],tags:["CMU15-445"]},c=void 0,a={},t=[{value:"SQL History",id:"sql-history",level:2},{value:"SQL Introduction",id:"sql-introduction",level:2},{value:"SQL Syntax",id:"sql-syntax",level:2},{value:"Joins",id:"joins",level:3},{value:"Aggregates",id:"aggregates",level:3},{value:"String Operations",id:"string-operations",level:3},{value:"Date and Time",id:"date-and-time",level:3},{value:"Output Redirection",id:"output-redirection",level:3},{value:"Output Control",id:"output-control",level:3},{value:"Window Functions",id:"window-functions",level:3},{value:"Nested Queries",id:"nested-queries",level:3},{value:"Common Table Expressions",id:"common-table-expressions",level:3}];function o(n){let e={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...n.components},{Head:i}=e;return i||function(n,e){throw Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i,{children:(0,d.jsx)("title",{children:"CMU 15-445 Modern SQL"})}),"\n",(0,d.jsx)(e.h2,{id:"sql-history",children:"SQL History"}),"\n",(0,d.jsx)(e.p,{children:"1971 \u5E74\uFF0CIBM \u767C\u660E\u4E86\u7B2C\u4E00\u500B\u67E5\u8A62\u8A9E\u8A00\u53EB\u505A SEQUEL (Structured English Query Language)\uFF0C\u63A5\u8457\u53C8\u5728 1983 \u5E74\u63A8\u51FA\u4E86\u63A1\u7528\u4E86\u5176\u8A9E\u6CD5\u7684 DB2\uFF0CSEQUEL \u4E5F\u96A8\u4E4B\u6539\u540D\u70BA SQL (Structured Query Language)\uFF0C\u4E26\u52A0\u5165\u4E86 ANSI (1986) \u548C ISO (1987) \u7684\u6A19\u6E96\u3002"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"SQL:1999 Regular expressions, Triggers"}),"\n",(0,d.jsx)(e.li,{children:"SQL:2003 XML, Windows, Sequences"}),"\n",(0,d.jsx)(e.li,{children:"SQL:2008 Truncation, Fancy sorting"}),"\n",(0,d.jsx)(e.li,{children:"SQL:2011 Temporal DBs, Pipelined DML"}),"\n",(0,d.jsx)(e.li,{children:"SQL:2016 JSON, Polymorphic tables"}),"\n",(0,d.jsx)(e.li,{children:"SQL:2023 Property Graph Queries, Muti-Dim. Arrays"}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"sql-introduction",children:"SQL Introduction"}),"\n",(0,d.jsx)(e.p,{children:"\u8207\u50B3\u7D71\u7684 relational algebra \u76F8\u6BD4\uFF0CSQL \u63A1\u7528\u7684\u662F bag (\u7121\u5E8F\u53EF\u91CD\u8986) \u800C\u975E set (\u7121\u5E8F\u4E0D\u53EF\u91CD\u8986)\u3002"}),"\n",(0,d.jsx)(e.p,{children:"SQL \u8A9E\u6CD5\u53EF\u4EE5\u88AB\u5206\u70BA\u4E09\u985E :"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"DML (Data Manipulation Language) : \u67E5\u8A62\u3001\u63D2\u5165\u3001\u66F4\u65B0\u3001\u522A\u9664\u8CC7\u6599"}),"\n",(0,d.jsx)(e.li,{children:"DDL (Data Definition Language) : \u5B9A\u7FA9 table, view, index \u7B49\u7B49"}),"\n",(0,d.jsx)(e.li,{children:"DCL (Data Control Language) : \u5B9A\u7FA9\u6B0A\u9650 (\u8CC7\u5B89\u76F8\u95DC)"}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"sql-syntax",children:"SQL Syntax"}),"\n",(0,d.jsx)(e.p,{children:"\u63A5\u4E0B\u4F86\u6703\u4ECB\u7D39 SQL \u7684\u5E38\u7528\u8A9E\u6CD5\uFF0C\u4F7F\u7528\u7684\u8CC7\u6599\u8868\u5982\u4E0B :"}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.img,{alt:"sample table",src:s(20213).Z+"",width:"961",height:"538"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"CREATE TABLE student(\n    sid INT PRIMARY KEY,\n    name VARCHAR(16),\n    login VARCHAR(32) UNIQUE,\n    age SMALLINT,\n    gpa FLOAT\n);\n\nCREATE TABLE course(\n    cid VARCHAR(32) PRIMARY KEY,\n    name VARCHAR(32) NOT NULL\n);\n\nCREATE TABLE enrolled(\n    sid INT REFERENCES student(sid),\n    cid VARCHAR(32) REFERENCES course(cid),\n    grade CHAR(1)\n);\n\nINSERT INTO student (sid, name, login, age, gpa) VALUES\n(53666, 'RZA', 'rza@cs', 44, 4.0),\n(53688, 'Bieber', 'jbieber@cs', 27, 3.9),\n(53655, 'Tupac', 'shakur@cs', 25, 3.5);\n\nINSERT INTO course (cid, name) VALUES\n('15-445', 'Database Systems'),\n('15-721', 'Advanced Database Systems'),\n('15-826', 'Data Mining'),\n('15-799', 'Special Topics in Databases');\n\nINSERT INTO enrolled (sid, cid, grade) VALUES\n(53666, '15-445', 'C'),\n(53688, '15-721', 'A'),\n(53688, '15-826', 'B'),\n(53655, '15-445', 'B'),\n(53666, '15-721', 'C');\n"})}),"\n",(0,d.jsx)(e.h3,{id:"joins",children:"Joins"}),"\n",(0,d.jsx)(e.p,{children:"\u53EF\u4EE5\u7528\u65BC\u9023\u63A5\u5169\u5F35 table\uFF0C\u4E26\u4E14\u53EF\u4EE5\u4F9D\u64DA\u4E0D\u540C\u7684\u689D\u4EF6\u4F86\u9023\u63A5\uFF0C\u4E3B\u8981\u6709\u4EE5\u4E0B\u5E7E\u7A2E join \u65B9\u6CD5 :"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"Inner Join : \u9810\u8A2D\u7684 join\uFF0C\u6703\u53D6\u51FA\u5169\u5F35 table \u4E2D\u7B26\u5408\u689D\u4EF6\u7684\u8CC7\u6599\u5217"}),"\n",(0,d.jsx)(e.li,{children:"Left Join : \u6703\u53D6\u51FA\u5DE6\u908A table \u4E2D\u7684\u6240\u6709\u8CC7\u6599\u5217\uFF0C\u4E26\u4E14\u5C07\u53F3\u908A table \u4E2D\u7B26\u5408\u689D\u4EF6\u7684\u8CC7\u6599\u5217\u9023\u63A5\u4E0A\u53BB"}),"\n",(0,d.jsx)(e.li,{children:"Right Join : \u6703\u53D6\u51FA\u53F3\u908A table \u4E2D\u7684\u6240\u6709\u8CC7\u6599\u5217\uFF0C\u4E26\u4E14\u5C07\u5DE6\u908A table \u4E2D\u7B26\u5408\u689D\u4EF6\u7684\u8CC7\u6599\u5217\u9023\u63A5\u4E0A\u53BB"}),"\n",(0,d.jsx)(e.li,{children:"Cross Join : \u6703\u53D6\u51FA\u5169\u5F35 table \u4E2D\u7684\u6240\u6709\u8CC7\u6599\u5217\u7684\u7B1B\u5361\u5152\u7A4D"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT *\nFROM student AS s\nJOIN enrolled AS e ON s.sid = e.sid;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"aggregates",children:"Aggregates"}),"\n",(0,d.jsxs)(e.p,{children:["\u5E38\u898B\u7684\u5305\u62EC ",(0,d.jsx)(e.code,{children:"COUNT"}),", ",(0,d.jsx)(e.code,{children:"SUM"}),", ",(0,d.jsx)(e.code,{children:"AVG"}),", ",(0,d.jsx)(e.code,{children:"MIN"}),", ",(0,d.jsx)(e.code,{children:"MAX"})," \u7B49\u7B49\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT COUNT(login) AS cnt\nFROM student\nWHERE login LIKE '%@cs';\n\nSELECT COUNT(*) AS cnt\nFROM student\nWHERE login LIKE '%@cs';\n\nSELECT COUNT(1) AS cnt\nFROM student\nWHERE login LIKE '%@cs';\n\nSELECT COUNT(1+1+1) AS cnt\nFROM student\nWHERE login LIKE '%@cs';\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT AVG(gpa), COUNT(sid)\nFROM student\nWHERE login LIKE '%@cs';\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT COUNT(DISTINCT login)\nFROM student\nWHERE login LIKE '%@cs';\n"})}),"\n",(0,d.jsx)(e.p,{children:"Aggregates function \u4E0D\u80FD\u8207\u5176\u4ED6\u6B04\u4F4D\u540C\u6642\u51FA\u73FE\u5728 SELECT \u5B50\u53E5\u4E2D\uFF0C\u56E0\u6B64\u4E0B\u9762\u7684\u5BEB\u6CD5\u662F\u932F\u8AA4\u7684 :"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT AVG(s.gpa), e.cid\nFROM enrolled AS e JOIN student AS s\nON e.sid = s.sid;\n"})}),"\n",(0,d.jsxs)(e.p,{children:["\u9700\u8981\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"GROUP BY"})," \u5B50\u53E5\u4F86\u89E3\u6C7A\u9019\u500B\u554F\u984C\uFF0C\u6240\u6709\u975E\u805A\u5408\u51FD\u6578\u7684\u6B04\u4F4D\u90FD\u5FC5\u9808\u51FA\u73FE\u5728 ",(0,d.jsx)(e.code,{children:"GROUP BY"})," \u5B50\u53E5\u4E2D\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT AVG(s.gpa), e.cid\nFROM enrolled AS e JOIN student AS s\nON e.sid = s.sid\nGROUP BY e.cid;\n"})}),"\n",(0,d.jsxs)(e.p,{children:["\u5982\u679C\u8981\u904E\u6FFE\u7684\u8A71\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"HAVING"})," \u5B50\u53E5"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT AVG(s.gpa), e.cid\nFROM enrolled AS e JOIN student AS s\nON e.sid = s.sid\nGROUP BY e.cid\nHAVING AVG(s.gpa) > 3.8;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"string-operations",children:"String Operations"}),"\n",(0,d.jsx)(e.p,{children:"\u4E0D\u540C\u7684\u8CC7\u6599\u5EAB\u6709\u4E0D\u540C\u7684\u6BD4\u8F03\u5B57\u4E32\u4EE5\u53CA\u5927\u5C0F\u5BEB\u654F\u611F\u5EA6\uFF0C\u5982\u4E0B\u5716\u6240\u793A :"}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.img,{alt:"string operations",src:s(45405).Z+"",width:"956",height:"534"})}),"\n",(0,d.jsxs)(e.p,{children:["\u4E5F\u53EF\u4EE5\u5728 ",(0,d.jsx)(e.code,{children:"LIKE"})," \u4E2D\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"%"})," \u6216 ",(0,d.jsx)(e.code,{children:"_"})," \u4F86\u9032\u884C\u5B57\u4E32\u6BD4\u8F03\uFF0C",(0,d.jsx)(e.code,{children:"%"})," \u4EE3\u8868\u4EFB\u610F\u9577\u5EA6\u7684\u5B57\u4E32 (\u5305\u62EC\u7A7A\u5B57\u4E32)\uFF0C",(0,d.jsx)(e.code,{children:"_"})," \u4EE3\u8868\u4EFB\u610F\u55AE\u4E00\u5B57\u5143\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT *\nFROM enrolled AS e\nWHERE e.cid LIKE '15-%';\n\nSELECT *\nFROM student AS s\nWHERE s.login LIKE '%@c_';\n"})}),"\n",(0,d.jsx)(e.p,{children:"SQL-92 \u4E2D\u5B9A\u7FA9\u4E86\u4E00\u4E9B\u5B57\u4E32\u51FD\u6578\uFF0C\u4F8B\u5982 :"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT SUBSTRING(name,1,5) AS abbrv_name\nFROM student WHERE sid = 53688\n\nSELECT * FROM student AS s\nWHERE UPPER(s.name) LIKE 'KAN%'\n"})}),"\n",(0,d.jsx)(e.p,{children:"\u9664\u6B64\u4E4B\u5916\uFF0C\u5404\u500B\u8CC7\u6599\u5EAB\u6709\u4E0D\u540C\u7684\u5B57\u4E32\u51FD\u6578\uFF0C\u4F8B\u5982 :"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"-- SQL-92\nSELECT name FROM student\nWHERE login = LOWER(name) || '@cs'\n\n-- MSSQL\nSELECT name FROM student\nWHERE login = LOWER(name) + '@cs'\n\n-- MySQL\nSELECT name FROM student\nWHERE login = CONCAT(LOWER(name), '@cs')\n"})}),"\n",(0,d.jsx)(e.h3,{id:"date-and-time",children:"Date and Time"}),"\n",(0,d.jsx)(e.p,{children:"\u4E0D\u540C\u7684 DBMS \u5DEE\u7570\u975E\u5E38\u5927\uFF0C\u6240\u4EE5\u9700\u8981\u4F9D\u64DA\u4E0D\u540C\u7684 DBMS \u4F86\u64B0\u5BEB SQL \u8A9E\u6CD5\u3002"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"-- PostgreSQL\nSELECT NOW();\n\nSELECT CURRENT_TIMESTAMP;\n\nSELECT CAST('2023-08-01' AS DATE) - CAST('2023-01-02' AS DATE) AS diff;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"output-redirection",children:"Output Redirection"}),"\n",(0,d.jsx)(e.p,{children:"\u53EF\u4EE5\u5C07\u67E5\u8A62\u7D50\u679C\u5132\u5B58\u5230\u53E6\u4E00\u5F35\u5DF2\u7D93\u5B58\u5728\u4E14\u6709\u76F8\u540C\u6B04\u4F4D\u7D50\u69CB\u7684 table \u4E2D\u3002"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"-- MySQL\nCREATE TABLE CourseIds (\n    SELECT DISTINCT cid FROM enrolled\n);\n\n-- PostgreSQL\nSELECT DISTINCT cid\nINTO TEMPORARY CourseIds\nFROM enrolled;\n"})}),"\n",(0,d.jsx)(e.p,{children:"\u4E5F\u53EF\u4EE5\u7528\u65BC insert \u8A9E\u53E5\u4E2D\uFF0C\u5C07\u67E5\u8A62\u7D50\u679C\u63D2\u5165\u5230\u53E6\u4E00\u5F35 table \u4E2D\u3002"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"-- PostgreSQL\nINSERT INTO CourseIds (cid)\n(SELECT DISTINCT cid FROM enrolled);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"output-control",children:"Output Control"}),"\n",(0,d.jsxs)(e.p,{children:["\u53EF\u4EE5\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"ORDER BY"})," \u5B50\u53E5\u4F86\u6392\u5E8F\u67E5\u8A62\u7D50\u679C\uFF0C\u8A9E\u6CD5\u70BA ",(0,d.jsx)(e.code,{children:"ORDER BY <column*> [ASC|DESC]"}),"\uFF0C\u9810\u8A2D\u70BA ASC\uFF0C\u53EF\u4EE5\u4F9D\u64DA\u591A\u500B\u6B04\u4F4D\u9032\u884C\u6392\u5E8F\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT sid, grade FROM enrolled\nWHERE cid = '15-721'\nORDER BY 2;\n\nSELECT sid FROM enrolled\nWHERE cid = '15-721'\nORDER BY grade DESC, sid ASC;\n"})}),"\n",(0,d.jsxs)(e.p,{children:["\u4E5F\u53EF\u4EE5\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"LIMIT"})," \u5B50\u53E5\u4F86\u9650\u5236\u67E5\u8A62\u7D50\u679C\u7684\u6578\u91CF\uFF0C\u8A9E\u6CD5\u70BA ",(0,d.jsx)(e.code,{children:"LIMIT <number> [OFFSET <number>]"}),"\uFF0C"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT * FROM student\nORDER BY sid\nLIMIT 1 OFFSET 1;\n"})}),"\n",(0,d.jsxs)(e.p,{children:["\u9084\u6709\u4E00\u7A2E\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"FETCH"})," \u7684\u65B9\u6CD5\uFF0C\u8A9E\u6CD5\u5982\u4E0B (WITH TIES \u6703\u5C07\u76F8\u540C\u7684\u8CC7\u6599\u5217\u5168\u90E8\u53D6\u51FA) :"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT sid, name\nFROM student\nWHERE login LIKE '%@cs'\nORDER BY gpa\nOFFSET 10 ROWS\nFETCH FIRST 10 ROWS WITH TIES;\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT sid, name\nFROM student\nWHERE login LIKE '%@cs'\nFETCH FIRST 10 ROWS ONLY;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"window-functions",children:"Window Functions"}),"\n",(0,d.jsxs)(e.p,{children:["\u53EF\u4EE5\u5C0D\u6BCF\u4E00\u500B\u6B04\u4F4D\u9032\u884C\u4E00\u4E9B\u904B\u7B97\uFF0C\u4F8B\u5982 ",(0,d.jsx)(e.code,{children:"RANK"}),"\u3001",(0,d.jsx)(e.code,{children:"ROW_NUMBER"}),"\u3001",(0,d.jsx)(e.code,{children:"DENSE_RANK"})," \u7B49\u7B49\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT *, ROW_NUMBER() OVER () AS row_num\nFROM enrolled;\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT cid, sid,\n       ROW_NUMBER() OVER (PARTITION BY cid)\nFROM enrolled\nORDER BY cid;\n"})}),"\n",(0,d.jsx)(e.p,{children:"\u9078\u6BCF\u5802\u8AB2\u6210\u7E3E\u6700\u9AD8\u7684\u5B78\u751F"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT * FROM (\n  SELECT *,\n         RANK() OVER (PARTITION BY cid ORDER BY grade ASC) AS rank\n    FROM enrolled\n  ) AS ranking\nWHERE ranking.rank = 1;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"nested-queries",children:"Nested Queries"}),"\n",(0,d.jsx)(e.p,{children:"\u5305\u542B\u4E86 inner query \u4EE5\u53CA outer query\uFF0Cinner query \u6703\u5148\u57F7\u884C\uFF0C\u7136\u5F8C\u518D\u57F7\u884C outer query\uFF0C\u4E14 inner query \u53EF\u4EE5\u4F7F\u7528 outer query \u4E2D\u7684\u6B04\u4F4D\u3002"}),"\n",(0,d.jsxs)(e.p,{children:["\u53EF\u4EE5\u652F\u6301 ",(0,d.jsx)(e.code,{children:"NOT"}),"\u3001",(0,d.jsx)(e.code,{children:"IN"}),"\u3001",(0,d.jsx)(e.code,{children:"ANY"}),"\u3001",(0,d.jsx)(e.code,{children:"ALL"}),"\u3001",(0,d.jsx)(e.code,{children:"EXISTS"})," \u7B49\u7B49\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT sid, name\nFROM student\nWHERE sid >= ALL (\n    SELECT sid FROM enrolled\n);\n\nSELECT sid, name FROM student\nWHERE sid IN (\n    SELECT MAX(sid) FROM enrolled\n);\n\nSELECT sid, name FROM student\nWHERE sid IN (\n    SELECT sid\n    FROM enrolled\n    ORDER BY sid DESC LIMIT 1\n);\n"})}),"\n",(0,d.jsxs)(e.p,{children:["\u9664\u6B64\u4E4B\u5916\u4E5F\u53EF\u4EE5\u4F7F\u7528 ",(0,d.jsx)(e.code,{children:"LATERAL"})," \u5B50\u53E5\u4F86\u9032\u884C\u67E5\u8A62\uFF0C",(0,d.jsx)(e.code,{children:"LATERAL"})," \u5B50\u53E5\u53EF\u4EE5\u5C07\u4E00\u500B\u67E5\u8A62\u7684\u7D50\u679C\u4F5C\u70BA\u53E6\u4E00\u500B\u67E5\u8A62\u7684\u8F38\u5165\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT *\nFROM (\n    SELECT 1 AS x\n) AS t1,\nLATERAL (\n    SELECT t1.x+1 AS y\n) AS t2;\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"SELECT * FROM course AS c,\nLATERAL (\n    SELECT COUNT(*) AS cnt\n    FROM enrolled\n    WHERE enrolled.cid = c.cid\n) AS t1,\nLATERAL (\n    SELECT AVG(gpa) AS avg\n    FROM student AS s\n    JOIN enrolled AS e ON s.sid = e.sid\n    WHERE e.cid = c.cid\n) AS t2;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"common-table-expressions",children:"Common Table Expressions"}),"\n",(0,d.jsx)(e.p,{children:"ctes \u53EF\u4EE5\u5E6B\u52A9\u6211\u5011\u5C07\u8907\u96DC\u7684\u67E5\u8A62\u5206\u89E3\u6210\u66F4\u5C0F\u7684\u90E8\u5206\u4E26\u4E14\u91CD\u8907\u4F7F\u7528\u3002"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"WITH cteName AS (\n    SELECT 1\n)\nSELECT * FROM cteName;\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-SQL",children:"WITH cteSource(maxId) AS (\n    SELECT MAX(sid)\n    FROM enrolled\n)\nSELECT name\nFROM student, cteSource\nWHERE student.sid = cteSource.maxId;\n"})})]})}function E(n={}){let{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(o,{...n})}):o(n)}},45405:function(n,e,s){s.d(e,{Z:()=>i});let i=s.p+"assets/images/image-1-b351289ca19478bb368d9b9b54a7a15c.png"},20213:function(n,e,s){s.d(e,{Z:()=>i});let i=s.p+"assets/images/image-bfa1fb8a253fc0007ee6f232d7246bed.png"},50065:function(n,e,s){s.d(e,{Z:()=>c,a:()=>r});var i=s(67294);let d={},l=i.createContext(d);function r(n){let e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:r(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);