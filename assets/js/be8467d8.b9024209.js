"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["3733"],{42854:function(e,i,l){l.r(i),l.d(i,{frontMatter:()=>a,default:()=>h,toc:()=>c,metadata:()=>r,assets:()=>t,contentTitle:()=>d});var r=JSON.parse('{"id":"CMU15-445/c13","title":"Query Execution","description":"CMU15-445/645 Query Execution","source":"@site/docs/CMU15-445/c13.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c13","permalink":"/RulerChen-Website/docs/CMU15-445/c13","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c13.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1754151222000,"sidebarPosition":13,"frontMatter":{"title":"Query Execution","sidebar_position":13,"description":"CMU15-445/645 Query Execution","keywords":["CMU15-445/645","Query Execution","CMU15-445/645 \u7B46\u8A18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Joins Algorithms","permalink":"/RulerChen-Website/docs/CMU15-445/c12"},"next":{"title":"Query Planning & Optimization","permalink":"/RulerChen-Website/docs/CMU15-445/c15"}}'),n=l(85893),s=l(50065);let a={title:"Query Execution",sidebar_position:"13",description:"CMU15-445/645 Query Execution",keywords:["CMU15-445/645","Query Execution","CMU15-445/645 \u7B46\u8A18"],tags:["CMU15-445"]},d=void 0,t={},c=[{value:"Query Execution",id:"query-execution",level:2},{value:"Processing model",id:"processing-model",level:2},{value:"Iterator Model",id:"iterator-model",level:3},{value:"Materialization Model",id:"materialization-model",level:3},{value:"Vectorized / Batch Model",id:"vectorized--batch-model",level:3},{value:"Access Methods",id:"access-methods",level:2},{value:"Sequential Scan",id:"sequential-scan",level:3},{value:"Data Skipping",id:"data-skipping",level:4},{value:"Index Scan",id:"index-scan",level:3},{value:"Multi-Index Scan",id:"multi-index-scan",level:3},{value:"Modification Queries",id:"modification-queries",level:2},{value:"Expression Evaluation",id:"expression-evaluation",level:2},{value:"Scheduler",id:"scheduler",level:2},{value:"Parallel vs Distributed Databases",id:"parallel-vs-distributed-databases",level:2},{value:"Process Model",id:"process-model",level:2},{value:"Process per Worker",id:"process-per-worker",level:3},{value:"Thread per Worker",id:"thread-per-worker",level:3},{value:"Embedded DBMS",id:"embedded-dbms",level:3},{value:"Inter-Query Parallelism",id:"inter-query-parallelism",level:2},{value:"Intra-Query parallelism",id:"intra-query-parallelism",level:2},{value:"Intra-Operator Parallelism (Horizontal)",id:"intra-operator-parallelism-horizontal",level:3},{value:"Inter-Operator Parallelism (Vertical)",id:"inter-operator-parallelism-vertical",level:3},{value:"Bushy Parallelism",id:"bushy-parallelism",level:3},{value:"Observation",id:"observation",level:3},{value:"I/O Parallelism",id:"io-parallelism",level:2},{value:"Multi-Disk I/O Parallelism",id:"multi-disk-io-parallelism",level:3},{value:"Database Partitioning",id:"database-partitioning",level:3}];function o(e){let i={code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",ul:"ul",...(0,s.a)(),...e.components},{Head:r}=i;return r||function(e,i){throw Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{children:(0,n.jsx)("title",{children:"CMU 15-445 Query Execution"})}),"\n",(0,n.jsx)(i.h2,{id:"query-execution",children:"Query Execution"}),"\n",(0,n.jsx)(i.p,{children:"query plan \u662F\u4E00\u500B\u7531 operator \u7D44\u6210\u7684 DAG (\u6709\u5411\u7121\u74B0\u5716)\uFF0C\u4F8B\u5982 scan\u3001join\u3001aggregation \u7B49\u7B49\uFF0C\u9019\u4E9B operator \u6703\u6309\u7167\u4E00\u5B9A\u7684\u9806\u5E8F\u57F7\u884C\uFF0C\u4E26\u4E14\u6BCF\u500B operator \u90FD\u6703\u6709\u4E00\u500B\u8F38\u5165\u548C\u8F38\u51FA\u3002"}),"\n",(0,n.jsx)(i.p,{children:"pipeline \u662F\u4E00\u6BB5\u9023\u7E8C\u7684\u904B\u7B97\u5143\u5E8F\u5217\uFF0C\u8CC7\u6599\u53EF\u4EE5\u5728\u4E0D\u7D93\u904E\u4E2D\u4ECB\u5132\u5B58\u7684\u60C5\u6CC1\u4E0B\u6301\u7E8C\u6D41\u52D5\u3002\u800C pipeline brokers \u5247\u662F\u6307\u90A3\u4E9B\u6703\u963B\u585E pipeline \u7684\u904B\u7B97\u5143 (\u9700\u8981\u7B49\u6240\u6709\u7684\u5B50\u904B\u7B97\u5143\u90FD\u5B8C\u6210\u5F8C\u624D\u80FD\u7E7C\u7E8C\u8655\u7406\u7684\u904B\u7B97\u5143)\uFF0C\u5982 join\u3001subquery \u548C ORDER BY \u7B49\u3002"}),"\n",(0,n.jsx)(i.h2,{id:"processing-model",children:"Processing model"}),"\n",(0,n.jsx)(i.p,{children:"DBMS \u7684 processing model \u5B9A\u7FA9\u4E86\u7CFB\u7D71\u5982\u4F55\u57F7\u884C query plan \uFF0C\u4E3B\u8981\u5305\u542B\u4E86\u4E09\u7A2E\u6A21\u578B :"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Iterator Model"}),"\n",(0,n.jsx)(i.li,{children:"Materialization Model"}),"\n",(0,n.jsx)(i.li,{children:"Vectorized / Batch Model"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"iterator-model",children:"Iterator Model"}),"\n",(0,n.jsx)(i.p,{children:"Iterator \u6A21\u578B\uFF0C\u4E5F\u88AB\u7A31\u70BA Volcano model \u6216 Pipeline model\uFF0C\u662F\u6700\u5E38\u898B\u7684 processing model\uFF0C\u5E7E\u4E4E\u6BCF\u500B row-based \u7684 DBMS \u90FD\u6709\u4F7F\u7528\u9019\u7A2E\u6A21\u578B\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u9019\u500B\u6A21\u578B\u7684\u6838\u5FC3\u662F\u8B93\u6BCF\u500B\u8CC7\u6599\u5EAB operator \u90FD\u5BE6\u73FE\u4E00\u500B Next \u51FD\u6578\uFF0C\u4F7F\u67E5\u8A62\u8A08\u756B\u4E2D\u7684\u6BCF\u500B\u7BC0\u9EDE\u5728\u9700\u8981\u8CC7\u6599\u6642\uFF0C\u80FD\u5920\u5411\u5176\u5B50\u7BC0\u9EDE\u8ACB\u6C42\u4E0B\u4E00\u500B tuple (\u5982\u679C\u8CC7\u6599\u5DF2\u7D93\u56DE\u50B3\u5B8C\u7562\u5247\u8FD4\u56DE null)\uFF0C\u76F4\u5230\u67E5\u8A62\u8A08\u756B\u7684\u8449\u7BC0\u9EDE\u767C\u51FA\u8CC7\u6599\u70BA\u6B62\u3002"}),"\n",(0,n.jsx)(i.p,{children:"Iterator \u6A21\u578B\u652F\u6301 pipelining\uFF0C\u9019\u4EE3\u8868 DBMS \u6703\u76E1\u91CF\u5C0D tuple \u9032\u884C\u8655\u7406\uFF0C\u7136\u5F8C\u5728\u8655\u7406\u4E0B\u4E00\u500B tuple\u3002\u6709\u4E9B operator (\u5982 join\u3001subquery \u548C ORDER BY \u7B49) \u5728\u8655\u7406\u6642\u6703\u963B\u585E\u76F4\u5230\u5B83\u5011\u7684\u6240\u6709\u5B50\u7BC0\u9EDE\u90FD\u767C\u51FA\u8CC7\u6599\u70BA\u6B62\uFF0C\u9019\u985E\u64CD\u4F5C\u7B26\u88AB\u7A31\u70BA Pipeline Breakers\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Iterator Model",src:l(34685).Z+"",width:"958",height:"535"})}),"\n",(0,n.jsx)(i.h3,{id:"materialization-model",children:"Materialization Model"}),"\n",(0,n.jsx)(i.p,{children:"\u6BCF\u500B operator \u90FD\u6709\u4E00\u500B output \u51FD\u6578\uFF0C\u6703\u4E00\u6B21\u6027\u8655\u7406\u5B8C\u6240\u6709 input \u4E26\u5C07\u7D50\u679C\u4E00\u6B21\u6027\u8FD4\u56DE\uFF0C\u8F38\u51FA\u53EF\u4EE5\u662F DSM \u6216 NSM \u7684\u5F62\u5F0F\u3002"}),"\n",(0,n.jsxs)(i.p,{children:["\u9019\u7A2E\u65B9\u6CD5\u66F4\u9069\u5408 OLTP \u7CFB\u7D71\uFF0C\u56E0\u70BA OLTP \u901A\u5E38\u53EA\u9808\u56DE\u50B3\u5C11\u91CF\u8CC7\u6599\uFF0C\u53EF\u4EE5\u6E1B\u5C11\u8ABF\u7528 ",(0,n.jsx)(i.code,{children:"Next"})," \u51FD\u6578\u7684\u6B21\u6578\u3002"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Materialization Model",src:l(83360).Z+"",width:"959",height:"539"})}),"\n",(0,n.jsx)(i.h3,{id:"vectorized--batch-model",children:"Vectorized / Batch Model"}),"\n",(0,n.jsx)(i.p,{children:"Vectorized / Batch Model \u662F\u4E00\u7A2E iterator \u548C materialization \u7684\u6DF7\u5408\u6A21\u578B\uFF0C\u5728\u8ABF\u7528 Next \u51FD\u6578\u6642\uFF0C\u6703\u4E00\u6B21\u6027\u56DE\u50B3\u4E00\u6279 tuple\uFF0C\u53EF\u4EE5\u6839\u64DA\u786C\u9AD4\u689D\u4EF6\u4F86\u8ABF\u6574 batch \u7684\u5927\u5C0F\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u9019\u7A2E\u65B9\u5F0F\u9069\u5408\u65BC OLAP \u7CFB\u7D71\uFF0C\u53EF\u4EE5\u6E1B\u5C11\u8ABF\u7528 Next \u51FD\u6578\u7684\u6B21\u6578\uFF0C\u4E26\u4E14\u53EF\u4EE5\u4F7F\u7528 SIMD \u6307\u4EE4\u96C6\u4F86\u6279\u91CF\u8655\u7406 tuple\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Vectorized / Batch Model",src:l(36859).Z+"",width:"961",height:"538"})}),"\n",(0,n.jsx)(i.h2,{id:"access-methods",children:"Access Methods"}),"\n",(0,n.jsx)(i.p,{children:"access method \u662F\u6307 DBMS \u5F9E table \u4E2D\u7372\u5F97\u8CC7\u6599\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u6709\u4EE5\u4E0B\u5E7E\u7A2E :"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Sequential Scan"}),"\n",(0,n.jsx)(i.li,{children:"Index Scan"}),"\n",(0,n.jsx)(i.li,{children:"Multi-Index Scan"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"sequential-scan",children:"Sequential Scan"}),"\n",(0,n.jsx)(i.p,{children:"sequential scan \u6307\u7684\u662F DBMS \u9010\u884C\u8B80\u53D6 table \u4E2D\u7684\u6240\u6709\u8CC7\u6599\uFF0C\u901A\u5E38\u6548\u80FD\u6703\u8F03\u5DEE\uFF0CDBMS \u6703\u7DAD\u8B77\u4E00\u500B cursor \u4F86\u8A18\u9304\u7576\u524D\u8B80\u53D6\u7684\u4F4D\u7F6E\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u6709\u8A31\u591A\u7684\u512A\u5316\u65B9\u6CD5\u53EF\u4EE5\u63D0\u5347 sequential scan \u7684\u6548\u80FD\uFF0C\u5982 :"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Prefetching"}),"\n",(0,n.jsx)(i.li,{children:"Buffer Pool Bypass"}),"\n",(0,n.jsx)(i.li,{children:"Parallelization (\u672C\u7BC0)"}),"\n",(0,n.jsx)(i.li,{children:"Late Materialization"}),"\n",(0,n.jsx)(i.li,{children:"Heap Clustering"}),"\n",(0,n.jsx)(i.li,{children:"Data Skipping (\u672C\u7BC0)"}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"data-skipping",children:"Data Skipping"}),"\n",(0,n.jsx)(i.p,{children:"\u6709\u5169\u7A2E\u65B9\u6CD5\u53EF\u4EE5\u5BE6\u73FE data skipping :"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Approximate Queries (\u6709\u640D\u7684) : \u5728\u8868\u4E2D\u9078\u53D6\u4E00\u500B\u5B50\u96C6\uFF0C\u4E26\u751F\u6210\u8FD1\u4F3C\u7684\u7D50\u679C"}),"\n",(0,n.jsx)(i.li,{children:"Zone Maps (\u7121\u640D\u7684) : \u5728\u6BCF\u500B page \u4E0A\u7DAD\u8B77\u4E00\u500B metadata (\u5982\u5E73\u5747\u503C\u3001\u6700\u5927\u6700\u5C0F\u503C)\uFF0C\u53EF\u4EE5\u5FEB\u901F\u5224\u65B7\u662F\u5426\u5305\u542B\u9700\u8981\u7684\u8CC7\u6599\u6216\u662F\u662F\u5426\u9700\u8981\u8A2A\u554F\u9019\u500B page"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"index-scan",children:"Index Scan"}),"\n",(0,n.jsx)(i.p,{children:"DBMS \u6703\u9078\u64C7\u4E00\u500B\u7D22\u5F15\u4F86\u5E6B\u52A9\u67E5\u8A62\uFF0C\u9078\u64C7\u7684\u4F9D\u64DA\u5982\u4E0B :"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"index \u5305\u542B\u4E86\u90A3\u4E9B\u5C6C\u6027"}),"\n",(0,n.jsx)(i.li,{children:"query \u4E2D\u5305\u542B\u4E86\u90A3\u4E9B\u5C6C\u6027"}),"\n",(0,n.jsx)(i.li,{children:"\u5C6C\u6027\u7684\u7BC4\u570D"}),"\n",(0,n.jsx)(i.li,{children:"\u8B02\u8A5E\u7D44\u5408 (AND\u3001OR)"}),"\n",(0,n.jsx)(i.li,{children:"\u7D22\u5F15\u9375\u662F\u5426\u552F\u4E00"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"multi-index-scan",children:"Multi-Index Scan"}),"\n",(0,n.jsx)(i.p,{children:"\u6709\u4E9B\u8CC7\u6599\u5EAB\u652F\u63F4\u591A\u7D22\u5F15\u7684\u67E5\u8A62\uFF0C\u53EF\u4EE5\u900F\u904E\u591A\u500B\u7D22\u5F15\u4F86\u5C07\u627E\u51FA\u6BCF\u500B\u5C0D\u61C9\u7684 record id \uFF0C\u4E26\u4E14\u5C07\u4ED6\u5011\u96C6\u5408\u8D77\u4F86\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u5982 PostgreSQL \u7684 Bitmap Index Scan\uFF0CMySQL \u7684 Index Merge \u7B49\u3002"}),"\n",(0,n.jsx)(i.h2,{id:"modification-queries",children:"Modification Queries"}),"\n",(0,n.jsxs)(i.p,{children:["DBMS \u4E2D\u7684 modification \u4E3B\u8981\u5305\u542B ",(0,n.jsx)(i.code,{children:"INSERT"}),"\u3001",(0,n.jsx)(i.code,{children:"UPDATE"})," \u548C ",(0,n.jsx)(i.code,{children:"DELETE"})," \u4E09\u7A2E\u64CD\u4F5C\uFF0C\u9019\u4E9B\u64CD\u4F5C\u6703\u5F71\u97FF\u5230 table \u4E2D\u7684\u8CC7\u6599\u3002"]}),"\n",(0,n.jsxs)(i.p,{children:["\u5728 ",(0,n.jsx)(i.code,{children:"UPDATE"})," \u8DDF ",(0,n.jsx)(i.code,{children:"DELETE"})," \u64CD\u4F5C\u4E2D\uFF0Cchild operator \u6703\u8DDF\u8E64\u5DF2\u7D93\u8655\u7406\u904E\u7684 tuple \u4E26\u8FD4\u56DE record id\uFF0C\u800C\u5728 ",(0,n.jsx)(i.code,{children:"INSERT"})," \u4E2D\u6709\u5169\u7A2E\u5BE6\u73FE\u65B9\u5F0F\uFF0C\u4E00\u7A2E\u662F\u81EA\u5DF1 materialize tuple\uFF0C\u53E6\u4E00\u7A2E\u662F\u63A5\u6536 child operator \u7684\u8F38\u51FA\u3002"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Modification Queries",src:l(92943).Z+"",width:"959",height:"540"})}),"\n",(0,n.jsx)(i.p,{children:"\u5982\u4E0A\u9762\u7684\u5716\uFF0C\u6211\u5011\u6709\u53EF\u80FD\u6703\u9047\u5230 Halloween Problem\uFF0C\u9019\u500B\u554F\u984C\u662F\u6307\u5728\u66F4\u65B0\u904E\u7A0B\u4E2D\uFF0C\u7531\u65BC\u66F4\u65B0\u5F8C\u7684 tuple \u4F4D\u7F6E\u53EF\u80FD\u6703\u6539\u8B8A\uFF0C\u6240\u4EE5\u53EF\u80FD\u6703\u66F4\u65B0\u5230\u5DF2\u7D93\u66F4\u65B0\u904E\u7684 tuple\u3002"}),"\n",(0,n.jsx)(i.h2,{id:"expression-evaluation",children:"Expression Evaluation"}),"\n",(0,n.jsxs)(i.p,{children:["DBMS \u6703\u5C07 ",(0,n.jsx)(i.code,{children:"WHERE"})," \u689D\u4EF6\u4E2D\u7684\u8868\u9054\u5F0F\u8F49\u63DB\u6210\u4E00\u500B expression tree\uFF0C\u904D\u6B77\u4E4B\u5F8C\u7522\u751F\u7D50\u679C\uFF0C\u53EF\u4EE5\u4F7F\u7528 JIT \u7DE8\u8B6F\u6280\u8853\u4F86\u52A0\u901F\u8868\u9054\u5F0F\u7684\u8A08\u7B97\u3002"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Expression Evaluation",src:l(20266).Z+"",width:"957",height:"538"})}),"\n",(0,n.jsx)(i.h2,{id:"scheduler",children:"Scheduler"}),"\n",(0,n.jsx)(i.p,{children:"scheduler \u7684\u529F\u7528\u662F\u5C07 data flow \u8DDF control flow \u9032\u884C\u6E05\u6670\u7684\u5206\u96E2\uFF0C\u9069\u5408\u5728 batch mode (\u4E00\u6B21\u6027\u8655\u7406\u4E00\u7D44\u8CC7\u6599) \u4E2D\u4F7F\u7528\uFF0C\u5C24\u5176\u662F\u5728 vectorization model \u4E2D\u3002"}),"\n",(0,n.jsx)(i.p,{children:"scheduler \u6703\u751F\u6210 work order\uFF0C\u4E26\u5C07\u5176\u653E\u5165 scheduling queue \u4E2D\uFF0C\u7136\u5F8C worker \u6703\u5F9E work queue \u4E2D\u53D6\u51FA work order \u4E26\u57F7\u884C\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Scheduler",src:l(76893).Z+"",width:"958",height:"537"})}),"\n",(0,n.jsx)(i.h2,{id:"parallel-vs-distributed-databases",children:"Parallel vs Distributed Databases"}),"\n",(0,n.jsx)(i.p,{children:"\u5728\u524D\u9762\u7684\u8A0E\u8AD6\u4E2D\uFF0C\u6211\u5011\u90FD\u53EA\u5C08\u6CE8\u5728 single worker \u7684\u74B0\u5883\u4E0B\uFF0C\u4F46\u662F\u5728\u73FE\u5BE6\u4E2D\uFF0C\u6211\u5011\u6703\u9700\u8981\u591A\u500B worker \u4F86\u5E73\u884C\u8655\u7406 query\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u5728\u5E73\u884C\u6216\u5206\u6563\u5F0F\u7684\u7CFB\u7D71\u4E2D\uFF0C\u8CC7\u6599\u5EAB\u6703\u5206\u5E03\u5728\u591A\u500B\u8CC7\u6E90\u4E2D\u4F86\u63D0\u9AD8 parallelism\uFF0C\u9019\u4E9B\u8CC7\u6E90\u53EF\u4EE5\u662F\u591A\u500B CPU\u3001\u591A\u500B\u786C\u789F\u3001\u591A\u500B\u6A5F\u5668\u7B49\uFF0C\u4F46\u5728\u4F7F\u7528\u8005\u7684\u89D2\u5EA6\uFF0C\u9019\u61C9\u8A72\u8DDF\u4E00\u500B\u55AE\u4E00\u7684\u8CC7\u6599\u5EAB\u662F\u4E00\u6A23\u7684\u3002"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Parallel Database","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"\u7269\u7406\u9023\u7D50\u8F03\u8FD1\uFF0C\u4E14\u6E9D\u901A\u5FEB"}),"\n",(0,n.jsx)(i.li,{children:"\u901A\u8A0A\u6210\u672C\u8F03\u5C0F"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Distributed Database","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"\u7BC0\u9EDE\u4E4B\u9593\u76F8\u8DDD\u8F03\u9060"}),"\n",(0,n.jsx)(i.li,{children:"\u901A\u8A0A\u6210\u672C\u8F03\u5927"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"process-model",children:"Process Model"}),"\n",(0,n.jsx)(i.p,{children:"process model \u5B9A\u7FA9\u4E86 DBMS \u7684\u591A\u7528\u6236\u5E73\u884C\u8655\u7406\u7684\u67B6\u69CB\uFF0C\u6211\u5011\u6703\u7528 worker \u9019\u500B\u8A5E\u4F86\u4EE3\u8868\u57F7\u884C\u7684\u55AE\u4F4D\uFF0C\u5B83\u53EF\u4EE5\u662F\u4E00\u500B process \u6216 thread\u3002"}),"\n",(0,n.jsx)(i.h3,{id:"process-per-worker",children:"Process per Worker"}),"\n",(0,n.jsx)(i.p,{children:"client \u7AEF\u7684\u8ACB\u6C42\u7D93\u904E dispatcher \u5F8C\u6703\u7531 dispatcher \u5206\u914D\u4E00\u500B worker \u4F86\u8655\u7406\uFF0C\u6BCF\u500B worker \u90FD\u662F\u4E00\u500B\u7368\u7ACB\u7684 process\u3002"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"\u4F9D\u8CF4\u65BC\u4F5C\u696D\u7CFB\u7D71\u7684 scheduler"}),"\n",(0,n.jsx)(i.li,{children:"\u4F7F\u7528 shared memory \u4F86\u5132\u5B58\u5168\u5C40\u7684\u8CC7\u6599\u7D50\u69CB"}),"\n",(0,n.jsx)(i.li,{children:"\u55AE\u4E00\u7684 process crash \u4E26\u4E0D\u6703\u9020\u6210\u6574\u500B\u7CFB\u7D71\u7684 crash"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"\u9019\u7A2E process model \u4E3B\u8981\u51FA\u73FE\u5728 pthread \u9084\u6C92\u6709\u7A69\u5B9A\u7684\u6642\u5019\uFF0C\u4E3B\u8981\u662F\u70BA\u4E86\u89E3\u6C7A\u79FB\u690D\u6027\u554F\u984C\uFF0C\u5982\u820A\u7248\u7684 Oracle \u548C DB2 \u4EE5\u53CA\u73FE\u5728\u7684 PostgreSQL\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Process per Worker",src:l(65387).Z+"",width:"961",height:"538"})}),"\n",(0,n.jsx)(i.h3,{id:"thread-per-worker",children:"Thread per Worker"}),"\n",(0,n.jsx)(i.p,{children:"DBMS \u7531\u4E00\u500B process \u548C\u591A\u500B worker thread \u7D44\u6210\u3002"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"DBMS \u901A\u5E38\u6703\u81EA\u5DF1\u7BA1\u7406 scheduler"}),"\n",(0,n.jsx)(i.li,{children:"\u53EF\u80FD\u6C92\u6709 dispatcher"}),"\n",(0,n.jsx)(i.li,{children:"thread crash \u53EF\u80FD\u5C0E\u81F4\u7CFB\u7D71\u5D29\u6F70"}),"\n",(0,n.jsx)(i.li,{children:"\u7531\u65BC\u4F7F\u7528 thread\uFF0Ccontext switch \u7684\u6210\u672C\u8F03\u4F4E\uFF0C\u4E14\u4E0D\u9700\u8981\u7DAD\u8B77 shared model"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"\u9019\u7A2E process model \u662F\u8FD1\u5E74\u4F86\u6700\u6D41\u884C\u7684\uFF0C\u5982 MySQL\u3001SQL Server\u3001MySQL \u4EE5\u53CA\u65B0\u7248\u7684 Oracle \u90FD\u652F\u6301\u9019\u7A2E\u6A21\u578B\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u5C0D\u65BC\u6BCF\u500B query plan \u4F86\u8AAA\uFF0Cscheduler \u53EF\u4EE5\u6C7A\u5B9A"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"\u8981\u88AB\u62C6\u6210\u591A\u5C11\u500B tasks"}),"\n",(0,n.jsx)(i.li,{children:"\u4F7F\u7528\u591A\u5C11\u500B cpu core"}),"\n",(0,n.jsx)(i.li,{children:"\u5C07 tasks \u5206\u914D\u7D66\u54EA\u4E9B core"}),"\n",(0,n.jsx)(i.li,{children:"\u8F38\u51FA\u8981\u88AB\u653E\u5728\u54EA\u88E1"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Thread per Worker",src:l(19349).Z+"",width:"959",height:"540"})}),"\n",(0,n.jsx)(i.h3,{id:"embedded-dbms",children:"Embedded DBMS"}),"\n",(0,n.jsx)(i.p,{children:"Embedded DBMS \u662F\u4E00\u7A2E\u8207\u50B3\u7D71 client-server \u67B6\u69CB\u7684 DBMS \u4E0D\u540C\u7684\u67B6\u69CB\uFF0C\u5728\u9019\u7A2E\u67B6\u69CB\u4E2D\uFF0CDBMS \u6703\u76F4\u63A5\u5728\u8DDF\u61C9\u7528\u7A0B\u5F0F\u76F8\u540C\u7684 address space \u4E2D\u904B\u884C\uFF0C\u4E26\u7531\u61C9\u7528\u7A0B\u5F0F\u8CA0\u8CAC task \u548C scheduler \u7684\u7BA1\u7406\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u5E38\u898B\u7684\u6709 SQLite\u3001DuckDB\u3001RocksDB \u7B49\u3002"}),"\n",(0,n.jsx)(i.h2,{id:"inter-query-parallelism",children:"Inter-Query Parallelism"}),"\n",(0,n.jsx)(i.p,{children:"Inter-Query Parallelism \u662F\u6307\u540C\u6642\u57F7\u884C\u591A\u500B\u67E5\u8A62\u7684\u80FD\u529B\uFF0C\u5982\u679C\u90FD\u662F read only \u7684\u67E5\u8A62\uFF0C\u90A3\u9EBC\u4E0D\u9700\u8981\u591A\u9918\u7684\u5354\u8ABF\uFF0C\u5982\u679C\u6709 write \u64CD\u4F5C\uFF0C\u5247\u9700\u8981\u66F4\u591A\u7684\u6A5F\u5236\u4F86\u78BA\u4FDD\u4E00\u81F4\u6027\u3002"}),"\n",(0,n.jsx)(i.h2,{id:"intra-query-parallelism",children:"Intra-Query parallelism"}),"\n",(0,n.jsx)(i.p,{children:"Intra-Query Parallelism \u662F\u6307\u901A\u904E\u5E73\u884C\u5316\u4F86\u5C07\u55AE\u500B query \u5206\u89E3\u6210\u591A\u500B operators \u4F86\u63D0\u5347\u6027\u80FD\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u5728\u9019\u500B\u904E\u7A0B\u4E2D\uFF0C\u6BCF\u500B operator \u90FD\u662F\u8CC7\u6599\u7684 producer\uFF0C\u4E5F\u540C\u6642\u662F\u5176\u4ED6 operator \u7684 consumer\uFF0C\u9019\u7A2E\u8A2D\u8A08\u4F7F\u5F97\u5E73\u884C\u7B97\u6CD5\u53EF\u4EE5\u61C9\u7528\u65BC\u6BCF\u500B relational operator\u3002"}),"\n",(0,n.jsx)(i.h3,{id:"intra-operator-parallelism-horizontal",children:"Intra-Operator Parallelism (Horizontal)"}),"\n",(0,n.jsx)(i.p,{children:"\u5C07\u8CC7\u6599\u62C6\u89E3\u6210\u591A\u500B\u5B50\u96C6\uFF0C\u4E26\u900F\u904E exchange operator \u4F86\u5408\u4F75\u5B50\u96C6\u8655\u7406\u7684\u7D50\u679C\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Intra-Operator Parallelism",src:l(63891).Z+"",width:"961",height:"537"})}),"\n",(0,n.jsx)(i.h3,{id:"inter-operator-parallelism-vertical",children:"Inter-Operator Parallelism (Vertical)"}),"\n",(0,n.jsx)(i.p,{children:"\u5C07 operator \u4E32\u806F\u6210 pipeline\uFF0C\u4E26\u7531\u524D\u4E00\u500B\u968E\u6BB5\u4E0D\u65B7\u5730\u7522\u751F tuple \u4F86\u4F9B\u7D66\u4E0B\u4E00\u500B\u968E\u6BB5\u800C\u4E0D\u7528\u7B49\u5F85\u6574\u500B\u968E\u6BB5\u8655\u7406\u5B8C\u7562\uFF0C\u4E5F\u53EB\u505A pipelined parallelism\u3002"}),"\n",(0,n.jsx)(i.p,{children:"\u901A\u5E38\u6703\u5728\u4E00\u4E9B streaming \u7684\u7CFB\u7D71\u4E2D\u4F7F\u7528\uFF0C\u5982 Spark\u3001Flink \u7B49\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Inter-Operator Parallelism",src:l(54693).Z+"",width:"957",height:"536"})}),"\n",(0,n.jsx)(i.h3,{id:"bushy-parallelism",children:"Bushy Parallelism"}),"\n",(0,n.jsx)(i.p,{children:"Bushy Parallelism \u662F Intra-Operator \u548C Inter-Operator Parallelism \u7684\u6DF7\u5408\u5F62\u5F0F\u3002"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Bushy Parallelism",src:l(57144).Z+"",width:"956",height:"536"})}),"\n",(0,n.jsx)(i.h3,{id:"observation",children:"Observation"}),"\n",(0,n.jsx)(i.p,{children:"\u4F7F\u7528\u984D\u5916\u7684 process / thread \u4F86\u5E73\u884C\u57F7\u884C query \u53EF\u4EE5\u63D0\u9AD8 CPU \u7684\u5229\u7528\u7387\uFF0C\u4F46\u5982\u679C\u74F6\u9838\u51FA\u73FE\u5728 disk I/O \u4E0A\uFF0C\u90A3\u9EBC\u9019\u7A2E\u5E73\u884C\u8655\u7406\u5C31\u6C92\u6709\u592A\u5927\u7684\u610F\u7FA9\uFF0C\u751A\u81F3\u6709\u53EF\u80FD\u56E0\u70BA cache miss \u800C\u5C0E\u81F4\u6548\u80FD\u4E0B\u964D\u3002"}),"\n",(0,n.jsx)(i.h2,{id:"io-parallelism",children:"I/O Parallelism"}),"\n",(0,n.jsx)(i.p,{children:"I/O Parallelism \u662F\u6307\u5728 DBMS \u4E2D\u4F7F\u7528\u984D\u5916\u7684\u9032\u7A0B\u6216\u57F7\u884C\u7DD2\u4F86\u5E73\u884C\u57F7\u884C\u67E5\u8A62\uFF0C\u4EE5\u63D0\u9AD8\u8CC7\u6599\u5B58\u53D6\u7684\u6548\u80FD\u3002\u9019\u7A2E\u6280\u8853\u65E8\u5728\u514B\u670D\u786C\u789F\u662F\u4E3B\u8981\u74F6\u9838\u7684\u60C5\u6CC1\uFF0C\u900F\u904E\u5C07\u8CC7\u6599\u5EAB\u5206\u6563\u5728\u591A\u500B\u5B58\u5132\u8A2D\u5099\u4E0A\u4F86\u63D0\u9AD8\u6548\u80FD\u3002"}),"\n",(0,n.jsx)(i.h3,{id:"multi-disk-io-parallelism",children:"Multi-Disk I/O Parallelism"}),"\n",(0,n.jsx)(i.p,{children:"\u5728 multi-disk I/O parallelism \u4E2D\uFF0CDBMS \u6703\u5C07\u8CC7\u6599\u5EAB\u6A94\u6848\u5206\u6563\u5728\u591A\u500B\u786C\u789F\u4E0A\uFF0C\u9019\u53EF\u4EE5\u4F7F\u7528 RAID \u4F86\u5BE6\u73FE\uFF0C"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Multi-Disk I/O Parallelism",src:l(31081).Z+"",width:"959",height:"538"})}),"\n",(0,n.jsx)(i.h3,{id:"database-partitioning",children:"Database Partitioning"}),"\n",(0,n.jsx)(i.p,{children:"\u53EF\u4EE5\u5C07\u4E00\u500B logical table \u5206\u5272\u6210\u591A\u500B physical segments \u5206\u958B\u5132\u5B58\uFF0C\u4EE5\u63D0\u9AD8 I/O \u6548\u80FD\u3002"})]})}function h(e={}){let{wrapper:i}={...(0,s.a)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},83360:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-1-a05cb620e01f0914c43b5c4c1eecbaae.png"},57144:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-10-f5b06976dda9fa1ec86b03f48a053c67.png"},31081:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-11-a7e17213e551d0316b71fca14cac216e.png"},36859:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-2-2bc5fb32fb8c0d2fbbe202222f6c87f5.png"},92943:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-3-e0e83dfd319ed4e5611970eb8421ebae.png"},20266:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-4-2011795d05d5ebe9f975424347569490.png"},76893:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-5-8091b11c083c87db802ea03ce7d8d693.png"},65387:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-6-eb81036b3c7c3834188f3ade529d24f9.png"},19349:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-7-e7f5ae04dbad4932e41271da1b0137d3.png"},63891:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-8-3a0656fe6132977c1c4c790b0ed4969a.png"},54693:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-9-0fcd2d3e03b5265d5e5447b4c215f0ed.png"},34685:function(e,i,l){l.d(i,{Z:()=>r});let r=l.p+"assets/images/image-2263231061f1d294b09279825ce5d934.png"},50065:function(e,i,l){l.d(i,{Z:()=>d,a:()=>a});var r=l(67294);let n={},s=r.createContext(n);function a(e){let i=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);