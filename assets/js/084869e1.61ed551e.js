"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1186],{4849:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>d,frontMatter:()=>t,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"CMU15-445/p0","title":"P0 - C++ Primer","description":"C++ Primer","source":"@site/docs/CMU15-445/p0.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/p0","permalink":"/RulerChen-Website/docs/CMU15-445/p0","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/p0.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/docs/tags/cmu-15-445"},{"inline":true,"label":"CMU15-445 Projects","permalink":"/RulerChen-Website/docs/tags/cmu-15-445-projects"}],"version":"current","lastUpdatedAt":1758026380000,"sidebarPosition":100,"frontMatter":{"title":"P0 - C++ Primer","sidebar_position":100,"description":"C++ Primer","keywords":["CMU15-445/645","C++ Primer","CMU15-445/645 \u7b46\u8a18"],"tags":["CMU15-445","CMU15-445 Projects"]},"sidebar":"tutorialSidebar","previous":{"title":"Distributed OLAP Database Systems","permalink":"/RulerChen-Website/docs/CMU15-445/c24"},"next":{"title":"P1 - Buffer Pool Manager","permalink":"/RulerChen-Website/docs/CMU15-445/p1"}}');var l=n(4848),i=n(8453);const t={title:"P0 - C++ Primer",sidebar_position:"100",description:"C++ Primer",keywords:["CMU15-445/645","C++ Primer","CMU15-445/645 \u7b46\u8a18"],tags:["CMU15-445","CMU15-445 Projects"]},c=void 0,r={},h=[{value:"Learning Resource",id:"learning-resource",level:2},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Background",id:"background",level:2},{value:"Min Hash",id:"min-hash",level:3},{value:"Probabilistic Counting",id:"probabilistic-counting",level:3},{value:"Multiple Hash Functions",id:"multiple-hash-functions",level:3},{value:"LogLog",id:"loglog",level:3},{value:"SuperLogLog &amp; HyperLogLog",id:"superloglog--hyperloglog",level:3},{value:"Task 1 - Hyperloglog",id:"task-1---hyperloglog",level:2},{value:"Task 2 - Presto Hyperloglog",id:"task-2---presto-hyperloglog",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Submit",id:"submit",level:2},{value:"Takeaways",id:"takeaways",level:2},{value:"References",id:"references",level:2}];function m(s){const e={a:"a",annotation:"annotation",code:"code",h2:"h2",h3:"h3",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msqrt:"msqrt",msub:"msub",msup:"msup",munderover:"munderover",ol:"ol",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",svg:"svg",ul:"ul",...(0,i.R)(),...s.components},{Head:n,ImageModal:a}=e;return n||x("Head",!0),a||x("ImageModal",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n,{children:(0,l.jsx)("title",{children:"CMU 15-445 2024Fall P0 C++ Primer"})}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u9019\u500b project \u4e2d\uff0c\u6211\u5011\u9700\u8981\u5be6\u73fe\u4e00\u7a2e\u5e38\u898b\u7684\u8cc7\u6599\u7d50\u69cb\u4ee5\u53ca\u5b83\u7684\u8b8a\u9ad4 :"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"HyperLogLog"}),"\n",(0,l.jsx)(e.li,{children:"Presto HyperLogLog"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u500b\u4f5c\u696d\u4e3b\u8981\u662f\u5e6b\u52a9\u5927\u5bb6\u719f\u6089 C++\uff0c\u5c0d\u65bc\u5df2\u7d93\u719f\u6089\u7684\u4eba\u4f86\u8aaa\uff0c\u6211\u8a8d\u70ba\u53ef\u4ee5\u76f4\u63a5\u8df3\u904e\u9019\u500b\u4f5c\u696d\uff0c\u56e0\u70ba\u9019\u500b\u4f5c\u696d\u4e0d\u6703\u5f71\u97ff\u5f8c\u7e8c\u7684\u4f5c\u696d\u5167\u5bb9\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"learning-resource",children:"Learning Resource"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u5217\u51fa\u4e00\u4e9b\u6211\u89ba\u5f97\u4e0d\u932f\u7684\u8cc7\u6e90\uff0c\u53ef\u4ee5\u5e6b\u52a9\u66f4\u5feb\u4e0a\u624b C++ \u548c\u76f8\u95dc\u5de5\u5177 :"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/cmu-db/15445-bootcamp",children:"15-445 C++ Bootcamp"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.youtube.com/watch?v=G9gnSGKYIg4",children:"Debug a C++ project in VS Code"})}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://seisman.github.io/how-to-write-makefile/overview.html",children:"Makefile"})," (Optional)"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://www.bilibili.com/video/BV14h41187FZ/?vd_source=0b8d45cc2260b9a7a9d948d819ac16f3",children:"CMake"})," (Optional)"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u500b\u4f5c\u696d\u6700\u91cd\u8981\u7684\u662f\u8981\u80fd\u5920\u9806\u5229\u7de8\u8b6f\u548c\u57f7\u884c C++ \u7684\u7a0b\u5f0f\u78bc\uff0c\u4e26\u4e14\u80fd\u5920\u4f7f\u7528 debugger \u4f86\u9664\u932f\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u7684\u74b0\u5883\u8a2d\u5b9a\u5982\u4e0b :"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u74b0\u5883\u662f WSL2 (Ubuntu 24.04) \u548c VSCode"}),"\n",(0,l.jsxs)(e.li,{children:["\u5b89\u88dd VSCode \u5957\u4ef6 ",(0,l.jsx)(e.code,{children:"C/C++ Extension Pack"}),"\u3001",(0,l.jsx)(e.code,{children:"clangd"}),"\u3001",(0,l.jsx)(e.code,{children:"CMake Tools"}),"\u3001",(0,l.jsx)(e.code,{children:"Clang-Format"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u5c07 bustub clone \u4e0b\u4f86\uff0c\u4e26\u4e14\u56de\u9000\u5230 2024 Fall \u7684 commit\uff0c\u6216\u662f\u76f4\u63a5\u5f9e ",(0,l.jsx)(e.a,{href:"https://github.com/cmu-db/bustub/releases/tag/v20241207-2024fall",children:"release"})," \u4e0b\u8f09 zip \u6a94\u89e3\u58d3\u7e2e"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/cmu-db/bustub.git\ncd bustub\ngit checkout f97256b88b20468c01023928b63f5693d697674c\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"4",children:["\n",(0,l.jsxs)(e.li,{children:["\u628a ",(0,l.jsx)(e.code,{children:".git"})," \u79fb\u9664\u4e26\u63a5\u4e0a\u81ea\u5df1\u7684 git repo (\u9019\u5802\u8ab2\u6709\u8981\u6c42\u4e0d\u80fd\u516c\u958b\u89e3\u7b54\uff0c\u4e0d\u7136\u6709\u6a5f\u6703\u88ab\u5beb\u5728 WALL OF SHAME \u88e1\u9762)"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'rm -rf .git\n\ngit init\ngit add .\ngit commit -m "init"\ngit remote add origin <your-git-repo>\ngit push -u origin main\n'})}),"\n",(0,l.jsxs)(e.ol,{start:"5",children:["\n",(0,l.jsxs)(e.li,{children:["\u7531\u65bc\u6211\u4f7f\u7528\u7684\u662f Ubuntu 24.04\uff0c\u6240\u4ee5\u9700\u8981\u4fee\u6539\u4e00\u4e0b ",(0,l.jsx)(e.code,{children:"packages.sh"})," \u7684\u5167\u5bb9\uff0c\u4e26\u9806\u4fbf\u5b89\u88dd ",(0,l.jsx)(e.code,{children:"clangd"})," \u7684\u5957\u4ef6"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",metastring:'title="build_support/packages.sh" showLineNumbers {10,33-34}',children:'install_linux() {\n  # Update apt-get.\n  apt-get -y update\n  # Install packages.\n  apt-get -y install \\\n      build-essential \\\n      clang-14 \\\n      clang-format-14 \\\n      clang-tidy-14 \\\n      clangd-14 \\\n      cmake \\\n      doxygen \\\n      git \\\n      pkg-config \\\n      zlib1g-dev \\\n      libelf-dev \\\n      libdwarf-dev\n}\n\ninstall() {\n  set -x\n  UNAME=$(uname | tr "[:lower:]" "[:upper:]" )\n\n  case $UNAME in\n    DARWIN) install_mac ;;\n\n    LINUX)\n      version=$(cat /etc/os-release | grep VERSION_ID | cut -d \'"\' -f 2)\n      case $version in\n        18.04) install_linux ;;\n        20.04) install_linux ;;\n        22.04) install_linux ;;\n        # add this line\n        24.04) install_linux ;;\n        *) give_up ;;\n      esac\n      ;;\n\n    *) give_up ;;\n  esac\n}\n'})}),"\n",(0,l.jsxs)(e.ol,{start:"6",children:["\n",(0,l.jsx)(e.li,{children:"\u5b89\u88dd\u5957\u4ef6"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo build_support/packages.sh\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"7",children:["\n",(0,l.jsx)(e.li,{children:"\u5617\u8a66\u7de8\u8b6f\u4e00\u4e0b\uff0c\u770b\u770b\u6709\u6c92\u6709\u554f\u984c"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=/usr/bin/clang-14 -DCMAKE_CXX_COMPILER=/usr/bin/clang++-14 -B build\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"cd build && make -j`nproc`\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"8",children:["\n",(0,l.jsx)(e.li,{children:"\u8a2d\u5b9a formatter \u4ee5\u53ca cmake\u3001clangd \u7b49\u7b49"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",metastring:'title=".vscode/settings.json"',children:'{\n  "[cpp]": {\n    "editor.defaultFormatter": "xaver.clang-format"\n  },\n  "[c]": {\n    "editor.defaultFormatter": "xaver.clang-format"\n  },\n  "C_Cpp.clang_format_path": "/usr/bin/clang-format-14",\n  "C_Cpp.formatting": "clangFormat",\n  "C_Cpp.clang_format_style": "file",\n  "clang-format.executable": "/usr/bin/clang-format-14",\n  "clangd.path": "/usr/bin/clangd-14",\n  "cmake.configureSettings": {\n    "CMAKE_C_COMPILER": "/usr/bin/clang-14",\n    "CMAKE_CXX_COMPILER": "/usr/bin/clang++-14"\n  },\n  "editor.formatOnSave": true\n}\n'})}),"\n",(0,l.jsxs)(e.ol,{start:"9",children:["\n",(0,l.jsxs)(e.li,{children:["\u5b89\u88dd debugger\uff0c\u6211\u4f7f\u7528\u7684 debugger \u662f ",(0,l.jsx)(e.code,{children:"GDB"})]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo apt install gdb\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"10",children:["\n",(0,l.jsx)(e.li,{children:"\u9019\u500b\u8a2d\u5b9a\u53ef\u4ee5\u5e6b\u52a9\u6211\u5011\u986f\u793a STL \u5bb9\u5668\u7684\u5167\u5bb9"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",metastring:'title=".vscode/launch.json"',children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "C/C++: g++ build and debug active file",\n      "type": "cppdbg",\n      "request": "launch",\n      "program": "${workspaceFolder}/build/test/${fileBasenameNoExtension}",\n      "args": [],\n      "cwd": "${workspaceFolder}",\n      "stopAtEntry": false,\n      "MIMode": "gdb",\n      "miDebuggerPath": "/usr/bin/gdb",\n      "setupCommands": [\n        {\n          "description": "Test",\n          "text": "python import sys;sys.path.insert(0, \'/usr/share/gcc/python\');from libstdcxx.v6.printers import register_libstdcxx_printers;register_libstdcxx_printers(None)",\n          "ignoreFailures": false\n        },\n        {\n          "description": "Enable pretty-printing for gdb",\n          "text": "-enable-pretty-printing",\n          "ignoreFailures": true\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u4e4b\u5f8c\u5982\u679c\u8981\u57f7\u884c debug\uff0c\u8a2d\u5b9a\u597d\u65b7\u9ede\u5c0d\u8457 test file \u6309 ",(0,l.jsx)(e.code,{children:"F5"})," \u5373\u53ef\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"background",children:"Background"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u958b\u59cb\u5beb\u4e4b\u524d\uff0c\u5f37\u70c8\u5efa\u8b70\u5148\u8b80\u4e00\u4e0b\u4f5c\u696d\u8aaa\u660e\u4e2d\u6709\u95dc Hyperloglog \u7684\u8aaa\u660e\uff0c\u63a5\u4e0b\u4f86\u6211\u4e5f\u6703\u7c21\u55ae\u4ecb\u7d39\u4e00\u4e0b Hyperloglog \u7684\u539f\u7406\u3002"}),"\n",(0,l.jsx)(e.p,{children:"HyperLogLog \u662f\u4e00\u7a2e\u7528\u4f86\u4f30\u7b97\u96c6\u5408\u4e2d\u4e0d\u91cd\u8907\u5143\u7d20\u6578\u91cf\u7684\u8cc7\u6599\u7d50\u69cb\u3002\n\u5b83\u6700\u5927\u7684\u512a\u52e2\u662f\u80fd\u5920\u5728\u56fa\u5b9a\u7a7a\u9593\u8207\u5e38\u6578\u6642\u9593\u5167\u5b8c\u6210\u4f30\u7b97\uff0c\u975e\u5e38\u9069\u5408\u7528\u65bc\u5927\u898f\u6a21\u8cc7\u6599\u8655\u7406\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8209\u4f8b\u4f86\u8aaa\uff0c\u5047\u8a2d\u6211\u5011\u60f3\u8981\u8a08\u7b97\u904e\u53bb\u4e00\u9031\u6709\u591a\u5c11\u4e0d\u540c\u4f7f\u7528\u8005\u9020\u8a2a\u904e\u6211\u5011\u7684\u7db2\u7ad9\u3002\u50b3\u7d71\u4f5c\u6cd5\u53ef\u80fd\u662f :"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4f7f\u7528\u4e00\u500b set \u5132\u5b58\u6240\u6709\u4f7f\u7528\u8005 ID"}),"\n",(0,l.jsx)(e.li,{children:"\u5c07\u6240\u6709\u7d00\u9304\u6392\u5e8f\uff0c\u518d\u900f\u904e\u985e\u4f3c merge \u7684\u65b9\u6cd5\u4f86\u8a08\u7b97\u4e0d\u91cd\u8907\u7684 ID"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u4e9b\u65b9\u6cd5\u5728\u7406\u8ad6\u4e0a\u53ef\u884c\uff0c\u4f46\u5728\u4f7f\u7528\u8005\u6578\u91cf\u9f90\u5927\u6642\uff0c\u6703\u6d88\u8017\u5927\u91cf\u7684\u8a18\u61b6\u9ad4\u8207 CPU\uff0c\u56e0\u6b64\u5be6\u52d9\u4e0a\u96e3\u4ee5\u61c9\u7528\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"min-hash",children:"Min Hash"}),"\n",(0,l.jsxs)(e.p,{children:["\u4f30\u7b97\u4e0d\u91cd\u8986\u6578\u5b57\u7684\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u5176\u4e2d\u4e00\u500b\u505a\u6cd5\u662f\u5c07\u6578\u5b57 hash \u6210\u4e00\u500b 0~1 \u4e4b\u9593\u7684\u6d6e\u9ede\u6578\uff0c\u7136\u5f8c\u4f30\u8a08\u9019\u500b\u4e0d\u91cd\u8986\u7684\u6578\u91cf\u70ba ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.mfrac,{children:[(0,l.jsx)(e.mn,{children:"1"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"m"}),(0,l.jsx)(e.mi,{children:"i"}),(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"_"}),(0,l.jsx)(e.mi,{children:"h"}),(0,l.jsx)(e.mi,{children:"a"}),(0,l.jsx)(e.mi,{children:"s"}),(0,l.jsx)(e.mi,{children:"h"})]})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\frac{1}{min\\_hash}"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1.4071em",verticalAlign:"-0.562em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,l.jsx)(e.span,{className:"mfrac",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8451em"},children:[(0,l.jsxs)(e.span,{style:{top:"-2.655em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"min"}),(0,l.jsx)(e.span,{className:"mord mtight",style:{marginRight:"0.02778em"},children:"_"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"ha"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"s"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"h"})]})})]}),(0,l.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,l.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"1"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.562em"},children:(0,l.jsx)(e.span,{})})})]})}),(0,l.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})})]}),"\uff0c\u5176\u4e2d ",(0,l.jsx)(e.code,{children:"min_hash"})," \u662f\u6240\u6709 hash \u503c\u4e2d\u6700\u5c0f\u7684\u90a3\u500b\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u500b\u505a\u6cd5\u7684\u554f\u984c\u662f\u6709\u53ef\u80fd\u51fa\u73fe\u6975\u7aef\u503c\uff0c\u5c0e\u81f4\u7d50\u679c\u8aa4\u5dee\u5f88\u5927\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/p0/image.webp",caption:"Min Hash"}),"\n",(0,l.jsx)(e.h3,{id:"probabilistic-counting",children:"Probabilistic Counting"}),"\n",(0,l.jsxs)(e.p,{children:["\u70ba\u4e86\u964d\u4f4e\u9019\u500b\u8b8a\u7570\u503c\uff0c\u56e0\u6b64\u6709\u4e86 probabilistic counting \u7684\u505a\u6cd5\u3002\n\u9019\u500b\u505a\u6cd5\u662f\u5c07 hash \u503c\u8f49\u6210\u4e8c\u9032\u4f4d\u7684\u6578\u5b57\uff0c\u7136\u5f8c\u8a08\u7b97\u5f9e\u6700\u5de6\u908a\u958b\u59cb\u6578\u5230\u7b2c\u4e00\u500b ",(0,l.jsx)(e.code,{children:"1"})," \u70ba\u6b62\u7684 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u7684\u6578\u91cf\u3002\n\u5047\u8a2d\u6240\u6709\u96c6\u5408\u4e2d\u6700\u5927\u7684 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u70ba ",(0,l.jsx)(e.code,{children:"k"}),"\uff0c\u90a3\u9ebc\u6211\u5011\u5c31\u53ef\u4ee5\u4f30\u8a08\u9019\u500b\u4e0d\u91cd\u8986\u7684\u6578\u91cf\u70ba ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mn,{children:"2"}),(0,l.jsx)(e.mi,{children:"k"})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"2^k"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8491em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"2"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.8491em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})})})})})]})]})})]}),"\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u500b\u505a\u6cd5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u8b8a\u7570\u503c\uff0c\u4f46\u4ecd\u7136\u6709\u53ef\u80fd\u51fa\u73fe\u6975\u7aef\u503c\uff0c\u5c0e\u81f4\u7d50\u679c\u8aa4\u5dee\u5f88\u5927\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/p0/image-1.webp",caption:"Probabilistic Counting"}),"\n",(0,l.jsx)(e.h3,{id:"multiple-hash-functions",children:"Multiple Hash Functions"}),"\n",(0,l.jsxs)(e.p,{children:["\u70ba\u4e86\u6e1b\u8f15\u55ae\u4e00\u8cc7\u6599\u7684\u5f71\u97ff\uff0c\u5f8c\u4f86\u6709\u4eba\u63d0\u51fa\u4e86\u4f7f\u7528\u591a\u500b\u7368\u7acb\u7684 hash function \u7684\u505a\u6cd5\u3002\n\u901a\u904e\u4f7f\u7528\u591a\u500b\u7368\u7acb\u7684 hash function\uff0c\u6211\u5011\u53ef\u4ee5\u5f97\u5230\u591a\u500b\u4e0d\u540c\u7684 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u6578\u91cf\uff0c\u7136\u5f8c\u53d6\u9019\u4e9b\u6578\u91cf\u7684\u5e73\u5747\u503c\u4f86\u4f30\u8a08\u4e0d\u91cd\u8986\u7684\u6578\u91cf\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u7f3a\u9ede\u662f\u8a08\u7b97\u6210\u672c\u8f03\u9ad8\uff0c\u56e0\u70ba\u6bcf\u7b46\u8cc7\u6599\u90fd\u9700\u8981\u7d93\u904e\u591a\u6b21 hash\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/p0/image-2.webp",caption:"Multiple Hash Functions"}),"\n",(0,l.jsx)(e.h3,{id:"loglog",children:"LogLog"}),"\n",(0,l.jsxs)(e.p,{children:["\u70ba\u4e86\u964d\u4f4e\u8a08\u7b97\u91cf\uff0c\u5b78\u8005\u5011\u63d0\u51fa\u4e86\u5c07 hash \u503c\u5206\u6210\u591a\u500b\u90e8\u5206\u7684\u505a\u6cd5\uff0c\u4e5f\u5c31\u662f ",(0,l.jsx)(e.code,{children:"LogLog"}),"\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5b83\u5c07 hash \u503c\u5206\u6210\u524d ",(0,l.jsx)(e.code,{children:"n_bits"})," \u500b bits \u8ddf\u5f8c\u9762\u7684 bits\uff0c\u524d\u9762\u7684 ",(0,l.jsx)(e.code,{children:"n_bits"})," \u500b bits \u7528\u4f86\u6c7a\u5b9a\u6876\u7684 index\uff0c\u5f8c\u9762\u7684 bits \u7528\u4f86\u8a08\u7b97 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u7684\u6578\u91cf\u3002\n\u9019\u6a23\u5b50\u6211\u5011\u5c31\u53ef\u4ee5\u4f7f\u7528\u55ae\u4e00\u7684 hash function \u4f86\u9054\u5230\u985e\u4f3c\u591a\u500b\u7368\u7acb hash function \u7684\u6548\u679c\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u4e0b\u5716\u6240\u793a\uff0c\u524d\u9762 4 \u500b bits (1011 -> 11) \u7528\u4f86\u6c7a\u5b9a\u6876\u7684 index\uff0c\u5f8c\u9762\u7684 bits (0111...100000) \u7528\u4f86\u8a08\u7b97 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u7684\u6578\u91cf (5)\u3002\n\u4f5c\u696d\u88e1\u9762\u662f\u5f9e\u524d\u9762\u958b\u59cb\u7b97\uff0c\u9019\u88e1\u662f\u5f9e\u5f8c\u9762\u3002"]}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/p0/image-3.webp",caption:"LogLog"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u5011\u53ef\u4ee5\u7528\u4ee5\u4e0b\u7684\u516c\u5f0f\u4f86\u8a08\u7b97\u57fa\u6578 (cardinality) :"}),"\n",(0,l.jsx)(e.span,{className:"katex-display",children:(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"C"}),(0,l.jsx)(e.mi,{children:"a"}),(0,l.jsx)(e.mi,{children:"r"}),(0,l.jsx)(e.mi,{children:"d"}),(0,l.jsx)(e.mi,{children:"i"}),(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{children:"a"}),(0,l.jsx)(e.mi,{children:"l"}),(0,l.jsx)(e.mi,{children:"i"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsxs)(e.msub,{children:[(0,l.jsx)(e.mi,{children:"y"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"L"}),(0,l.jsx)(e.mi,{children:"o"}),(0,l.jsx)(e.mi,{children:"g"}),(0,l.jsx)(e.mi,{children:"L"}),(0,l.jsx)(e.mi,{children:"o"}),(0,l.jsx)(e.mi,{children:"g"})]})]}),(0,l.jsx)(e.mo,{children:"="}),(0,l.jsx)(e.mi,{children:"C"}),(0,l.jsx)(e.mi,{children:"o"}),(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{children:"s"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mi,{children:"a"}),(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mo,{children:"\u2217"}),(0,l.jsx)(e.mi,{children:"m"}),(0,l.jsx)(e.mo,{children:"\u2217"}),(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mn,{children:"2"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsxs)(e.mfrac,{children:[(0,l.jsx)(e.mn,{children:"1"}),(0,l.jsx)(e.mi,{children:"m"})]}),(0,l.jsxs)(e.munderover,{children:[(0,l.jsx)(e.mo,{children:"\u2211"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"j"}),(0,l.jsx)(e.mo,{children:"="}),(0,l.jsx)(e.mn,{children:"1"})]}),(0,l.jsx)(e.mi,{children:"N"})]}),(0,l.jsxs)(e.msub,{children:[(0,l.jsx)(e.mi,{children:"R"}),(0,l.jsx)(e.mi,{children:"j"})]})]})]})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\nCardinality_{LogLog} = Constant * m * 2^{\\frac{1}{m} \\sum_{j=1}^{N} R_j}\n"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"ina"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.3283em"},children:(0,l.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"L"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"o"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"gL"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"o"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"g"})]})})]})}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,l.jsx)(e.span,{})})})]})})]}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"="}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"o"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"an"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u2217"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.4653em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u2217"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1.0733em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"2"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"1.0733em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.43em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mopen nulldelimiter sizing reset-size3 size6"}),(0,l.jsx)(e.span,{className:"mfrac",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8443em"},children:[(0,l.jsxs)(e.span,{style:{top:"-2.656em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"m"})})})]}),(0,l.jsxs)(e.span,{style:{top:"-3.2255em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"frac-line mtight",style:{borderBottomWidth:"0.049em"}})]}),(0,l.jsxs)(e.span,{style:{top:"-3.384em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"1"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.344em"},children:(0,l.jsx)(e.span,{})})})]})}),(0,l.jsx)(e.span,{className:"mclose nulldelimiter sizing reset-size3 size6"})]}),(0,l.jsx)(e.span,{className:"mspace mtight",style:{marginRight:"0.1952em"}}),(0,l.jsxs)(e.span,{className:"mop mtight",children:[(0,l.jsx)(e.span,{className:"mop op-symbol small-op mtight",style:{position:"relative",top:"0em"},children:"\u2211"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.9191em"},children:[(0,l.jsxs)(e.span,{style:{top:"-2.1786em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"}),(0,l.jsx)(e.span,{className:"mrel mtight",children:"="}),(0,l.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]}),(0,l.jsxs)(e.span,{style:{top:"-2.931em",marginRight:"0.0714em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"N"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.4603em"},children:(0,l.jsx)(e.span,{})})})]})})]}),(0,l.jsx)(e.span,{className:"mspace mtight",style:{marginRight:"0.1952em"}}),(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.00773em"},children:"R"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.3281em"},children:(0,l.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"-0.0077em",marginRight:"0.0714em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"})})]})}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.2819em"},children:(0,l.jsx)(e.span,{})})})]})})]})]})})]})})})})})]})]})]})]})}),"\n",(0,l.jsxs)(e.p,{children:["Constant \u7d93\u904e\u7d71\u8a08\u63a8\u5c0e\u51fa\u4f86\u7684\u503c\u70ba 0.79402\uff0cm \u70ba\u6876\u7684\u6578\u91cf\uff0c",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.msub,{children:[(0,l.jsx)(e.mi,{children:"R"}),(0,l.jsx)(e.mi,{children:"j"})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"R_j"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,l.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"})})]})}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,l.jsx)(e.span,{})})})]})})]})]})})]})," \u70ba\u7b2c j \u500b\u6876\u4e2d\u7684 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u7684\u6578\u91cf\uff0c\u9019\u6a23\u7684\u7d50\u679c\u53ef\u4ee5\u4f7f\u8aa4\u5dee\u5230\u9054\u5230 ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.mfrac,{children:[(0,l.jsx)(e.mn,{children:"1.3"}),(0,l.jsx)(e.msqrt,{children:(0,l.jsx)(e.mi,{children:"m"})})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\frac{1.3}{\\sqrt{m}}"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1.3831em",verticalAlign:"-0.538em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,l.jsx)(e.span,{className:"mfrac",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8451em"},children:[(0,l.jsxs)(e.span,{style:{top:"-2.6259em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord sqrt mtight",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8059em"},children:[(0,l.jsxs)(e.span,{className:"svg-align",style:{top:"-3em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"mord mtight",style:{paddingLeft:"0.833em"},children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"m"})})]}),(0,l.jsxs)(e.span,{style:{top:"-2.7659em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"hide-tail mtight",style:{minWidth:"0.853em",height:"1.08em"},children:(0,l.jsx)(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:(0,l.jsx)(e.path,{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.2341em"},children:(0,l.jsx)(e.span,{})})})]})})})})]}),(0,l.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,l.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"1.3"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.538em"},children:(0,l.jsx)(e.span,{})})})]})}),(0,l.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})})]}),"\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"superloglog--hyperloglog",children:"SuperLogLog & HyperLogLog"}),"\n",(0,l.jsxs)(e.p,{children:["\u5f8c\u7e8c\u53c8\u6709\u9032\u4e00\u6b65\u6539\u826f\u7248\u672c\uff0c\u6709\u540d\u7684\u6709 ",(0,l.jsx)(e.code,{children:"SuperLogLog"})," \u548c ",(0,l.jsx)(e.code,{children:"HyperLogLog"})," \u5169\u7a2e :"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["SuperLogLog : \u4e1f\u68c4\u6700\u5927 30% \u7684\u6876\u503c\u518d\u53d6\u5e73\u5747\uff0c\u53ef\u4ee5\u4f7f\u8aa4\u5dee\u5230\u9054 ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.mfrac,{children:[(0,l.jsx)(e.mn,{children:"1.05"}),(0,l.jsx)(e.msqrt,{children:(0,l.jsx)(e.mi,{children:"m"})})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\frac{1.05}{\\sqrt{m}}"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1.3831em",verticalAlign:"-0.538em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,l.jsx)(e.span,{className:"mfrac",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8451em"},children:[(0,l.jsxs)(e.span,{style:{top:"-2.6259em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord sqrt mtight",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8059em"},children:[(0,l.jsxs)(e.span,{className:"svg-align",style:{top:"-3em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"mord mtight",style:{paddingLeft:"0.833em"},children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"m"})})]}),(0,l.jsxs)(e.span,{style:{top:"-2.7659em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"hide-tail mtight",style:{minWidth:"0.853em",height:"1.08em"},children:(0,l.jsx)(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:(0,l.jsx)(e.path,{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.2341em"},children:(0,l.jsx)(e.span,{})})})]})})})})]}),(0,l.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,l.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"1.05"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.538em"},children:(0,l.jsx)(e.span,{})})})]})}),(0,l.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})})]})]}),"\n",(0,l.jsxs)(e.li,{children:["HyperLogLog : \u4f7f\u7528\u8abf\u548c\u5e73\u5747 (harmonic mean) \u4f86\u53d6\u4ee3\u7b97\u8853\u5e73\u5747 (arithmetic mean)\uff0c\u53ef\u4ee5\u4f7f\u8aa4\u5dee\u5230\u9054 ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.mfrac,{children:[(0,l.jsx)(e.mn,{children:"1.04"}),(0,l.jsx)(e.msqrt,{children:(0,l.jsx)(e.mi,{children:"m"})})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\frac{1.04}{\\sqrt{m}}"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1.3831em",verticalAlign:"-0.538em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,l.jsx)(e.span,{className:"mfrac",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8451em"},children:[(0,l.jsxs)(e.span,{style:{top:"-2.6259em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord sqrt mtight",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsxs)(e.span,{className:"vlist",style:{height:"0.8059em"},children:[(0,l.jsxs)(e.span,{className:"svg-align",style:{top:"-3em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"mord mtight",style:{paddingLeft:"0.833em"},children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"m"})})]}),(0,l.jsxs)(e.span,{style:{top:"-2.7659em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"hide-tail mtight",style:{minWidth:"0.853em",height:"1.08em"},children:(0,l.jsx)(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:(0,l.jsx)(e.path,{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.2341em"},children:(0,l.jsx)(e.span,{})})})]})})})})]}),(0,l.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,l.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"1.04"})})})]})]}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.538em"},children:(0,l.jsx)(e.span,{})})})]})}),(0,l.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})})]})]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u800c\u9019\u6b21\u7684\u4f5c\u696d\u8981\u5be6\u4f5c\u7684\u5c31\u662f HyperLogLog\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"task-1---hyperloglog",children:"Task 1 - Hyperloglog"}),"\n",(0,l.jsxs)(e.p,{children:["\u9996\u5148\u6211\u5011\u6703\u5c07\u6240\u6709\u7684\u5143\u7d20 hash \u6210\u4e00\u500b 64 bits \u7684\u6574\u6578\uff0c\u7136\u5f8c\u5c07\u9019\u500b\u6574\u6578\u5206\u6210\u5169\u500b\u90e8\u5206\uff0c\u53f3\u908a\u6578\u4f86\u524d\u9762\u7684 ",(0,l.jsx)(e.code,{children:"n_bits"})," \u4ee3\u8868\u6876\u7684 index (\u7e3d\u5171\u6709 ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mn,{children:"2"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"_"}),(0,l.jsx)(e.mi,{children:"b"}),(0,l.jsx)(e.mi,{children:"i"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mi,{children:"s"})]})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"2^{n\\_bits}"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8491em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"2"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.8491em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"n"}),(0,l.jsx)(e.span,{className:"mord mtight",style:{marginRight:"0.02778em"},children:"_"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"bi"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"}),(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"s"})]})})]})})})})})]})]})})]})," \u500b\u6876)\uff0c\u5728\u9019\u4e9b\u6578\u5b57\u4e4b\u5f8c\uff0c\u6211\u5011\u5c31\u8981\u958b\u59cb\u6578 ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u7684\u6578\u91cf\u76f4\u5230\u9047\u5230\u7b2c\u4e00\u500b ",(0,l.jsx)(e.code,{children:"1"})," \u70ba\u6b62 (\u5305\u542b ",(0,l.jsx)(e.code,{children:"1"}),")\uff0c\u518d\u628a ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u53d6\u6700\u5927\u503c\u4e4b\u5f8c\u653e\u9032\u6876\u88e1\u9762\uff0c\u6700\u5f8c\u518d\u7528\u9019\u4e9b\u6876\u4f86\u4f30\u8a08\u4e0d\u91cd\u8907\u7684\u5143\u7d20\u7684\u6578\u91cf\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u8209\u4f8b\u4f86\u8aaa\uff0c\u5982\u679c ",(0,l.jsx)(e.code,{children:"n_bits"})," \u70ba 4\uff0c\u7136\u5f8c hash \u51fa\u4f86\u7684\u503c\u70ba ",(0,l.jsx)(e.code,{children:"101101110000011111..."}),"\uff0c\u90a3\u9ebc bucket index \u70ba ",(0,l.jsx)(e.code,{children:"1011"})," (11)\uff0c",(0,l.jsx)(e.code,{children:"leading zeros"})," \u70ba ",(0,l.jsx)(e.code,{children:"01"})," (2)\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u500b task \u6709\u5169\u500b\u5beb\u597d\u7684 function\uff0c\u5206\u5225\u662f :"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"CalculateHash"})," : \u5c07\u50b3\u9032\u4f86\u7684\u503c\u505a hash\uff0c\u4e26\u56de\u50b3 ",(0,l.jsx)(e.code,{children:"unsigned long"})," (64 bits)\u7684\u6574\u6578"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"ComputeBinary"})," : \u5c07 hash \u503c\u8f49\u6210\u4e8c\u9032\u4f4d\u7684\u6578\u5b57"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5728 ",(0,l.jsx)(e.code,{children:"AddElem"})," \u4e2d\uff0c\u6211\u5011\u6703\u547c\u53eb\u9019\u5169\u500b function \u4f86\u53d6\u5f97\u4e8c\u9032\u4f4d\u7684\u8868\u793a\u6cd5\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u6709\u56db\u500b function \u9700\u8981\u5be6\u4f5c\uff0c\u5206\u5225\u662f :"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"HyperLogLog"})," : \u521d\u59cb\u5316\u6876\u7684\u6578\u91cf\uff0c\u4e26\u4e14\u5c07\u6240\u6709\u7684\u6876\u7684\u503c\u8a2d\u6210 0\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u9700\u8981\u8655\u7406\u50b3\u9032\u4f86\u7684 ",(0,l.jsx)(e.code,{children:"n_bits"})," \u6709\u53ef\u80fd\u6703\u662f\u8ca0\u6578\u7684\u60c5\u6cc1"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"PositionOfLeftmostOne"})," : \u8a08\u7b97\u4e8c\u9032\u4f4d\u8868\u793a\u6cd5\u4e2d\u5f9e bucket_index \u7d50\u675f\u5f8c\u7684\u4e0b\u4e00\u500b bit \u958b\u59cb\u5230\u7b2c\u4e00\u500b ",(0,l.jsx)(e.code,{children:"1"})," \u7684\u4f4d\u7f6e\uff0c\u8981\u7279\u5225\u6ce8\u610f\u7684\u662f ",(0,l.jsx)(e.code,{children:"1"})," \u7684\u4f4d\u7f6e\u4e5f\u9700\u8981\u8a08\u7b97\uff0c\u4e26\u4e14\u5982\u679c ",(0,l.jsx)(e.code,{children:"n_bits"})," \u70ba 0\uff0c\u4e5f\u9700\u8981\u4fdd\u7559\u7b2c\u4e00\u500b bit \u7576\u4f5c index"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"AddElem"})," : \u4f7f\u7528\u63d0\u4f9b\u7684\u51fd\u6578\u5c07 ",(0,l.jsx)(e.code,{children:"val"})," \u8f49\u6210 ",(0,l.jsx)(e.code,{children:"std::bitset"}),"\uff0c\u63a5\u8457\u8a08\u7b97\u6876\u7684 index \u548c ",(0,l.jsx)(e.code,{children:"leading zeros"})," \u7684\u6578\u91cf\uff0c\u6700\u5f8c\u53d6\u6700\u5927\u503c\u653e\u9032\u6876\u88e1\u9762"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"ComputeCardinality"})," : \u56de\u50b3\u8a08\u7b97\u5f8c\u7684 cardinality\uff0c\u4f9d\u7167\u516c\u5f0f\u4f86\u5beb\u5373\u53ef\uff0c\u6700\u5f8c\u8a18\u5f97\u7528 ",(0,l.jsx)(e.code,{children:"std::floor"})," \u4f86\u53d6\u6574\u6578\uff0c\u4e26\u4e14\u8981\u6ce8\u610f ",(0,l.jsx)(e.code,{children:"n_bits"})," \u70ba 0 \u7684\u60c5\u6cc1"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"task-2---presto-hyperloglog",children:"Task 2 - Presto Hyperloglog"}),"\n",(0,l.jsx)(e.p,{children:"Task 2 \u4e3b\u8981\u662f\u8981\u5be6\u4f5c Presto Hyperloglog\uff0c\u662f\u4e00\u7a2e Hyperloglog \u7684\u4fee\u6539\u7248\uff0c\u53ef\u4ee5\u512a\u5316\u7a7a\u9593\u4f7f\u7528\u7387\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u5728\u9019\u500b\u4fee\u6539\u7248\u4e2d\uff0c\u5132\u5b58\u6703\u5206\u6210\u5169\u500b\u90e8\u5206\uff0c\u5206\u5225\u662f ",(0,l.jsx)(e.code,{children:"dense_bucket_"})," \u8ddf ",(0,l.jsx)(e.code,{children:"overflow_bucket_"}),"\uff0c\u6211\u5011\u6703\u5c07\u6700\u5f8c 4 bits \u653e\u5230 ",(0,l.jsx)(e.code,{children:"dense_bucket_"}),"\uff0c\u5269\u4e0b\u7684 bits \u653e\u5230 ",(0,l.jsx)(e.code,{children:"overflow_bucket_"}),"\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u8209\u4f8b\u4f86\u8aaa\uff0c\u5982\u679c ",(0,l.jsx)(e.code,{children:"n_bits"})," \u70ba 4\uff0c\u7136\u5f8c hash \u51fa\u4f86\u7684\u503c\u70ba ",(0,l.jsx)(e.code,{children:"1011...0000100001"}),"\uff0c\u90a3\u9ebc dense bucket \u70ba ",(0,l.jsx)(e.code,{children:"0001"})," (1)\uff0coverflow bucket \u70ba ",(0,l.jsx)(e.code,{children:"010"})," (2)\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u9019\u500b task \u4e3b\u8981\u6709\u4e09\u500b function \u9700\u8981\u5be6\u4f5c\uff0c\u9019\u4e09\u500b\u7684\u908f\u8f2f\u8ddf task 1 \u7684\u5dee\u4e0d\u591a\uff0c\u53ea\u9700\u8981\u6ce8\u610f ",(0,l.jsx)(e.code,{children:"dense_bucket_"})," \u548c ",(0,l.jsx)(e.code,{children:"overflow_bucket_"})," \u7684\u8655\u7406\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"PrestoHyperLogLog"})," : \u8207 task 1 \u985e\u4f3c\uff0c\u53ea\u662f\u6539\u6210\u8981\u521d\u59cb\u5316 ",(0,l.jsx)(e.code,{children:"dense_bucket_"})]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"AddElem"})," : \u8207 task 1 \u985e\u4f3c\uff0c\u53ea\u662f\u8981\u6ce8\u610f\u8a08\u7b97\u65b9\u5f0f\u6539\u6210\u5f9e\u6700\u53f3\u908a\u958b\u59cb\u53d6\u503c\u5230\u7b2c\u4e00\u500b ",(0,l.jsx)(e.code,{children:"1"})," \u7684\u4f4d\u7f6e (\u4e0d\u5305\u542b ",(0,l.jsx)(e.code,{children:"1"}),")"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"ComputeCardinality"})," : \u8207 task 1 \u985e\u4f3c\uff0c\u53ea\u662f\u5c07 ",(0,l.jsx)(e.code,{children:"overflow_bucket_"})," \u5de6\u79fb 4 bits \u518d\u76f8\u52a0"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,l.jsxs)(e.p,{children:["\u6211\u89ba\u5f97\u9019\u500b\u4f5c\u696d\u9700\u8981\u6ce8\u610f\u7684\u662f\u985e\u5225\uff0c\u7279\u5225\u662f ",(0,l.jsx)(e.code,{children:"hash_t"})," \u662f ",(0,l.jsx)(e.code,{children:"unsigned long"})," (\u7121\u6b63\u8ca0\u6578 64 bits)\uff0c\u8981\u7279\u5225\u5c0f\u5fc3 overflow \u7684\u554f\u984c\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"submit",children:"Submit"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5c07 ",(0,l.jsx)(e.code,{children:"/test/primer/hyperloglog_test.cpp"})," \u7684\u6240\u6709 test case \u4e2d\u7684 ",(0,l.jsx)(e.code,{children:"DISABLE_"})," \u90fd\u79fb\u9664\uff0c\u8209\u4f8b\u4f86\u8aaa :"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cpp",metastring:'title="test/primer/hyperloglog_test.cpp"',children:"TEST(HyperLogLogTest, DISABLE_BasicTest1) {}\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6539\u6210"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cpp",metastring:'title="test/primer/hyperloglog_test.cpp"',children:"TEST(HyperLogLogTest, BasicTest1) {}\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsxs)(e.li,{children:["\u4fee\u6539 ",(0,l.jsx)(e.code,{children:"CMakeLists.txt"}),"\uff0c\u5c07 ",(0,l.jsx)(e.code,{children:"P0_FILES"})," \u8a2d\u5b9a\u70ba\u4ee5\u4e0b (\u4e5f\u53ef\u4ee5\u9806\u4fbf\u628a ",(0,l.jsx)(e.code,{children:"P1_FILES"})," \u4e5f\u52a0\u5165\u9019\u500b\uff0c\u5f8c\u9762\u6703\u7528\u5230) :"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-CMake",metastring:'title="CMakeLists.txt" showLineNumbers {6}',children:'set(P0_FILES\n        "src/include/primer/hyperloglog.h"\n        "src/include/primer/hyperloglog_presto.h"\n        "src/primer/hyperloglog.cpp"\n        "src/primer/hyperloglog_presto.cpp"\n        "GRADESCOPE.md"\n)\n'})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsxs)(e.li,{children:["\u6392\u7248\uff0c\u78ba\u5b9a\u6d88\u9664\u6240\u6709 error \u548c warning (\u53ef\u4ee5\u5ffd\u7565 ",(0,l.jsx)(e.code,{children:"DeprecationWarning: module 'sre_compile' is deprecated"})," \u7684 warning) :"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"make format && check-format && make check-lint && make check-clang-tidy-p0\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"4",children:["\n",(0,l.jsx)(e.li,{children:"\u7de8\u8b6f\u4e26\u6e2c\u8a66\u6240\u6709\u7684 test case"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_C_COMPILER=/usr/bin/clang-14 -DCMAKE_CXX_COMPILER=/usr/bin/clang++-14 -B build\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"cd build\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"make -j$(nproc) hyperloglog_test && ./test/hyperloglog_test\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e26\u78ba\u8a8d\u6240\u6709\u7684 test case \u90fd\u80fd\u901a\u904e\u3002"}),"\n",(0,l.jsxs)(e.ol,{start:"5",children:["\n",(0,l.jsxs)(e.li,{children:["\u7c3d\u540d\uff0c\u6703\u7522\u751f\u4e00\u500b ",(0,l.jsx)(e.code,{children:"GRADESCOPE.md"})," :"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"python3 gradescope_sign.py\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"6",children:["\n",(0,l.jsxs)(e.li,{children:["\u7e73\u4ea4\u4f5c\u696d\uff0c\u53ef\u80fd\u9700\u8981\u5148\u57f7\u884c ",(0,l.jsx)(e.code,{children:"sudo apt-get install zip"})," \u4f86\u5b89\u88dd ",(0,l.jsx)(e.code,{children:"zip"}),"\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4 :"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"make submit-p0\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"7",children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8a3b\u518a GradeScope\uff0c\u53ef\u4ee5\u53c3\u8003 ",(0,l.jsx)(e.a,{href:"https://15445.courses.cs.cmu.edu/fall2024/faq.html",children:"\u5b98\u7db2"})," \u7684 Q7\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u4e0a\u50b3 ",(0,l.jsx)(e.code,{children:".zip"})," \u6a94\u5230 GradeScope"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"takeaways",children:"Takeaways"}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u662f\u6211\u7b2c\u4e00\u6b21\u63a5\u89f8 C++ \u7684\u5c08\u6848\uff0c\u4e4b\u524d\u90fd\u53ea\u6709\u7528\u4f86\u5beb leetcode \u984c\u76ee\uff0c\u5c0d\u65bc C++ \u5982\u4f55\u5efa\u69cb\u5c08\u6848\u82b1\u4e86\u883b\u591a\u6642\u9593\u5728\u7814\u7a76\u7684\uff0c\u4e0d\u7136\u6211\u89ba\u5f97\u7d14\u5beb code \u7684\u6642\u9593\u61c9\u8a72 1-2 \u5929\u53ef\u4ee5\u641e\u5b9a (\u5427?)\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"references",children:"References"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://engineering.fb.com/2018/12/13/data-infrastructure/hyperloglog/",children:"HyperLogLog in Presto: A significantly faster way to handle cardinality estimation"})}),"\n"]})]})}function d(s={}){const{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,l.jsx)(e,{...s,children:(0,l.jsx)(m,{...s})}):m(s)}function x(s,e){throw new Error("Expected "+(e?"component":"object")+" `"+s+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(s,e,n)=>{n.d(e,{R:()=>t,x:()=>c});var a=n(6540);const l={},i=a.createContext(l);function t(s){const e=a.useContext(i);return a.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function c(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(l):s.components||l:t(s.components),a.createElement(i.Provider,{value:e},s.children)}}}]);