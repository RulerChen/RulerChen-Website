"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5110],{58343:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>m,default:()=>d,frontMatter:()=>t,metadata:()=>n,toc:()=>r});const n=JSON.parse('{"id":"CMU15-445/c11","title":"Joins Algorithms","description":"CMU15-445/645 Joins Algorithms","source":"@site/docs/CMU15-445/c11.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c11","permalink":"/RulerChen-Website/docs/CMU15-445/c11","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c11.mdx","tags":[],"version":"current","lastUpdatedAt":1737467057000,"sidebarPosition":11,"frontMatter":{"title":"Joins Algorithms","sidebar_position":11,"description":"CMU15-445/645 Joins Algorithms","keywords":["CMU15-445/645","Joins Algorithms","CMU15-445/645 \u7b46\u8a18"]},"sidebar":"tutorialSidebar","previous":{"title":"Sorting & Aggregations Algorithms","permalink":"/RulerChen-Website/docs/CMU15-445/c10"},"next":{"title":"Query Execution","permalink":"/RulerChen-Website/docs/CMU15-445/c12"}}');var i=a(74848),l=a(28453);const t={title:"Joins Algorithms",sidebar_position:"11",description:"CMU15-445/645 Joins Algorithms",keywords:["CMU15-445/645","Joins Algorithms","CMU15-445/645 \u7b46\u8a18"]},m=void 0,c={},r=[{value:"Join",id:"join",level:2},{value:"Output",id:"output",level:3},{value:"Early Materialization",id:"early-materialization",level:4},{value:"Late Materialization",id:"late-materialization",level:4},{value:"Cost Analysis Criteria",id:"cost-analysis-criteria",level:3},{value:"Nested Loop Join",id:"nested-loop-join",level:2},{value:"Naive Nested Loop Join",id:"naive-nested-loop-join",level:3},{value:"Block Nested Loop Join",id:"block-nested-loop-join",level:3},{value:"Index Nested Loop Join",id:"index-nested-loop-join",level:3},{value:"Sort-Merge Join",id:"sort-merge-join",level:2},{value:"Hash Join",id:"hash-join",level:2},{value:"Simple Hash Join",id:"simple-hash-join",level:3},{value:"Grace Hash Join / Partitioned Hash Join",id:"grace-hash-join--partitioned-hash-join",level:3},{value:"Conclusion",id:"conclusion",level:2}];function h(s){const e={annotation:"annotation",br:"br",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,l.R)(),...s.components},{Head:n}=e;return n||function(s,e){throw new Error("Expected "+(e?"component":"object")+" `"+s+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n,{children:(0,i.jsx)("title",{children:"CMU 15-445/645 Joins Algorithms"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 RDBMS \u4e2d\uff0c\u6211\u5011\u5e38\u5e38\u6703\u4f9d\u64da normalization \u7684\u539f\u5247\u5c07\u8cc7\u6599\u5206\u6563\u5230\u4e0d\u540c\u7684\u8868\u683c\u4e2d\u4ee5\u907f\u514d\u8a18\u9304\u5230\u91cd\u8907\u7684\u8cc7\u6599\uff0c\u56e0\u6b64\u5728\u67e5\u8a62\u6642\uff0c\u6211\u5011\u5c31\u9700\u8981\u900f\u904e Join \u4f86\u5c07\u8cc7\u6599\u5408\u4f75\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u9019\u7bc0\u4e2d\uff0c\u6211\u5011\u4e3b\u8981\u6703\u8a0e\u8ad6\u5169\u500b table \u505a inner join \u7684\u60c5\u6cc1 (\u7576\u7136\u9019\u7a2e\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u64f4\u5c55\u5230\u5176\u4ed6 join \u65b9\u5f0f\u53ca\u591a\u500b table)\uff0c\u5728\u4e00\u822c\u60c5\u6cc1\u4e0b\uff0c\u6211\u5011\u6703\u5e0c\u671b\u6bd4\u8f03\u5c0f\u7684 table \u4f5c\u70ba outer table\uff0c\u800c\u6bd4\u8f03\u5927\u7684 table \u4f5c\u70ba inner table\uff0c"}),"\n",(0,i.jsx)(e.h2,{id:"join",children:"Join"}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u5011\u4e3b\u8981\u8981\u8a0e\u8ad6\u5169\u500b\u90e8\u5206\uff0c\u5206\u5225\u662f :"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Output"}),"\n",(0,i.jsx)(e.li,{children:"Cost Analysis Criteria"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Join",src:a(23034).A+"",width:"1054",height:"594"})}),"\n",(0,i.jsx)(e.h3,{id:"output",children:"Output"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Join Output",src:a(45848).A+"",width:"1057",height:"594"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u6709\u5169\u7a2e\u9023\u7d50\u65b9\u5f0f :"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Early Materialization"}),"\n",(0,i.jsx)(e.li,{children:"Late Materialization"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"early-materialization",children:"Early Materialization"}),"\n",(0,i.jsx)(e.p,{children:"\u5c07\u6240\u6709\u7684\u8cc7\u6599\u90fd\u653e\u5230\u65b0\u7684 tuple \u4e2d\uff0c\u9019\u6a23\u4e4b\u5f8c\u5c31\u4e0d\u9700\u8981\u5728\u56de\u53bb\u8868\u4e2d\u8b80\u53d6\u8cc7\u6599\uff0c\u8f03\u9069\u5408 row store\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Early Materialization",src:a(20339).A+"",width:"1055",height:"592"})}),"\n",(0,i.jsx)(e.h4,{id:"late-materialization",children:"Late Materialization"}),"\n",(0,i.jsx)(e.p,{children:"\u4e5f\u53ef\u4ee5\u53ea\u8907\u88fd join key \u8ddf record id\uff0c\u4e4b\u5f8c\u518d\u53bb\u8868\u4e2d\u8b80\u53d6\u8cc7\u6599\uff0c\u8f03\u9069\u5408 column store\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Late Materialization",src:a(81482).A+"",width:"1053",height:"590"})}),"\n",(0,i.jsx)(e.h3,{id:"cost-analysis-criteria",children:"Cost Analysis Criteria"}),"\n",(0,i.jsx)(e.p,{children:"\u7531\u65bc\u8cc7\u6599\u5eab\u7684\u8cc7\u6599\u901a\u5e38\u7121\u6cd5\u4e00\u6b21\u6027\u7684\u8b80\u9032\u8a18\u61b6\u9ad4\u4e2d\uff0c\u56e0\u6b64\u6211\u5011\u9700\u8981\u900f\u904e join algorithms \u4f86\u6700\u5927\u5316\u6e1b\u5c11\u786c\u789f I/O \u7684\u6b21\u6578\uff0c\u5c0d\u65bc join algorithms \u4f86\u8aaa\uff0c\u552f\u4e00\u7684\u8a55\u8ad6\u6a19\u6e96\u5c31\u662f I/O \u6578\u91cf\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u4e0b\u4f86\u7684\u8cc7\u6599\u90fd\u662f\u57fa\u65bc\u4ee5\u4e0b\u7684\u5047\u8a2d :"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5c0d ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"R"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"R"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"})]})})]})," \u8ddf ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"S"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"S"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"})]})})]})," \u5169\u500b table \u505a join"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"R"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"R"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"})]})})]})," \u6709 ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"M"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"})]})})]})," \u500b page\uff0c ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"m"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"m"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"m"})]})})]})," \u500b tuple"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"S"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"S"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"})]})})]})," \u6709 ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"N"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"N"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})})]})," \u500b page\uff0c ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsx)(e.mrow,{children:(0,i.jsx)(e.mi,{children:"n"})}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"n"})]})})}),(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"n"})]})})]})," \u500b tuple"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"nested-loop-join",children:"Nested Loop Join"}),"\n",(0,i.jsx)(e.h3,{id:"naive-nested-loop-join",children:"Naive Nested Loop Join"}),"\n",(0,i.jsx)(e.p,{children:"\u5c0d\u65bc outer table \u7684\u6bcf\u4e00\u500b tuple\uff0c\u90fd\u6703\u53bb inner table \u4e2d\u627e\u5c0b\u7b26\u5408\u7684 tuple \u4f86\u6bd4\u5c0d\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["cost \u662f ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"m"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mi,{children:"N"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M + (m \\times N)"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Naive Nested Loop Join",src:a(66149).A+"",width:"1056",height:"593"})}),"\n",(0,i.jsx)(e.h3,{id:"block-nested-loop-join",children:"Block Nested Loop Join"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u6b21\u53d6 R \u4e2d\u7684\u6240\u6709 tuple \u51fa\u4f86\uff0c\u4e26\u8207 S \u7684\u6240\u6709 tuple \u6bd4\u5c0d\u4e00\u6b21\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Block Nested Loop Join",src:a(36732).A+"",width:"1054",height:"594"})}),"\n",(0,i.jsxs)(e.p,{children:["cost \u662f ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mi,{children:"N"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M + (M \\times N)"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6211\u5011\u6709 B \u584a buffer \uff0c\u6211\u5011\u53ef\u4ee5\u5c07\u4e00\u584a\u7528\u65bc inner table \u7684\u8b80\u5165\uff0c\u4e00\u584a\u8ca0\u8cac\u5beb\u51fa\uff0c\u5269\u4e0b B - 2 \u5247\u7528\u65bc outer table\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["cost \u5247\u8b8a\u70ba ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2308"}),(0,i.jsxs)(e.mfrac,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"B"}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsx)(e.mn,{children:"2"})]})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2309"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mi,{children:"N"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M + \\lceil \\frac{M}{B-2} \\rceil \\times N"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.2757em",verticalAlign:"-0.4033em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"\u2308"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,i.jsx)(e.span,{className:"mfrac",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.8723em"},children:[(0,i.jsxs)(e.span,{style:{top:"-2.655em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05017em"},children:"B"}),(0,i.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mord mtight",children:"2"})]})})]}),(0,i.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,i.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"M"})})})]})]}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.4033em"},children:(0,i.jsx)(e.span,{})})})]})}),(0,i.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,i.jsx)(e.span,{className:"mclose",children:"\u2309"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"index-nested-loop-join",children:"Index Nested Loop Join"}),"\n",(0,i.jsx)(e.p,{children:"\u524d\u9762\u5e7e\u7a2e\u8f03\u6162\u7684\u539f\u56e0\u5728\u65bc\u6211\u5011\u9700\u8981\u591a\u6b21\u5c0d\u5168\u8868\u6383\u63cf\uff0c\u4f46\u82e5 inner table \u5728 join attribute \u4e0a\u6709 index\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u900f\u904e index \u4f86\u52a0\u901f\uff0c\u53ea\u9700\u6383\u63cf\u4e00\u6b21\u5373\u53ef\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Index Nested Loop Join",src:a(37367).A+"",width:"1057",height:"594"})}),"\n",(0,i.jsxs)(e.p,{children:["cost \u662f ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mi,{children:"m"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mi,{children:"C"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M + m \\times C"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})]})]}),"\uff0c\u5176\u4e2d C \u662f\u6383\u63cf\u4e00\u6b21 index \u7684 cost\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"sort-merge-join",children:"Sort-Merge Join"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u5206\u70ba\u5169\u500b\u6b65\u9a5f :"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Sort","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c07\u5169\u500b table \u4f9d\u7167 join attribute \u6392\u5e8f"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Merge","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f9e\u5169\u500b table \u7684\u7aef\u9ede\u958b\u59cb\u9032\u884c\u6383\u63cf\uff0c\u4e26\u9032\u884c\u6bd4\u5c0d"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u9047\u5230\u91cd\u8907\u5247\u9700\u8981 backtracking"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Sort-Merge Join",src:a(94350).A+"",width:"1054",height:"592"})}),"\n",(0,i.jsxs)(e.p,{children:["sort cost (R) : ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mn,{children:"1"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2308"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"log"}),(0,i.jsx)(e.mo,{children:"\u2061"})]}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"B"}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsx)(e.mn,{children:"1"})]})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2308"}),(0,i.jsxs)(e.mfrac,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mi,{children:"B"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2309"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2309"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"2M \\times (1 + \\lceil \\log_{B-1} \\lceil\\frac{M}{B} \\rceil \\rceil)"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord",children:"1"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.2173em",verticalAlign:"-0.345em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"\u2308"}),(0,i.jsxs)(e.span,{className:"mop",children:[(0,i.jsxs)(e.span,{className:"mop",children:["lo",(0,i.jsx)(e.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.2342em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05017em"},children:"B"}),(0,i.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3025em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mopen",children:"\u2308"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,i.jsx)(e.span,{className:"mfrac",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.8723em"},children:[(0,i.jsxs)(e.span,{style:{top:"-2.655em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05017em"},children:"B"})})})]}),(0,i.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,i.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"M"})})})]})]}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.345em"},children:(0,i.jsx)(e.span,{})})})]})}),(0,i.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,i.jsx)(e.span,{className:"mclose",children:"\u2309\u2309)"})]})]})]}),(0,i.jsx)(e.br,{}),"\n","sort cost (S) : ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mi,{children:"N"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mn,{children:"1"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2308"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"log"}),(0,i.jsx)(e.mo,{children:"\u2061"})]}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"B"}),(0,i.jsx)(e.mo,{children:"\u2212"}),(0,i.jsx)(e.mn,{children:"1"})]})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2308"}),(0,i.jsxs)(e.mfrac,{children:[(0,i.jsx)(e.mi,{children:"N"}),(0,i.jsx)(e.mi,{children:"B"})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2309"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"\u2309"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"2N \\times (1 + \\lceil \\log_{B-1} \\lceil\\frac{N}{B} \\rceil \\rceil)"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord",children:"1"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.2173em",verticalAlign:"-0.345em"}}),(0,i.jsx)(e.span,{className:"mopen",children:"\u2308"}),(0,i.jsxs)(e.span,{className:"mop",children:[(0,i.jsxs)(e.span,{className:"mop",children:["lo",(0,i.jsx)(e.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.2342em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05017em"},children:"B"}),(0,i.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3025em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mopen",children:"\u2308"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,i.jsx)(e.span,{className:"mfrac",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsxs)(e.span,{className:"vlist",style:{height:"0.8723em"},children:[(0,i.jsxs)(e.span,{style:{top:"-2.655em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05017em"},children:"B"})})})]}),(0,i.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,i.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"N"})})})]})]}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.345em"},children:(0,i.jsx)(e.span,{})})})]})}),(0,i.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,i.jsx)(e.span,{className:"mclose",children:"\u2309\u2309)"})]})]})]}),(0,i.jsx)(e.br,{}),"\n","merge cost : ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mi,{children:"N"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M + N"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:["\u6700\u5dee\u7684\u60c5\u6cc1\u5c31\u662f\u6240\u6709\u7684 join attribute \u90fd\u4e00\u6a23\uff0c\u6b64\u6642\u7684 cost \u662f ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"\xd7"}),(0,i.jsx)(e.mi,{children:"N"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M \\times N"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})]})]})," + sort cost\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"sort meger \u4e3b\u8981\u9069\u7528\u7684\u60c5\u5883\u662f :"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7576 table \u7684\u67d0\u500b attribute \u5df2\u7d93\u6392\u597d\u5e8f\u4e86\uff0c\u5982 clustered index"}),"\n",(0,i.jsx)(e.li,{children:"SQL \u7684\u8f38\u51fa\u5fc5\u9808\u8981\u6392\u5e8f\u6642"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"hash-join",children:"Hash Join"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6709\u5169\u500b\u5206\u5225\u5728 R \u8ddf S \u7684 tuple \u6709\u76f8\u540c\u7684\u503c\uff0c\u5247\u4ee3\u8868\u4ed6\u5011 hash \u4e4b\u5f8c\u7684\u503c\u4e5f\u5fc5\u5b9a\u76f8\u7b49\uff0c\u6240\u4ee5\u6211\u5011\u4e5f\u53ef\u4ee5\u53ea\u91dd\u5c0d hash \u4e4b\u5f8c\u76f8\u540c\u7684\u503c\u9032\u884c\u8655\u7406\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"simple-hash-join",children:"Simple Hash Join"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u5206\u70ba\u5169\u500b\u968e\u6bb5 :"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Build","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c07 outer table \u4e2d\u7684 join attribute \u900f\u904e hash function h1 \u9032\u884c hash\uff0c\u4e26\u653e\u5165 hash table T \u4e2d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Probe","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c07 inner table \u4e2d\u7684 join attribute \u900f\u904e hash function h1 \u5f97\u5230\u9019\u500b tuple \u5728 T \u4e2d\u7684\u4f4d\u7f6e\uff0c\u4e26\u9032\u884c\u6bd4\u5c0d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5176\u4e2d T \u7684 key \u662f join attribute\uff0cvalue \u5247\u53ef\u4ee5\u662f early materialization \u6216 late materialization\uff0c\u5728\u9019\u500b\u65b9\u6cd5\u4e2d\uff0cT \u6709\u53ef\u80fd\u6c92\u8fa6\u6cd5\u88ab\u653e\u5165 memory \u4e2d\uff0c\u5c0e\u81f4\u9700\u8981\u9032\u884c\u591a\u6b21 I/O\uff0c\u5982\u679c\u53ef\u4ee5\u9810\u6e2c T \u7684\u5927\u5c0f\uff0c\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528\u975c\u614b hash table\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528 bloom filter \u4f86\u5e6b\u52a9\u6211\u5011\u5feb\u901f\u627e\u5230\u4e0d\u5728 T \u4e2d\u7684 tuple\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Simple Hash Join",src:a(67385).A+"",width:"1054",height:"592"})}),"\n",(0,i.jsx)(e.h3,{id:"grace-hash-join--partitioned-hash-join",children:"Grace Hash Join / Partitioned Hash Join"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.img,{alt:"Grace Hash Join",src:a(75370).A+"",width:"1055",height:"593"}),"\n",(0,i.jsx)(e.img,{alt:"Grace Hash Join",src:a(70480).A+"",width:"1055",height:"591"})]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u5206\u70ba\u5169\u500b\u968e\u6bb5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Partition","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c07\u5169\u500b table \u4f7f\u7528\u540c\u6a23\u7684 hash function \u9032\u884c partition\uff0c\u4f7f\u6709\u6a5f\u6703\u914d\u5c0d\u6210\u529f\u7684 tuple \u9032\u5165\u540c\u4e00\u500b partition \u4e2d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Probe","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c07\u6bcf\u4e00\u7d44 partition \u4e2d\u7684 tuple \u9032\u884c hash join"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u4e00\u6b21 partition \u5f8c\u9084\u662f\u7121\u6cd5\u653e\u5165 memory \u4e2d\uff0c\u6211\u5011\u53ef\u4ee5\u9032\u884c\u591a\u6b21 partition (recursive partitioning)\uff0c\u5982\u679c\u55ae\u4e00\u7684 key \u6709\u592a\u591a\u7684 tuple\uff0c\u53ef\u4ee5\u4f7f\u7528 block nested loop join \u4f86\u8655\u7406\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["partition cost : ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mi,{children:"N"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"2(M + N)"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})," read + write both tables",(0,i.jsx)(e.br,{}),"\n","probe cost : ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mi,{children:"N"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"M + N"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})]})]})," read both tables",(0,i.jsx)(e.br,{}),"\n","total : ",(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mn,{children:"3"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"M"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mi,{children:"N"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"3(M + N)"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"3"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"+"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Grace Hash Join",src:a(7283).A+"",width:"1057",height:"594"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6709\u4e9b key \u975e\u5e38\u5e38\u4f7f\u7528\uff0c\u6211\u5011\u53ef\u4ee5\u5c07\u4ed6\u5011\u653e\u5165 memory \u4e2d\u4e26\u7acb\u5373\u6bd4\u8f03\uff0c\u800c\u975e\u6ea2\u51fa\u5230\u786c\u789f\u4e2d\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(e.p,{children:"\u5c0d\u65bc\u5927\u90e8\u5206\u7684 join \u4f86\u8aaa\uff0chash join \u90fd\u662f\u6bd4\u8f03\u597d\u7684\u9078\u64c7\uff0c\u9664\u975e\u4f60\u7684 SQL \u9700\u8981\u6392\u5e8f\u624d\u6703\u8003\u616e sort-merge join\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Join Algorithms",src:a(95320).A+"",width:"1057",height:"590"})})]})}function d(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(h,{...s})}):h(s)}},45848:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-1-4002e486f70f2fb5b04ddb675463a436.png"},75370:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-10-2b4a7df046a3647400f72f34d0aef599.png"},7283:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-11-e00dbaf3f813dcd3a5aba7b06ba9ffed.png"},95320:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-12-a2646b9ebc58cd2400c6efbdf12f3c96.png"},20339:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-2-8ddee6d12dbcc67733735d06b748d651.png"},81482:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-3-d278ee23be13f0bf5e3733c4c018db85.png"},66149:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-4-53cd2f1d4b55ce4eb1d3fb681e157f5a.png"},36732:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-5-63289d4423892c5e3f028587e0b48d6f.png"},37367:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-6-66ca910ec57503fce8e1cca323580347.png"},94350:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-7-27e0f1cb7c30e88049c0fb6edc62e1ea.png"},67385:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-8-2adb4f003be539b152d302de969ab86e.png"},70480:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-9-01efb919cb875e0a3df3efea6a65d381.png"},23034:(s,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/image-d7c9f8a7acb5e0d1a6dceafe7cc22080.png"},28453:(s,e,a)=>{a.d(e,{R:()=>t,x:()=>m});var n=a(96540);const i={},l=n.createContext(i);function t(s){const e=n.useContext(l);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function m(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(i):s.components||i:t(s.components),n.createElement(l.Provider,{value:e},s.children)}}}]);