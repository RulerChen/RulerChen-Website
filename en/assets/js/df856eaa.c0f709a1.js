"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1237],{3923:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"CMU15-445/c08","title":"Indexes & Filters","description":"CMU15-445/645 Indexes & Filters","source":"@site/docs/CMU15-445/c08.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c08","permalink":"/RulerChen-Website/en/docs/CMU15-445/c08","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c08.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/en/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1757515510000,"sidebarPosition":8,"frontMatter":{"title":"Indexes & Filters","sidebar_position":8,"description":"CMU15-445/645 Indexes & Filters","keywords":["CMU15-445/645","Indexes & Filters","CMU15-445/645 \u7b46\u8a18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Hash Tables","permalink":"/RulerChen-Website/en/docs/CMU15-445/c07"},"next":{"title":"Index Concurrency Control","permalink":"/RulerChen-Website/en/docs/CMU15-445/c09"}}');var l=n(4848),a=n(8453);const r={title:"Indexes & Filters",sidebar_position:"8",description:"CMU15-445/645 Indexes & Filters",keywords:["CMU15-445/645","Indexes & Filters","CMU15-445/645 \u7b46\u8a18"],tags:["CMU15-445"]},c=void 0,t={},d=[{value:"B-Tree",id:"b-tree",level:2},{value:"B-Tree Family",id:"b-tree-family",level:3},{value:"B+Tree",id:"btree",level:3},{value:"B+Tree Operations",id:"btree-operations",level:3},{value:"B+Tree vs B-Tree",id:"btree-vs-b-tree",level:3},{value:"Composite Indexes",id:"composite-indexes",level:3},{value:"Duplicate Keys",id:"duplicate-keys",level:3},{value:"Clustered Indexes",id:"clustered-indexes",level:3},{value:"Index Scan Page Sorting",id:"index-scan-page-sorting",level:3},{value:"B+Tree Design Choices",id:"btree-design-choices",level:2},{value:"Node Size",id:"node-size",level:3},{value:"Merge Threshold",id:"merge-threshold",level:3},{value:"Variable Length Keys",id:"variable-length-keys",level:3},{value:"Intra-Node Search",id:"intra-node-search",level:3},{value:"B+ Tree Optimizations",id:"b-tree-optimizations",level:2},{value:"Prefix Compression",id:"prefix-compression",level:3},{value:"Deduplication",id:"deduplication",level:3},{value:"Suffix Truncation",id:"suffix-truncation",level:3},{value:"Pointer Swizzling",id:"pointer-swizzling",level:3},{value:"Bulk Insert",id:"bulk-insert",level:3},{value:"Write-Optimized B+ Tree",id:"write-optimized-b-tree",level:3},{value:"Bloom Filter",id:"bloom-filter",level:2},{value:"Skip List",id:"skip-list",level:2},{value:"Trie",id:"trie",level:2},{value:"Inverted Index",id:"inverted-index",level:2},{value:"Lucene",id:"lucene",level:3},{value:"PostgreSQL",id:"postgresql",level:3},{value:"Vector Index",id:"vector-index",level:2},{value:"Inverted File",id:"inverted-file",level:3},{value:"Navigable Small Worlds",id:"navigable-small-worlds",level:3}];function m(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",h2:"h2",h3:"h3",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,a.R)(),...e.components},{Head:n,ImageModal:i}=s;return n||x("Head",!0),i||x("ImageModal",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n,{children:(0,l.jsx)("title",{children:"CMU 15-445 Indexes & Filters"})}),"\n",(0,l.jsx)(s.p,{children:"Index \u8ddf Filter \u662f DBMS \u4e2d\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u80fd\u5920\u5e6b\u52a9\u6211\u5011\u66f4\u5feb\u5730\u67e5\u627e\u8cc7\u6599\u3002"}),"\n",(0,l.jsx)(s.p,{children:"Index \u7528\u65bc\u5feb\u901f\u67e5\u8a62\u8cc7\u6599\u5728\u8868\u4e2d\u7684\u5be6\u969b\u4f4d\u7f6e\uff0c\u50cf\u662f B+Tree Index\u3001Hash Index\u3002\nFilter \u5247\u662f\u7528\u65bc\u5feb\u901f\u5224\u65b7\u67d0\u500b\u8cc7\u6599\u662f\u5426\u53ef\u80fd\u5b58\u5728\u96c6\u5408\u4e2d\uff0c\u50cf\u662f Bloom Filter\u3002"}),"\n",(0,l.jsx)(s.h2,{id:"b-tree",children:"B-Tree"}),"\n",(0,l.jsx)(s.h3,{id:"b-tree-family",children:"B-Tree Family"}),"\n",(0,l.jsx)(s.p,{children:"B-Tree \u4e2d\u7684 B \u901a\u5e38\u4ee3\u8868 Balanced\uff0c\u800c B-Tree \u7684\u8b8a\u7a2e\u6709\u5f88\u591a\uff0c\u4f8b\u5982 :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"B-Tree"}),"\n",(0,l.jsx)(s.li,{children:"B+Tree"}),"\n",(0,l.jsx)(s.li,{children:"B* Tree"}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsx)(s.mrow,{children:(0,l.jsxs)(s.msup,{children:[(0,l.jsx)(s.mi,{children:"B"}),(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"l"}),(0,l.jsx)(s.mi,{children:"i"}),(0,l.jsx)(s.mi,{children:"n"}),(0,l.jsx)(s.mi,{children:"k"})]})]})}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"B^{link}"})]})})}),(0,l.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.8491em"}}),(0,l.jsxs)(s.span,{className:"mord",children:[(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,l.jsx)(s.span,{className:"msupsub",children:(0,l.jsx)(s.span,{className:"vlist-t",children:(0,l.jsx)(s.span,{className:"vlist-r",children:(0,l.jsx)(s.span,{className:"vlist",style:{height:"0.8491em"},children:(0,l.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(s.span,{className:"mord mtight",children:[(0,l.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,l.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"ink"})]})})]})})})})})]})]})})]})," Tree"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u5176\u4e2d\u6700\u5e38\u898b\u7684\u662f B+Tree\uff0c\u5404\u500b DBMS \u4e5f\u6703\u4f7f\u7528\u4e0d\u540c\u7684 B-Tree \u5bb6\u65cf\u7684\u8b8a\u7a2e\uff0c\u5982 PostgreSQL \u4f7f\u7528\u4e86 Lehman and Yao's high-concurrency B-tree management algorithm\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"btree",children:"B+Tree"}),"\n",(0,l.jsxs)(s.p,{children:["B+Tree \u662f\u4e00\u7a2e self-balancing \u7684\u591a\u8def\u641c\u5c0b\u6a39\uff0c\u80fd\u5728 search\u3001insert\u3001delete \u64cd\u4f5c\u4e2d\u4fdd\u8b49 ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"O"}),(0,l.jsx)(s.mo,{stretchy:"false",children:"("}),(0,l.jsx)(s.mi,{children:"log"}),(0,l.jsx)(s.mo,{children:"\u2061"}),(0,l.jsx)(s.mi,{children:"n"}),(0,l.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(\\log n)"})]})})}),(0,l.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,l.jsx)(s.span,{className:"mopen",children:"("}),(0,l.jsxs)(s.span,{className:"mop",children:["lo",(0,l.jsx)(s.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(s.span,{className:"mclose",children:")"})]})})]})," \u7684\u6642\u9593\u8907\u96dc\u5ea6\uff0c\u4e26\u4e14\u5728 sequential access\uff08\u5982 range scan\uff09\u6642\u80fd\u6709\u6548\u7387\u5730\u9054\u6210 ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"O"}),(0,l.jsx)(s.mo,{stretchy:"false",children:"("}),(0,l.jsx)(s.mi,{children:"k"}),(0,l.jsx)(s.mo,{children:"+"}),(0,l.jsx)(s.mi,{children:"log"}),(0,l.jsx)(s.mo,{children:"\u2061"}),(0,l.jsx)(s.mi,{children:"n"}),(0,l.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(k + \\log n)"})]})})}),(0,l.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,l.jsx)(s.span,{className:"mopen",children:"("}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mbin",children:"+"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsxs)(s.span,{className:"mop",children:["lo",(0,l.jsx)(s.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(s.span,{className:"mclose",children:")"})]})]})]})," \u7684\u8907\u96dc\u5ea6\uff0c\u5176\u4e2d ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsx)(s.mrow,{children:(0,l.jsx)(s.mi,{children:"k"})}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"k"})]})})}),(0,l.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.6944em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]})," \u70ba\u8f38\u51fa\u8cc7\u6599\u91cf\u3002"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image.webp",caption:"B+ Tree Example"}),"\n",(0,l.jsx)(s.p,{children:"M-way B+Tree \u7684\u7279\u9ede\u6709 :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u6bcf\u500b\u7bc0\u9ede\u6700\u591a\u5132\u5b58 M \u500b key\uff0c\u4e26\u4e14\u6709 M+1 \u500b children"}),"\n",(0,l.jsx)(s.li,{children:"\u6bcf\u500b leaf node \u7684\u6df1\u5ea6\u90fd\u76f8\u540c (perfectly balanced)"}),"\n",(0,l.jsxs)(s.li,{children:["\u9664\u4e86 root node \u4ee5\u5916\uff0c\u6bcf\u500b\u7bc0\u9ede\u90fd\u81f3\u5c11\u8981\u6709 ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"M"}),(0,l.jsx)(s.mi,{mathvariant:"normal",children:"/"}),(0,l.jsx)(s.mn,{children:"2"}),(0,l.jsx)(s.mo,{children:"\u2212"}),(0,l.jsx)(s.mn,{children:"1"}),(0,l.jsx)(s.mo,{children:"\u2264"}),(0,l.jsx)(s.mi,{children:"k"}),(0,l.jsx)(s.mi,{children:"e"}),(0,l.jsx)(s.mi,{children:"y"}),(0,l.jsx)(s.mi,{children:"s"}),(0,l.jsx)(s.mo,{children:"\u2264"}),(0,l.jsx)(s.mi,{children:"M"}),(0,l.jsx)(s.mo,{children:"\u2212"}),(0,l.jsx)(s.mn,{children:"1"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"M / 2 - 1 \\leq keys \\leq M - 1"})]})})}),(0,l.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,l.jsx)(s.span,{className:"mord",children:"/2"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,l.jsx)(s.span,{className:"mord",children:"1"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(s.span,{className:"mrel",children:"\u2264"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,l.jsx)(s.span,{className:"mord mathnormal",children:"eys"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(s.span,{className:"mrel",children:"\u2264"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,l.jsx)(s.span,{className:"mord",children:"1"})]})]})]})," \u500b key (\u534a\u6eff)"]}),"\n",(0,l.jsx)(s.li,{children:"leaf node \u6703\u900f\u904e doubly linked list \u9023\u63a5\uff0c\u63d0\u9ad8 sequential access \u7684\u6548\u7387"}),"\n"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-1.webp",caption:"B+ Tree Leaf Node"}),"\n",(0,l.jsx)(s.p,{children:"\u6bcf\u500b node \u4e2d\u90fd\u5305\u542b\u4e86\u4e00\u500b\u7d93\u904e\u6392\u5e8f\u7684 key / value \u9663\u5217\uff0c\u5176\u4e2d key \u5c31\u662f index \u7684\u503c\uff0c\u800c value \u5247\u6703\u6839\u64da\u662f inner node \u6216 leaf node \u800c\u6709\u6240\u4e0d\u540c\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u5176\u4e2d inner node \u7684\u503c\u5c31\u662f\u6307\u5411\u4e0b\u4e00\u500b\u7bc0\u9ede\u7684\u6307\u6a19\uff0c\u800c leaf node \u7684\u503c\u5247\u6709\u5169\u7a2e\u4e0d\u540c\u7684\u5be6\u4f5c\u65b9\u5f0f :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Record IDs : \u76f4\u63a5\u5132\u5b58\u6307\u5411 tuple \u7684\u6307\u6a19"}),"\n",(0,l.jsx)(s.li,{children:"Tuple Data : \u76f4\u63a5\u5132\u5b58 tuple \u7684\u8cc7\u6599\uff0c\u4f46\u5c0d\u65bc secondary index \u4f86\u8aaa\uff0c\u9019\u6a23\u6703\u9020\u6210\u91cd\u8907\u5132\u5b58"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"btree-operations",children:"B+Tree Operations"}),"\n",(0,l.jsxs)(s.p,{children:["\u6709\u95dc B+Tree \u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u53c3\u8003 ",(0,l.jsx)(s.a,{href:"https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html",children:"\u9019\u500b\u7db2\u7ad9"}),"\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u6211\u5011\u4e5f\u6703\u5728 ",(0,l.jsx)(s.a,{href:"/RulerChen-Website/en/docs/CMU15-445/p2",children:"Project #2"})," \u4e2d\u5be6\u4f5c B+Tree \u7684\u5404\u7a2e\u64cd\u4f5c\u3002"]}),"\n",(0,l.jsx)(s.h3,{id:"btree-vs-b-tree",children:"B+Tree vs B-Tree"}),"\n",(0,l.jsx)(s.p,{children:"B-Tree \u7684\u8cc7\u6599\u5206\u5e03\u5728 internal \u548c leaf node\uff0c\u800c B+Tree \u6240\u6709\u8cc7\u6599\u90fd\u5b58\u5728\u8449\u7bc0\u9ede\uff0cinternal node \u53ea\u5b58 key\uff0c\u9019\u5c0e\u81f4 B+Tree \u7684\u9ad8\u5ea6\u901a\u5e38\u66f4\u4f4e\uff0c\u641c\u5c0b\u8d77\u4f86\u6703\u66f4\u7a69\u5b9a\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u9664\u6b64\u4e4b\u5916\uff0cB+Tree \u7684\u8449\u7bc0\u9ede\u6709\u93c8\u7d50\uff0c\u6240\u4ee5\u5728 sequential \u6216 range query \u4e0a\u6548\u7387\u9060\u9ad8\u65bc B-Tree\u3002\n\u96d6\u7136\u5169\u8005\u7684 search\u3001insert\u3001delete \u8907\u96dc\u5ea6\u90fd\u662f ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"O"}),(0,l.jsx)(s.mo,{stretchy:"false",children:"("}),(0,l.jsx)(s.mi,{children:"log"}),(0,l.jsx)(s.mo,{children:"\u2061"}),(0,l.jsx)(s.mi,{children:"n"}),(0,l.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(\\log n)"})]})})}),(0,l.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,l.jsx)(s.span,{className:"mopen",children:"("}),(0,l.jsxs)(s.span,{className:"mop",children:["lo",(0,l.jsx)(s.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(s.span,{className:"mclose",children:")"})]})})]}),"\uff0c\u4f46\u56e0\u70ba B+Tree \u66f4\u9069\u5408\u786c\u789f\u5b58\u53d6\uff0c\u6240\u4ee5\u5728\u5be6\u969b\u61c9\u7528\u4e2d\u6703\u6bd4 B-Tree \u66f4\u6709\u6548\u7387\u3002"]}),"\n",(0,l.jsx)(s.h3,{id:"composite-indexes",children:"Composite Indexes"}),"\n",(0,l.jsx)(s.p,{children:"B+Tree \u53ef\u4ee5\u652f\u63f4 composite indexes\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5728\u4e00\u500b index \u4e2d\u5132\u5b58\u591a\u500b key\u3002"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx ON table_name (key1, key2, key3);\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u9019\u6a23\u7684 index \u53ef\u4ee5\u7528\u4f86\u52a0\u901f\u67e5\u8a62\uff0c\u4e26\u4e14\u53ef\u4ee5\u652f\u63f4\u591a\u500b key \u7684\u67e5\u8a62\uff0c\u4f46\u5fc5\u9808\u9075\u5b88\u6700\u5de6\u5339\u914d\u898f\u5247 (leftmost indexing rule)\uff0c\u4e5f\u5c31\u662f\u8aaa\uff0c\u67e5\u8a62\u6642\u5fc5\u9808\u5f9e\u5de6\u5230\u53f3\u4f7f\u7528 index \u4e2d\u7684 key\u3002"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sql",children:"-- ok\nSELECT * FROM table_name WHERE key1 = 1 AND key2 = 2 AND key3 = 3;\n\n-- ok\nSELECT * FROM table_name WHERE key1 = 1 AND key2 = 2;\n\n-- ok\nSELECT * FROM table_name WHERE key1 = 1;\n\n-- only key1 index is used\nSELECT * FROM table_name WHERE key1 = 1 AND key3 = 3;\n\n-- not ok\nSELECT * FROM table_name WHERE key2 = 2 AND key3 = 3;\n"})}),"\n",(0,l.jsx)(s.h3,{id:"duplicate-keys",children:"Duplicate Keys"}),"\n",(0,l.jsx)(s.p,{children:"\u6709\u5169\u7a2e\u5e38\u898b\u7684\u65b9\u5f0f\u4f86\u8655\u7406 duplicate keys :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Append Record ID : \u628a\u552f\u4e00\u7684 Record ID \u9644\u52a0\u5728 key \u5f8c\u9762\uff0c\u9019\u6a23\u53ef\u4ee5\u4fdd\u8b49\u6bcf\u500b key \u90fd\u662f\u552f\u4e00\u7684\uff0c\u4f46\u6703\u589e\u52a0 index \u7684\u5927\u5c0f\u3002"}),"\n",(0,l.jsx)(s.li,{children:"Overflow Leaf Nodes : \u5141\u8a31\u7bc0\u9ede\u6ea2\u51fa\u4f86\u5132\u5b58 duplicate keys\u3002"}),"\n"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-2.webp",caption:"B+ Tree Append Record ID"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-3.webp",caption:"B+ Tree Overflow Leaf Nodes"}),"\n",(0,l.jsx)(s.h3,{id:"clustered-indexes",children:"Clustered Indexes"}),"\n",(0,l.jsx)(s.p,{children:"Clustered Index \u662f\u4e00\u7a2e\u8cc7\u6599\u5be6\u9ad4\u7684\u6392\u5e8f\u65b9\u5f0f\uff0c\u6703\u8b93\u8cc7\u6599\u8868\u7684\u8cc7\u6599\u4f9d\u7167\u67d0\u500b\u6b04\u4f4d\u6392\u5e8f\u5132\u5b58\uff0c\u800c\u4e0d\u662f\u96a8\u6a5f\u6216\u63d2\u5165\u9806\u5e8f\u3002\n\u9019\u5c0d\u65bc\u7bc4\u570d\u67e5\u8a62\u975e\u5e38\u6709\u7528\uff0c\u56e0\u70ba\u53ef\u4ee5\u76f4\u63a5\u5f9e\u786c\u789f\u4e0a\u8b80\u53d6\u9023\u7e8c\u7684\u8cc7\u6599\u9801\u9762\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-8.webp",caption:"B+ Tree Clustered Index"}),"\n",(0,l.jsx)(s.p,{children:"\u5728 PostgreSQL \u4e2d\uff0c\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684 SQL \u6307\u4ee4\u4f86\u505a\u4e00\u6b21 one-time \u7684 clustering :"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sql",children:"CLUSTER table_name USING index_name;\n"})}),"\n",(0,l.jsx)(s.h3,{id:"index-scan-page-sorting",children:"Index Scan Page Sorting"}),"\n",(0,l.jsx)(s.p,{children:"\u7531\u65bc\u76f4\u63a5\u5f9e unclustered index \u4e2d\u53d6\u5f97\u8cc7\u6599\u975e\u5e38\u6c92\u6548\u7387\uff0c\u56e0\u6b64 DBMS \u53ef\u4ee5\u5148\u628a\u8981\u7528\u7684 tuple \u90fd\u627e\u51fa\u4f86\uff0c\u7136\u5f8c\u6839\u64da page_id \u505a\u6392\u5e8f\uff0c\u9019\u6a23\u5c31\u53ef\u4ee5\u6e1b\u5c11\u786c\u789f\u7684\u96a8\u6a5f\u5b58\u53d6\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-4.webp",caption:"B+ Tree Index Scan Page Sorting"}),"\n",(0,l.jsx)(s.h2,{id:"btree-design-choices",children:"B+Tree Design Choices"}),"\n",(0,l.jsx)(s.p,{children:"B+Tree \u770b\u4f3c\u662f\u4e00\u500b\u55ae\u7d14\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u4f46\u5be6\u969b\u4e0a\u6709\u5f88\u591a\u8a2d\u8a08\u4e0a\u7684\u9078\u64c7\u6703\u5f71\u97ff\u5b83\u7684\u6548\u80fd\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"node-size",children:"Node Size"}),"\n",(0,l.jsx)(s.p,{children:"\u4e00\u822c\u4f86\u8aaa\uff0c\u786c\u789f I/O \u5305\u542b\u4e86 seek time \u8ddf transfer time\uff0c\u5c0d\u65bc HDD \u4f86\u8aaa\uff0cseek time \u901a\u5e38\u662f\u4e3b\u8981\u7684\u74f6\u9838\uff0c\u56e0\u6b64\u6211\u5011\u5e0c\u671b\u6bcf\u6b21\u8b80\u53d6\u7684\u8cc7\u6599\u91cf\u8d8a\u591a\u8d8a\u597d\uff0c\u800c\u5c0d\u65bc In-Memory \u4f86\u8aaa\uff0ccache miss \u624d\u662f\u4e3b\u8981\u7684\u74f6\u9838\uff0c\u56e0\u6b64\u6211\u5011\u5e0c\u671b\u6bcf\u6b21\u8b80\u53d6\u7684\u8cc7\u6599\u91cf\u525b\u597d\u80fd\u585e\u9032 cache line\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u4e5f\u56e0\u6b64\uff0c\u4e0d\u540c\u7684\u5132\u5b58\u5a92\u4ecb\u6703\u6709\u4e0d\u540c\u7684\u6700\u4f73 node size :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"HDD : 1MB"}),"\n",(0,l.jsx)(s.li,{children:"SSD : 10KB"}),"\n",(0,l.jsx)(s.li,{children:"In-Memory : 512B"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"merge-threshold",children:"Merge Threshold"}),"\n",(0,l.jsx)(s.p,{children:"\u7531\u65bc B+Tree \u7684\u5408\u4f75\u958b\u92b7\u5f88\u5927\uff0c\u6240\u4ee5\u6709\u4e9b DBMS \u4e26\u4e0d\u6703\u5728\u6bcf\u6b21\u63d2\u5165\u6642\u90fd\u5408\u4f75\uff0c\u800c\u662f\u6703\u7531\u5176\u4ed6\u7684 process \u4f86\u5b9a\u671f\u8655\u7406\u5408\u4f75\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"variable-length-keys",children:"Variable Length Keys"}),"\n",(0,l.jsx)(s.p,{children:"\u8655\u7406\u4e0d\u5b9a\u9577\u5ea6\u7684 key \u6709\u4ee5\u4e0b\u5e7e\u7a2e\u65b9\u5f0f :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Pointers : \u5132\u5b58\u4e00\u500b\u6307\u6a19\u6307\u5411 tuple"}),"\n",(0,l.jsx)(s.li,{children:"Variable-Length Nodes : \u5141\u8a31\u53ef\u8b8a\u9577\u5ea6\uff0c\u4f46\u9700\u8981\u7cbe\u7d30\u7684\u8a18\u61b6\u9ad4\u7ba1\u7406"}),"\n",(0,l.jsx)(s.li,{children:"Padding : \u5c07 key \u586b\u6eff\u5230\u56fa\u5b9a\u9577\u5ea6"}),"\n",(0,l.jsx)(s.li,{children:"Key Map / Indirection : \u4f7f\u7528\u4e00\u500b\u56fa\u5b9a\u9577\u5ea6\u7684 key map \u4f86\u6307\u5411\u5be6\u969b\u7684 key / value\uff0c\u6709\u9ede\u985e\u4f3c slotted page"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u679c\u4e00\u500b key \u5c31\u6bd4 node \u9084\u5927\uff0c\u90a3\u5c31\u9700\u8981\u518d\u628a\u5b83\u5b58\u5230 overflow page \u4e2d\u4f86\u8655\u7406\u3002\n\u5728 PostgreSQL \u4e2d\uff0c\u9019\u500b overflow page \u88ab\u7a31\u70ba TOAST (The Oversized-Attribute Storage Technique)\uff0c\u7576\u6709\u8d85\u904e 2KB \u7684\u8cc7\u6599\u6642\uff0c\u5c31\u6703\u5207\u6210\u591a\u584a\u4e26\u5b58\u5230\u7368\u7acb\u7684 TOAST \u8868\u4e2d\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"intra-node-search",children:"Intra-Node Search"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u7bc0\u9ede\u5167\u641c\u7d22\u6709\u4e09\u7a2e\u65b9\u5f0f :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Linear : \u904d\u6b77\u6574\u500b\u7bc0\u9ede\u3002\u7dda\u6027\u6383\u63cf\u5c0d CPU cache \u53cb\u5584\uff0c\u4e26\u4e14\u80fd\u642d\u914d SIMD \u6307\u4ee4\u4f86\u9032\u884c\u52a0\u901f\uff0c\u56e0\u6b64\u5373\u4f7f B+Tree \u7684\u7bc0\u9ede\u5167\u662f\u6392\u5e8f\u904e\u7684\uff0c\u7dda\u6027\u6383\u63cf\u4ecd\u7136\u662f\u5e38\u898b\u7684\u9078\u64c7\u3002"}),"\n",(0,l.jsx)(s.li,{children:"Binary : \u4e8c\u5206\u641c\u7d22\uff0c\u6f14\u7b97\u6cd5\u8907\u96dc\u5ea6\u6bd4\u8f03\u4f4e\uff0c\u4f46\u5c0d CPU cache \u4e0d\u53cb\u5584"}),"\n",(0,l.jsx)(s.li,{children:"Interpolation : \u7528 key \u7684\u5206\u5e03\u4f86\u4f30\u8a08\u4f4d\u7f6e\uff0c\u8209\u4f8b\u4f86\u8aaa\uff0c\u5982\u679c key \u662f 1 \u5230 1000 \u4e4b\u9593\u7684\u6578\u5b57\uff0c\u4e14\u6211\u5011\u8981\u627e 500\uff0c\u90a3\u5c31\u53ef\u4ee5\u76f4\u63a5\u8df3\u5230\u4e2d\u9593\u7684\u4f4d\u7f6e\u3002"}),"\n"]}),"\n",(0,l.jsxs)(s.admonition,{type:"note",children:[(0,l.jsx)(s.p,{children:"SIMD (Single Instruction, Multiple Data) \u662f\u4e00\u7a2e\u5e73\u884c\u904b\u7b97\u7684\u6280\u8853\uff0c\u53ef\u4ee5\u8b93 CPU \u5728\u540c\u4e00\u500b\u6307\u4ee4\u9031\u671f\u5167\u5c0d\u591a\u500b\u8cc7\u6599\u9032\u884c\u76f8\u540c\u7684\u64cd\u4f5c\uff0c\u8207\u4e4b\u76f8\u5c0d\u7684\u662f SISD (Single Instruction, Single Data)\uff0c\u4e5f\u5c31\u662f\u50b3\u7d71\u7684\u55ae\u4e00\u8cc7\u6599\u6d41\u8655\u7406\u65b9\u5f0f\u3002"}),(0,l.jsxs)(s.p,{children:["\u5728\u73fe\u4ee3\u7684 CPU \u4e2d\uff0c\u9664\u4e86\u6709 eax \u9019\u7a2e\u901a\u7528\u7684\u66ab\u5b58\u5668\u5916\uff0c\u9084\u6709\u4e00\u7a2e\u53eb\u505a\u5411\u91cf\u66ab\u5b58\u5668 (vector register) \u7684\u6771\u897f\uff0c\u5e38\u898b\u7684\u6709 XMM (128-bit)\u3001YMM (256-bit)\u3001ZMM (512-bit) \u7b49\u7b49\uff0c\u9019\u4e9b\u5411\u91cf\u66ab\u5b58\u5668\u53ef\u4ee5\u4e00\u6b21\u5132\u5b58\u591a\u500b\u8cc7\u6599\u3002\n\u800c SIMD \u6307\u4ee4\u96c6\u5c31\u662f\u7528\u4f86\u64cd\u4f5c\u9019\u4e9b\u5411\u91cf\u66ab\u5b58\u5668\u7684\uff0c\u5b83\u53ef\u4ee5\u8b93\u6211\u5011\u5728\u4e00\u500b\u6307\u4ee4\u9031\u671f\u5167\u5c0d\u591a\u500b\u8cc7\u6599\u9032\u884c\u76f8\u540c\u7684\u904b\u7b97\uff0c\u5982 ",(0,l.jsx)(s.code,{children:"_mm_add_epi32"})," \u53ef\u4ee5\u540c\u6642\u5c0d\u5411\u91cf\u66ab\u5b58\u5668\u4e2d\u7684\u56db\u500b 32-bit \u6574\u6578\u9032\u884c\u52a0\u6cd5\u904b\u7b97\uff0c",(0,l.jsx)(s.code,{children:"_mm_cmpgt_epi32"})," \u53ef\u4ee5\u540c\u6642\u6bd4\u8f03\u5411\u91cf\u66ab\u5b58\u5668\u4e2d\u7684\u56db\u500b 32-bit \u6574\u6578\u3002"]})]}),"\n",(0,l.jsx)(s.h2,{id:"b-tree-optimizations",children:"B+ Tree Optimizations"}),"\n",(0,l.jsx)(s.h3,{id:"prefix-compression",children:"Prefix Compression"}),"\n",(0,l.jsx)(s.p,{children:"\u540c\u4e00\u500b node \u5e38\u5e38\u6709\u76f8\u540c\u7684 key\uff0c\u6211\u5011\u53ef\u4ee5\u900f\u904e prefix \u4f86\u6e1b\u5c11\u5132\u5b58\u7a7a\u9593\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-5.webp",caption:"B+ Tree Prefix"}),"\n",(0,l.jsx)(s.h3,{id:"deduplication",children:"Deduplication"}),"\n",(0,l.jsx)(s.p,{children:"\u53ef\u4ee5\u5c07\u91cd\u8907\u7684 key \u5408\u4f75\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-6.webp",caption:"B+ Tree Deduplication"}),"\n",(0,l.jsx)(s.h3,{id:"suffix-truncation",children:"Suffix Truncation"}),"\n",(0,l.jsx)(s.p,{children:"\u5728 inner node \u4e2d\uff0c key \u53ea\u662f\u7528\u4f86\u6c7a\u5b9a\u8981\u5f80\u5de6\u9084\u662f\u5f80\u53f3\u8d70\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u5132\u5b58\u53ef\u4f9b\u8fa8\u8b58\u7684\u90e8\u5206\u3002\n\u4f8b\u5982 key \u662f abcdefgh\uff0c\u6211\u5011\u53ef\u4ee5\u53ea\u5132\u5b58 abc\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"pointer-swizzling",children:"Pointer Swizzling"}),"\n",(0,l.jsx)(s.p,{children:"\u5728 DBMS \u4e2d\uff0c\u5982\u679c\u6211\u5011\u8981\u67e5\u8a62\u4e00\u500b page \u7684\u4f4d\u7f6e\uff0c\u901a\u5e38\u8981\u5e36\u8457 page_id \u4f86\u67e5\u8a62 page table\uff0c\u4f46\u5982\u679c\u9019\u500b page \u5df2\u7d93\u56fa\u5b9a\u5728 buffer pool \u4e2d\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u4f7f\u7528\u539f\u59cb\u6307\u6a19\u800c\u4e0d\u9700\u8981\u518d\u8a2a\u554f page table\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"bulk-insert",children:"Bulk Insert"}),"\n",(0,l.jsx)(s.p,{children:"\u6700\u5feb\u5efa\u7acb B+Tree \u7684\u65b9\u6cd5\u662f\u5c07 key \u5148\u6392\u597d\u5e8f\uff0c\u518d\u5f9e\u4e0b\u5f80\u4e0a\u5efa\u7acb B+Tree\uff0c\u9069\u5408\u5728\u5927\u91cf\u8cc7\u6599\u532f\u5165\u6642\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"write-optimized-b-tree",children:"Write-Optimized B+ Tree"}),"\n",(0,l.jsxs)(s.p,{children:["\u56e0\u70ba\u5206\u88c2\u548c\u5408\u4f75\u7bc0\u9ede\u5728 B+Tree \u4e2d\u975e\u5e38\u8017\u6642\uff0c\u56e0\u6b64\u6709\u4e9b B-Tree \u7684\u8b8a\u9ad4\u6703\u5ef6\u9072\u9019\u4e9b\u884c\u70ba\uff0c\u5982 ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"B"}),(0,l.jsx)(s.mi,{children:"\u03f5"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"B\\epsilon"})]})})}),(0,l.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,l.jsx)(s.span,{className:"mord mathnormal",children:"\u03f5"})]})})]}),"-Tree\uff0c\u9019\u7a2e\u6a39\u6703\u5c07\u8b8a\u52d5\u5132\u5b58\u5728 log \u6a94\u4e26\u6162\u6162\u5f80\u4e0b\u50b3\u905e\u3002"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-7.webp",caption:"B-epsilon tree"}),"\n",(0,l.jsx)(s.h2,{id:"bloom-filter",children:"Bloom Filter"}),"\n",(0,l.jsx)(s.p,{children:"Bloom Filter \u662f\u4e00\u7a2e\u6a5f\u7387\u578b\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u63d0\u4f9b\u4e86 insert \u8ddf lookup \u7684\u529f\u80fd (\u6c92\u6709 delete)\uff0c\u53ef\u4ee5\u5e6b\u52a9\u6211\u5011\u5feb\u901f\u7684\u5224\u65b7\u67d0\u500b\u8cc7\u6599\u662f\u5426\u5b58\u5728\u65bc\u96c6\u5408\u4e2d\u3002\n\u6709\u53ef\u80fd\u6703\u7522\u751f false positive (\u6c92\u6709\u9019\u500b\u8cc7\u6599\uff0c\u4f46\u56de\u50b3\u6709)\uff0c\u4f46\u4e0d\u6703\u7522\u751f false negative (\u6709\u9019\u500b\u8cc7\u6599\uff0c\u4f46\u56de\u50b3\u6c92\u6709)\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u64cd\u4f5c\u65b9\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"\u521d\u59cb\u5316\u4e00\u500b\u4f4d\u5143\u9663\u5217 (bitmap)\uff0c\u5927\u5c0f\u70ba m \u4f4d\u5143\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u9078\u64c7 k \u500b hash function\uff0c\u9019\u4e9b hash function \u53ef\u4ee5\u5c07\u8cc7\u6599\u6620\u5c04\u5230 0 \u5230 m-1 \u7684\u7bc4\u570d\u5167\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u7576\u63d2\u5165\u4e00\u500b\u8cc7\u6599\u6642\uff0c\u4f7f\u7528 k \u500b hash function \u8a08\u7b97\u51fa k \u500b\u4f4d\u7f6e\uff0c\u5c07\u9019\u4e9b\u4f4d\u7f6e\u7684\u4f4d\u5143\u8a2d\u70ba 1\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u7576\u67e5\u627e\u4e00\u500b\u8cc7\u6599\u6642\uff0c\u4f7f\u7528 k \u500b hash function\uff0c\u6aa2\u67e5 k \u500b\u4f4d\u7f6e\u662f\u5426\u90fd\u662f 1\uff0c\u5982\u679c\u662f\uff0c\u5247\u53ef\u80fd\u5b58\u5728\uff0c\u5982\u679c\u6709\u4efb\u4f55\u4e00\u500b\u4f4d\u7f6e\u662f 0\uff0c\u5247\u4e00\u5b9a\u4e0d\u5b58\u5728\u3002"}),"\n"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-17.webp",caption:"Bloom Filter"}),"\n",(0,l.jsx)(s.p,{children:"\u9664\u4e86\u6bd4\u8f03\u6b63\u7d71\u7684 Bloom Filter \u4e4b\u5916\uff0c\u9084\u6709\u4e00\u4e9b\u8b8a\u9ad4 :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Counting Bloom Filter : \u4f7f\u7528\u8a08\u6578\u5668\u4f86\u4ee3\u66ff\u4f4d\u5143\u9663\u5217\uff0c\u9019\u6a23\u53ef\u4ee5\u652f\u63f4\u522a\u9664\u64cd\u4f5c\u3002"}),"\n",(0,l.jsx)(s.li,{children:"Cuckoo Filter : \u4f7f\u7528 cuckoo hashing \u8ddf fingerprint \u6280\u8853\u4f86\u6e1b\u5c11 false positive \u7684\u6a5f\u7387\uff0c\u4e26\u4e14\u652f\u63f4\u522a\u9664\u64cd\u4f5c\u3002"}),"\n",(0,l.jsx)(s.li,{children:"Succinct Range Filter : \u4e00\u7a2e\u4e0d\u53ef\u4fee\u6539\u7684 Bloom Filter\uff0c\u4f7f\u7528\u4f4d\u5143\u9663\u5217\u4f86\u8868\u793a\u4e00\u500b\u7bc4\u570d\u5167\u7684\u503c\u662f\u5426\u5b58\u5728\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"skip-list",children:"Skip List"}),"\n",(0,l.jsxs)(s.p,{children:["Skip list \u662f\u4e00\u7a2e\u57fa\u65bc linked list \u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u63d0\u4f9b\u4e86\u985e\u4f3c\u65bc\u5e73\u8861\u6a39\u7684\u67e5\u627e\u6548\u7387 ",(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mi,{children:"O"}),(0,l.jsx)(s.mo,{stretchy:"false",children:"("}),(0,l.jsx)(s.mi,{children:"log"}),(0,l.jsx)(s.mo,{children:"\u2061"}),(0,l.jsx)(s.mi,{children:"n"}),(0,l.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(\\log n)"})]})})}),(0,l.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,l.jsx)(s.span,{className:"mopen",children:"("}),(0,l.jsxs)(s.span,{className:"mop",children:["lo",(0,l.jsx)(s.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,l.jsx)(s.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(s.span,{className:"mclose",children:")"})]})})]}),"\uff0c\u4f46\u5be6\u73fe\u8d77\u4f86\u66f4\u7c21\u55ae\u3002\n\u5b83\u4f7f\u7528\u591a\u5c64 linked list \u4f86\u8df3\u904e\u4e00\u4e9b\u7bc0\u9ede\uff0c\u5f9e\u800c\u52a0\u5feb\u67e5\u627e\u901f\u5ea6\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"\u8207 B+Tree \u4e00\u6a23\uff0cSkip list \u4ee5\u6709\u5e8f\u7684\u65b9\u5f0f\u5132\u5b58\u8cc7\u6599\uff0c\u4e0d\u540c\u7684\u662f\u5728\u63d2\u5165\u8ddf\u522a\u9664\u7684\u6642\u5019\uff0cSkip list \u4e0d\u9700\u8981\u9032\u884c\u5206\u88c2\u6216\u5408\u4f75\u7bc0\u9ede\uff0c\u800c\u662f\u900f\u904e\u96a8\u6a5f\u9078\u64c7 (\u4e1f\u786c\u5e63) \u7684\u65b9\u5f0f\u4f86\u7dad\u6301\u5e73\u8861\u3002"}),"\n",(0,l.jsx)(s.p,{children:"Skip list \u63d0\u4f9b\u4e86\u4e09\u7a2e\u64cd\u4f5c\uff0c\u5206\u5225\u662f\u63d2\u5165\u3001\u522a\u9664\u548c\u67e5\u627e\u3002"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u67e5\u627e\uff1a\u5f9e\u6700\u9ad8\u5c64\u958b\u59cb\uff0c\u53ea\u8981\u4e0b\u4e00\u500b\u7bc0\u9ede\u5c0f\u65bc\u76ee\u6a19\u503c\u5c31\u7e7c\u7e8c\u5f80\u53f3\u8d70\uff0c\u4e0d\u7136\u7684\u8a71\u5c31\u5f80\u4e0b\u4e00\u5c64\u8d70\uff0c\u76f4\u5230\u5230\u9054\u6700\u5e95\u5c64\u70ba\u6b62\u3002"}),"\n",(0,l.jsxs)(s.li,{children:["\u63d2\u5165\uff1a","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u9996\u5148\u9700\u8981\u96a8\u6a5f\u9078\u64c7\u4e00\u500b\u5c64\u7d1a\uff0c\u5f9e\u6700\u4f4e\u5373\u958b\u59cb\u4e1f\u786c\u5e63\u6c7a\u5b9a\u662f\u5426\u8981\u5728\u9019\u4e00\u5c64\u63d2\u5165\uff0c\u5982\u679c\u4e0d\u662f\u7684\u8a71\u5c31\u5411\u4e0a\u79fb\u52d5\u4e00\u5c64\u76f4\u5230\u6700\u9ad8\u5c64\u70ba\u6b62\uff0c\u78ba\u4fdd\u6bcf\u5c64\u7684\u5206\u5e03\u662f\u5c0d\u6578\u7d1a\u5225\u7684\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u7136\u5f8c\u8ddf\u67e5\u627e\u4e00\u6a23\uff0c\u5f9e\u6700\u9ad8\u5c64\u958b\u59cb\uff0c\u627e\u5230\u6bcf\u4e00\u5c64\u4e2d\u6b63\u78ba\u7684\u63d2\u5165\u4f4d\u7f6e\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u6700\u5f8c\u5f9e\u6700\u5e95\u5c64\u958b\u59cb\u63d2\u5165\u7bc0\u9ede\uff0c\u76f4\u5230\u76ee\u6a19\u5c64\u7d1a\u3002\u5f9e\u4e0b\u5230\u4e0a\u63d2\u5165\u7684\u539f\u56e0\u662f\u70ba\u4e86\u4f75\u767c\u6027\uff0c\u56e0\u70ba\u53ea\u6709\u6700\u5e95\u5c64\u7684\u88ab\u9023\u63a5\u597d\u4e4b\u5f8c\uff0c\u9019\u500b\u7bc0\u9ede\u624d\u7b97\u662f\u5c0d\u5916\u53ef\u898b\u7684\uff0c\u642d\u914d CAS \u751a\u81f3\u53ef\u4ee5\u505a\u5230\u7121\u9396\u7684\u63d2\u5165\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\u522a\u9664\uff1a","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u5148\u627e\u51fa\u6240\u6709\u8981\u522a\u9664\u7684\u7bc0\u9ede\uff0c\u63a5\u8457\u505a\u8edf\u522a\u9664\uff0c\u6700\u5f8c GC \u6703\u5b9a\u671f\u6e05\u7406\u9019\u4e9b\u8edf\u522a\u9664\u7684\u7bc0\u9ede\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-9.webp",caption:"Skip List"}),"\n",(0,l.jsx)(s.p,{children:"Skip list \u7684\u4e3b\u8981\u512a\u9ede\u5728\u65bc\u4e0d\u9700\u8981\u505a rebalancing\uff0c\u9019\u4e5f\u5c31\u4ee3\u8868\u4e86\u9396\u7684\u958b\u92b7\u6703\u76f8\u5c0d\u8f03\u4f4e\uff0c\u4e14\u5982\u679c\u4e0d\u4f7f\u7528 reverse pointer \u7684\u8a71\u8a18\u61b6\u9ad4\u7684\u7528\u91cf\u4e5f\u6703\u76f8\u5c0d\u8f03\u5c11\u3002\n\u7f3a\u9ede\u5728\u65bc\u4e0d\u5229\u65bc\u786c\u789f\u5feb\u53d6\uff0c\u56e0\u70ba\u6709\u4e0d\u540c\u5c64\u7d1a\u7684\u7bc0\u9ede\u6703\u5206\u5e03\u5728\u4e0d\u540c\u7684\u8a18\u61b6\u9ad4\u4f4d\u7f6e\uff0c\u9019\u6a23\u6703\u5c0e\u81f4 cache miss \u7684\u6a5f\u7387\u589e\u52a0\uff0c\u4e14\u5982\u679c\u6c92\u6709 reverse pointer \u7684\u8a71\u53cd\u5411\u641c\u7d22\u6703\u76f8\u5c0d\u56f0\u96e3\u3002"}),"\n",(0,l.jsx)(s.h2,{id:"trie",children:"Trie"}),"\n",(0,l.jsx)(s.p,{children:"\u56e0\u70ba B+Tree \u4e0d\u63d0\u4f9b\u95dc\u65bc\u5167\u90e8\u7bc0\u9ede\u4e0b\u65b9\u662f\u5426\u5b58\u5728\u7bc0\u9ede\u7684\u8cc7\u8a0a\uff0c\u6240\u4ee5\u8981\u5224\u65b7\u4e00\u500b\u9375\u662f\u5426\u5b58\u5728\u5c31\u5fc5\u9808\u904d\u6b77\u5230\u8449\u7bc0\u9ede\uff0c\u9019\u53ef\u80fd\u5c0e\u81f4\u591a\u6b21\u6602\u8cb4\u7684\u78c1\u789f I/O (cache miss)\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u5b57\u5178\u6a39\u662f\u4e00\u7a2e\u6a39\u5f62\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u5b83\u5c07\u9375\u5132\u5b58\u70ba\u6578\u5b57 (\u6216\u5b57\u5143)\uff0c\u4e26\u4e14\u6bcf\u500b\u7bc0\u9ede\u4ee3\u8868\u4e00\u500b\u6578\u5b57\u7684\u524d\u7db4\u3002\n\u9019\u4e9b\u6578\u5b57\u53ef\u4ee5\u662f ASCII \u5b57\u5143\u3001Unicode \u5b57\u5143\u6216\u5176\u4ed6\u985e\u578b\u7684\u6578\u5b57\u3002\n\u5b57\u5178\u6a39\u7684\u6bcf\u500b\u7bc0\u9ede\u90fd\u5305\u542b\u4e00\u500b\u6307\u5411\u4e0b\u4e00\u5c64\u7bc0\u9ede\u7684\u6307\u91dd\uff0c\u9019\u4e9b\u6307\u91dd\u53ef\u4ee5\u7528\u4f86\u5feb\u901f\u5730\u67e5\u627e\u9375\u662f\u5426\u5b58\u5728\uff0c\u4e14\u8907\u96dc\u5ea6\u8207\u9375\u7684\u9577\u5ea6\u6210\u6b63\u6bd4\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u8de8\u5ea6 (span) \u662f\u6307\u4e00\u500b\u6578\u5b57\u6240\u4f54\u7528\u7684\u4f4d\u5143\u6578\uff0c\u5982\u679c\u662f\u4e8c\u9032\u4f4d\u7684\u8a71\uff0c\u5247\u8de8\u5ea6\u70ba 2\u3002\n\u5982\u679c\u9019\u500b\u6578\u5b57\u53ca\u5176\u524d\u7db4\u5b58\u5728\u65bc\u8cc7\u6599\u96c6\u5408\u4e2d\uff0c\u90a3\u9ebc\u5728\u8a72\u6578\u5b57\u8655\u6703\u5132\u5b58\u4e00\u500b\u6307\u5411\u4e0b\u4e00\u5c64\u7bc0\u9ede\u7684\u6307\u91dd\uff0c\u5426\u5247\u5c31\u5132\u5b58 null\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-10.webp",caption:"Trie"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u5be6\u969b\u61c9\u7528\u4e2d\uff0cTrie \u7684\u7bc0\u9ede\u53ef\u80fd\u6703\u975e\u5e38\u7a00\u758f\uff0c\u6216\u662f\u55ae\u4e00\u7684\u5206\u652f\u904e\u65bc\u5197\u9577\uff0c\u56e0\u6b64\u6211\u5011\u53ef\u4ee5\u63a1\u7528\u58d3\u7e2e\u7684\u65b9\u5f0f\u4f86\u5132\u5b58 :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u6c34\u5e73\u58d3\u7e2e (Horizontal Compression) : \u5982\u679c\u540c\u4e00\u5c64\u7d1a\u7684 span \u5f88\u5927\u4e14\u5f88\u7a7a\uff0c\u53ef\u4ee5\u8003\u616e\u6539\u6210\u4f7f\u7528 array \u4f86\u5132\u5b58"}),"\n",(0,l.jsx)(s.li,{children:"\u5782\u76f4\u58d3\u7e2e (Vertical Compression) / \u57fa\u6578\u6a39 (Radix Tree) : \u5982\u679c\u53ea\u6709\u4e00\u500b\u55ae\u4e00\u7684\u5206\u652f\uff0c\u53ef\u4ee5\u8003\u616e\u5c07\u9019\u500b\u5206\u652f\u76f4\u63a5\u5408\u4f75\u5230\u7236\u7bc0\u9ede\u4e2d\uff0c\u9019\u6a23\u53ef\u4ee5\u6e1b\u5c11\u7bc0\u9ede\u7684\u6578\u91cf\uff0c\u4f46\u9019\u6a23\u6709\u53ef\u80fd\u9020\u6210\u932f\u8aa4\uff0c\u56e0\u6b64\u6700\u5f8c\u9084\u662f\u9700\u8981\u8ddf\u539f\u672c\u7684 tuple \u505a\u6bd4\u5c0d\u3002"}),"\n"]}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-16.webp",caption:"Normal -> Horizontal Compression -> Radix Tree"}),"\n",(0,l.jsx)(s.h2,{id:"inverted-index",children:"Inverted Index"}),"\n",(0,l.jsx)(s.p,{children:"\u524d\u9762\u8a0e\u8ad6\u7684\u8cc7\u6599\u7d50\u69cb\u4e3b\u8981\u9069\u7528\u65bc\u67e5\u627e\u4e00\u500b\u78ba\u5207\u7684\u503c\uff0c\u5b83\u5011\u4e0d\u652f\u63f4\u95dc\u9375\u5b57\u641c\u5c0b\u3002\n\u8209\u4f8b\u4f86\u8aaa\uff0c\u5982\u679c\u6211\u5011\u60f3\u67e5\u8a62\u6240\u6709\u5305\u542b Taiwan \u9019\u500b\u8a5e\u7684\u7dad\u57fa\u767e\u79d1\u6587\u7ae0\uff0c\u50b3\u7d71\u7d22\u5f15\u5c31\u7121\u6cd5\u76f4\u63a5\u505a\u5230\uff0c\u9019\u5c31\u662f\u70ba\u4ec0\u9ebc\u9700\u8981 Inverted Index \u7684\u539f\u56e0\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u5012\u6392\u7d22\u5f15\u5132\u5b58\u7684\u662f\u8a5e (terms) \u5230\u5305\u542b\u9019\u4e9b\u8a5e\u9805\u7684\u8a18\u9304 (records) \u4e4b\u9593\u7684\u6620\u5c04\u3002\n\u9019\u4e9b\u5305\u542b\u8a5e\u7684\u8a18\u9304\u5217\u8868\u88ab\u7a31\u70ba posting list\uff0c\u7c21\u55ae\u4f86\u8aaa\uff0c\u5b83\u5c31\u50cf\u4e00\u672c\u66f8\u7684\u7d22\u5f15\uff0c\u4f46\u4e0d\u662f\u6309\u7167\u9801\u78bc\u9806\u5e8f\u6392\u5217\u8a5e\u8a9e\uff0c\u800c\u662f\u6309\u7167\u95dc\u9375\u5b57\u4f86\u67e5\u627e\u5305\u542b\u8a72\u8a5e\u8a9e\u7684\u6240\u6709\u6587\u6a94\u6216\u8a18\u9304\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-11.webp",caption:"Inverted Index"}),"\n",(0,l.jsx)(s.h3,{id:"lucene",children:"Lucene"}),"\n",(0,l.jsx)(s.p,{children:"Lucene \u662f\u4e00\u500b\u5c08\u9580\u7684\u5012\u6392\u7d22\u5f15\u5f15\u64ce\uff0c\u5b83\u5132\u5b58\u5012\u6392\u7d22\u5f15\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u4e00\u7a2e\u985e\u4f3c\u65bc\u5b57\u5178\u6a39\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u7a31\u70ba\u6709\u9650\u72c0\u614b\u8f49\u63db\u5668 (finite state transducer, FST)\u3002\n\u8207\u5b57\u5178\u6a39\u76f4\u63a5\u5132\u5b58\u6307\u5411\u5143\u7d44\u7684\u6307\u91dd\u4e0d\u540c\uff0c\u6709\u9650\u72c0\u614b\u8f49\u63db\u5668\u5728\u6bcf\u689d\u908a\u4e0a\u5132\u5b58\u6b0a\u91cd\uff0c\u7576\u4f60\u6cbf\u8457\u8def\u5f91\u904d\u6b77\u5230\u4f60\u6b63\u5728\u5c0b\u627e\u7684\u9375\u6642\uff0c\u9019\u4e9b\u6b0a\u91cd\u7684\u6efe\u52d5\u52a0\u7e3d\u6700\u7d42\u6703\u7d66\u4f60\u9019\u500b\u8a5e\u9805\u5728\u6620\u5c04\u4e2d\u5132\u5b58\u7684\u78ba\u5207\u4f4d\u7f6e\u3002\n\u9019\u4f7f\u5f97 Lucene \u80fd\u5920\u9ad8\u6548\u5730\u5f9e\u8a5e\u9805\u6620\u5c04\u5230\u5176 posting list\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u5728 Lucene \u7684\u8a5e\u9805\u5b57\u5178\u4e2d (\u9019\u662f\u5132\u5b58\u6240\u6709\u552f\u4e00\u8a5e\u9805\u7684\u90e8\u5206)\uff0c\u7531\u65bc\u5b83\u662f\u4e0d\u53ef\u8b8a\u7684\u4e14\u9810\u5148\u69cb\u5efa\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u61c9\u7528\u591a\u7a2e\u58d3\u7e2e\u6280\u8853\uff0c\u4f8b\u5982 :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u5dee\u5206\u58d3\u7e2e (delta compression): \u5132\u5b58\u76f8\u9130\u503c\u4e4b\u9593\u7684\u5dee\u7570\uff0c\u800c\u4e0d\u662f\u6bcf\u500b\u503c\u7684\u5b8c\u6574\u5f62\u5f0f\uff0c\u5f9e\u800c\u6e1b\u5c11\u5132\u5b58\u7a7a\u9593\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u4f4d\u5143\u6253\u5305 (bit-packing): \u6839\u64da\u5be6\u969b\u6578\u64da\u7684\u4f4d\u5143\u9700\u6c42\u4f86\u5132\u5b58\u6578\u64da\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u56fa\u5b9a\u7684\u5b57\u7bc0\u6578\uff0c\u9019\u5728\u6578\u503c\u7bc4\u570d\u4e0d\u5927\u6642\u80fd\u986f\u8457\u7bc0\u7701\u7a7a\u9593\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u6b64\u5916\uff0cLucene \u9084\u652f\u63f4\u9810\u805a\u5408 (pre-aggregation)\uff0c\u9019\u53ef\u4ee5\u52a0\u901f\u57fa\u65bc\u8a5e\u9805\u5206\u7d44\u7684\u805a\u5408\u67e5\u8a62\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-12.webp",caption:"Lucene Inverted Index"}),"\n",(0,l.jsx)(s.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,l.jsx)(s.p,{children:"PostgreSQL \u7684\u901a\u7528\u5012\u6392\u7d22\u5f15 (Generalized Inverted Index, GIN) \u4f7f\u7528 B+Tree \u4f86\u69cb\u5efa\u5b57\u5178\u3002\u9019\u500b B+Tree \u8449\u7bc0\u9ede\u7684\u503c (\u5373\u767c\u5e03\u5217\u8868\u7684\u5132\u5b58\u65b9\u5f0f) \u53d6\u6c7a\u65bc\u767c\u5e03\u5217\u8868\u7684\u5927\u5c0f :"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u5c0d\u65bc\u8f03\u5c0f\u7684 posting list\uff0c\u8449\u7bc0\u9ede\u4e2d\u76f4\u63a5\u5132\u5b58\u7684\u662f\u4e00\u500b\u6392\u5e8f\u904e\u7684\u8a18\u9304 ID \u5217\u8868\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u5c0d\u65bc\u8f03\u5927\u7684 posting list\uff0cPostgreSQL \u6703\u70ba\u9019\u4e9b\u767c\u5e03\u5217\u8868\u984d\u5916\u69cb\u5efa\u7368\u7acb\u7684 B+Tree \u4f86\u5132\u5b58\u8a18\u9304 ID\uff0c\u4ee5\u63d0\u9ad8\u8a2a\u554f\u6548\u7387\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"PostgreSQL \u9084\u4f7f\u7528\u4e00\u500b\u55ae\u7368\u7684 pending list \u4f86\u907f\u514d\u983b\u7e41\u7684\u5c0f\u898f\u6a21\u589e\u91cf\u66f4\u65b0\u3002\n\u7576\u6709\u65b0\u7684\u66f4\u65b0\u6642\uff0c\u5b83\u5011\u6703\u5148\u88ab\u8a18\u9304\u5728\u9019\u500b\u5f85\u8655\u7406\u5217\u8868\u4e2d\uff0c\u7136\u5f8c\u7d2f\u7a4d\u8d77\u4f86\uff0c\u6700\u7d42\u4ee5\u6279\u6b21\u63d2\u5165\u7684\u65b9\u5f0f\u4e00\u6b21\u6027\u61c9\u7528\u5230\u4e3b\u5b57\u5178\u4e2d\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-13.webp",caption:"PostgreSQL GIN Inverted Index"}),"\n",(0,l.jsx)(s.h2,{id:"vector-index",children:"Vector Index"}),"\n",(0,l.jsx)(s.p,{children:'\u5012\u6392\u7d22\u5f15\u96d6\u7136\u652f\u63f4\u95dc\u9375\u5b57\u641c\u5c0b\uff0c\u4f46\u5b83\u7121\u6cd5\u7406\u89e3\u5167\u5bb9\u7684\u8a9e\u7fa9\u610f\u7fa9\uff0c\u9019\u4ee3\u8868\u8981\u627e\u5230\u7684\u95dc\u9375\u5b57\u5fc5\u9808\u5b8c\u6574\u5730\u5305\u542b\u5728\u5167\u5bb9\u4e2d\u3002\n\u8209\u4f8b\u4f86\u8aaa\uff0c\u5982\u679c\u4e00\u500b\u61c9\u7528\u7a0b\u5f0f\u60f3\u8981\u641c\u5c0b\u8207\u7279\u5b9a\u4e3b\u984c\u76f8\u95dc\u7684\u8a18\u9304\uff0c\u6bd4\u5982 "\u95dc\u65bc\u4fda\u8a9e\u7684\u563b\u54c8\u5718\u9ad4\u6b4c\u66f2"\uff0c\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u6211\u5011\u5c31\u9700\u8981\u4e00\u7a2e\u9664\u4e86\u5012\u6392\u7d22\u5f15\u4e4b\u5916\u7684\u5176\u4ed6\u65b9\u6cd5\u3002\n\u5012\u6392\u7d22\u5f15\u53ea\u80fd\u627e\u5230\u5305\u542b "\u4fda\u8a9e"\u3001"\u563b\u54c8"\u3001"\u5718\u9ad4"\u3001"\u6b4c\u66f2" \u7b49\u8a5e\u7684\u6587\u6a94\uff0c\u4f46\u5b83\u7121\u6cd5\u7406\u89e3\u9019\u4e9b\u8a5e\u7d44\u5408\u8d77\u4f86\u7684\u6574\u9ad4\u6982\u5ff5\u6216\u8a9e\u7fa9\u4e0a\u7684\u76f8\u95dc\u6027\u3002'}),"\n",(0,l.jsx)(s.p,{children:"LLM \u4ee5\u5176\u80fd\u5920\u70ba\u6587\u672c\u751f\u6210 embedding \u800c\u805e\u540d\uff0c\u9019\u4e9b\u5d4c\u5165\u672c\u8cea\u4e0a\u662f\u6d6e\u9ede\u6578\u7684\u9663\u5217\u3002\n\u5982\u679c\u5169\u500b\u6587\u672c\u5728\u8a9e\u7fa9\u4e0a\u76f8\u4f3c\uff0c\u5b83\u5011\u7684\u5d4c\u5165\u5728\u5e7e\u4f55\u7a7a\u9593\u4e2d\u4e5f\u6703\u5f7c\u6b64\u63a5\u8fd1\u3002\n\u56e0\u6b64\uff0c\u5c08\u9580\u7528\u65bc\u6700\u8fd1\u9130\u641c\u5c0b (nearest-neighbor search, NN) \u7684\u5411\u91cf\u7d22\u5f15\u5c31\u80fd\u5920\u5e6b\u52a9\u6211\u5011\u89e3\u6c7a\u4e0a\u8ff0\u985e\u578b\u7684\u67e5\u8a62\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u7136\u800c\uff0c\u8207\u6211\u5011\u4e4b\u524d\u770b\u5230\u7684\u50b3\u7d71\u67e5\u8a62\u4e0d\u540c\uff0c\u9019\u7a2e\u57fa\u65bc\u8a9e\u7fa9\u76f8\u4f3c\u6027\u7684\u67e5\u8a62\u6c92\u6709\u4e00\u500b\u7d55\u5c0d\u6b63\u78ba\u7684\u7b54\u6848\uff0c\u7d50\u679c\u5f80\u5f80\u662f\u76f8\u95dc\u5ea6\u6700\u9ad8\u7684\u5e7e\u500b\u9078\u9805\u3002\n\u6b64\u5916\uff0c\u5728\u627e\u5230\u6700\u8fd1\u9130\u5c45\u4e4b\u524d\u6216\u4e4b\u5f8c\uff0c\u901a\u5e38\u9084\u9700\u8981\u5c0d\u6578\u64da\u9032\u884c\u984d\u5916\u7684\u904e\u6ffe (\u4f8b\u5982\u5206\u985e\u7b49\u7b49)\uff0c\u4ee5\u6eff\u8db3\u66f4\u7cbe\u78ba\u7684\u696d\u52d9\u9700\u6c42\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"inverted-file",children:"Inverted File"}),"\n",(0,l.jsx)(s.p,{children:"\u5012\u6392\u6a94\u6848\u65b9\u6cd5\u900f\u904e\u805a\u985e\u6f14\u7b97\u6cd5 (clustering algorithm) \u5c07\u9ad8\u7dad\u5411\u91cf\u5283\u5206\u6210\u8f03\u5c0f\u7684\u7fa4\u7d44\u3002\n\u7576\u9032\u884c\u6700\u8fd1\u9130\u641c\u5c0b\u6642\uff0c\u6703\u4f7f\u7528\u76f8\u540c\u7684\u805a\u985e\u6f14\u7b97\u6cd5\u5c07\u67e5\u8a62\u5411\u91cf\u5b9a\u4f4d\u5230\u4e00\u500b\u6216\u5e7e\u500b\u76f8\u95dc\u7684\u7fa4\u7d44\u4e2d\u3002\n\u7136\u5f8c\uff0c\u53ea\u5728\u9019\u4e9b\u88ab\u5b9a\u4f4d\u5230\u7684\u7fa4\u7d44\u5167\u90e8\u67e5\u627e\u6240\u6709\u5411\u91cf\uff0c\u4ee5\u627e\u5230\u6700\u8fd1\u7684\u9130\u5c45 (\u6709\u6642\u4e5f\u9700\u8981\u6aa2\u67e5\u9644\u8fd1\u7684\u7fa4\u7d44\uff0c\u4ee5\u9632\u6700\u4f73\u9130\u5c45\u4f4d\u65bc\u7fa4\u7d44\u908a\u754c)\u3002\n\u4e00\u500b\u5178\u578b\u7684\u4f8b\u5b50\u662f IVFFlat \u6f14\u7b97\u6cd5\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u70ba\u4e86\u9032\u4e00\u6b65\u63d0\u5347\u67e5\u627e\u901f\u5ea6\uff0c\u53ef\u4ee5\u5c0d\u7d22\u5f15\u57f7\u884c\u9810\u8655\u7406 (preprocessing) \u548c\u91cf\u5316 (quantization)\u3002\u9019\u4e9b\u6280\u8853\u53ef\u4ee5\u964d\u7dad\u6216\u964d\u4f4e\u5176\u7cbe\u5ea6\uff0c\u5f9e\u800c\u52a0\u5feb\u67e5\u627e\u6642\u9593\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-14.webp",caption:"Inverted File"}),"\n",(0,l.jsx)(s.h3,{id:"navigable-small-worlds",children:"Navigable Small Worlds"}),"\n",(0,l.jsx)(s.p,{children:"Navigable Small Worlds \u662f\u4e00\u7a2e\u57fa\u65bc\u5716\u7684\u8fd1\u4f3c\u6700\u8fd1\u9130\u641c\u5c0b\u65b9\u6cd5\u3002\n\u5b83\u69cb\u5efa\u4e00\u500b\u8868\u793a\u5411\u91cf\u4e4b\u9593\u9130\u5c45\u95dc\u4fc2\u7684\u5716\uff0c\u5716\u4e2d\u7684\u6bcf\u500b\u7bc0\u9ede (node) \u4ee3\u8868\u4e00\u500b\u5411\u91cf\uff0c\u800c\u5b83\u7684\u908a (edges) \u5247\u9023\u7d50\u5230\u5176 n \u500b\u6700\u8fd1\u7684\u9130\u5c45\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u7576\u9032\u884c\u6700\u8fd1\u9130\u641c\u5c0b\u6642\uff0cNavigable Small Worlds \u5229\u7528\u9019\u500b\u5716\uff0c\u5f9e\u4e00\u500b\u5b9a\u7fa9\u597d\u7684\u5165\u53e3\u9ede\u958b\u59cb\uff0c\u900f\u904e greedy algorithm \u9078\u64c7\u90a3\u4e9b\u80fd\u8b93\u5b83\u66f4\u63a5\u8fd1\u67e5\u8a62\u5411\u91cf\u7684\u908a\uff0c\u4f86\u9010\u6b65\u5c0e\u822a\u3002\n\u5169\u500b\u77e5\u540d\u7684\u5be6\u73fe\u4f8b\u5b50\u662f FAISS \u548c HNSWlib (Hierarchical Navigable Small Worlds)\u3002"}),"\n",(0,l.jsx)(i,{src:"/img/cmu15-445/c08/image-15.webp",caption:"Navigable Small Worlds"})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(m,{...e})}):m(e)}function x(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>c});var i=n(6540);const l={},a=i.createContext(l);function r(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);