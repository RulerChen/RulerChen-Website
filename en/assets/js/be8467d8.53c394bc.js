"use strict";(self.webpackChunkrulerchen_website=self.webpackChunkrulerchen_website||[]).push([["982"],{1385:function(e,i,l){l.r(i),l.d(i,{frontMatter:()=>a,toc:()=>c,default:()=>p,metadata:()=>n,assets:()=>t,contentTitle:()=>d});var n=JSON.parse('{"id":"CMU15-445/c13","title":"Query Execution","description":"CMU15-445/645 Query Execution","source":"@site/docs/CMU15-445/c13.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c13","permalink":"/RulerChen-Website/en/docs/CMU15-445/c13","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c13.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/en/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1757606412000,"sidebarPosition":13,"frontMatter":{"title":"Query Execution","sidebar_position":13,"description":"CMU15-445/645 Query Execution","keywords":["CMU15-445/645","Query Execution","CMU15-445/645 \u7B46\u8A18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Joins Algorithms","permalink":"/RulerChen-Website/en/docs/CMU15-445/c12"},"next":{"title":"Query Planning & Optimization","permalink":"/RulerChen-Website/en/docs/CMU15-445/c15"}}'),r=l(4848),s=l(4429);let a={title:"Query Execution",sidebar_position:"13",description:"CMU15-445/645 Query Execution",keywords:["CMU15-445/645","Query Execution","CMU15-445/645 \u7B46\u8A18"],tags:["CMU15-445"]},d,t={},c=[{value:"Query Execution",id:"query-execution",level:2},{value:"Processing Models",id:"processing-models",level:2},{value:"Iterator Model",id:"iterator-model",level:3},{value:"Materialization Model",id:"materialization-model",level:3},{value:"Vectorized / Batch Model",id:"vectorized--batch-model",level:3},{value:"Plan Processing Direction",id:"plan-processing-direction",level:3},{value:"Access Methods",id:"access-methods",level:2},{value:"Sequential Scan",id:"sequential-scan",level:3},{value:"Data Skipping",id:"data-skipping",level:4},{value:"Index Scan",id:"index-scan",level:3},{value:"Multi-Index Scan",id:"multi-index-scan",level:3},{value:"Modification Queries",id:"modification-queries",level:2},{value:"Expression Evaluation",id:"expression-evaluation",level:2},{value:"Parallel vs Distributed Databases",id:"parallel-vs-distributed-databases",level:2},{value:"Process Model",id:"process-model",level:2},{value:"Process per Worker",id:"process-per-worker",level:3},{value:"Thread per Worker",id:"thread-per-worker",level:3},{value:"Embedded DBMS",id:"embedded-dbms",level:3},{value:"Inter-Query Parallelism",id:"inter-query-parallelism",level:2},{value:"Intra-Query parallelism",id:"intra-query-parallelism",level:2},{value:"Intra-Operator Parallelism (Horizontal)",id:"intra-operator-parallelism-horizontal",level:3},{value:"Inter-Operator Parallelism (Vertical)",id:"inter-operator-parallelism-vertical",level:3},{value:"Bushy Parallelism",id:"bushy-parallelism",level:3},{value:"I/O Parallelism",id:"io-parallelism",level:2},{value:"Multi-Disk I/O Parallelism",id:"multi-disk-io-parallelism",level:3},{value:"Database Partitioning",id:"database-partitioning",level:3}];function o(e){let i={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components},{Head:l,ImageModal:n}=i;return l||h("Head",!0),n||h("ImageModal",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{children:(0,r.jsx)("title",{children:"CMU 15-445 Query Execution"})}),"\n",(0,r.jsx)(i.p,{children:"\u9019\u7BC7\u7B46\u8A18\u6703\u4ECB\u7D39 DBMS \u4E2D query execution \u7684\u76F8\u95DC\u6982\u5FF5\uFF0C\u5F9E\u8655\u7406\u6A21\u578B\u5230\u5E73\u884C\u5316\u7684\u6280\u8853\u7B49\u7B49\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"query-execution",children:"Query Execution"}),"\n",(0,r.jsx)(i.p,{children:"\u5728 DBMS \u4E2D\uFF0C\u5982\u679C\u6211\u5011\u8981\u57F7\u884C\u4E00\u6BB5 SQL \u67E5\u8A62\uFF0C\u901A\u5E38\u6703\u7D93\u904E\u4EE5\u4E0B\u5E7E\u500B\u6B65\u9A5F :"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Parsing : \u5C07 SQL \u67E5\u8A62\u8F49\u63DB\u6210 parse tree"}),"\n",(0,r.jsx)(i.li,{children:"Binding : \u5C07 parse tree \u4E2D\u7684 table \u548C column \u540D\u7A31\u8207\u8CC7\u6599\u5EAB\u4E2D\u7684\u5BE6\u969B\u540D\u7A31\u5C0D\u61C9\u8D77\u4F86"}),"\n",(0,r.jsx)(i.li,{children:"Optimization : \u5C07 parse tree \u8F49\u63DB\u6210 query plan"}),"\n",(0,r.jsx)(i.li,{children:"Execution : \u57F7\u884C query plan \u4E26\u8FD4\u56DE\u7D50\u679C"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"\u5176\u4E2D\uFF0Cquery plan \u662F\u4E00\u500B\u7531 operator \u7D44\u6210\u7684 DAG (\u6709\u5411\u7121\u74B0\u5716)\uFF0C\u4F8B\u5982 scan\u3001join\u3001aggregation \u7B49\u7B49\u3002\n\u9019\u4E9B operator \u6703\u6309\u7167\u4E00\u5B9A\u7684\u9806\u5E8F\u57F7\u884C\uFF0C\u6700\u5F8C root operator \u7684\u8F38\u51FA\u5C31\u662F\u67E5\u8A62\u7684\u7D50\u679C\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u55AE\u7D14\u9010\u4E00\u57F7\u884C\u6BCF\u500B operator \u6703\u7522\u751F\u5927\u91CF\u4E2D\u9593\u7D50\u679C\uFF0C\u5C0E\u81F4\u6548\u80FD\u4E0B\u964D\uFF0C\u56E0\u6B64 DBMS \u5F15\u5165\u4E86 pipeline \u7684\u6982\u5FF5\u3002\npipeline \u662F\u4E00\u6BB5\u9023\u7E8C\u7684\u904B\u7B97\u5143\u5E8F\u5217\uFF0C\u8CC7\u6599\u53EF\u4EE5\u5728\u4E0D\u7D93\u904E\u4E2D\u4ECB\u5132\u5B58\u7684\u60C5\u6CC1\u4E0B\u6301\u7E8C\u6D41\u52D5\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u7136\u800C\uFF0C\u4E26\u4E0D\u662F\u6BCF\u500B operator \u90FD\u53EF\u4EE5 pipeline\uFF0C\u6709\u4E9B operator \u5C31\u9700\u8981\u7B49\u6240\u6709\u8CC7\u6599\u90FD\u5230\u9F4A\u624D\u80FD\u7E7C\u7E8C\uFF0C\u9019\u4E9B\u5C31\u662F pipeline brokers\uFF0C\u5982 join\u3001subquery\u3001sort \u7B49\u7B49\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"processing-models",children:"Processing Models"}),"\n",(0,r.jsx)(i.p,{children:"Processing model \u5B9A\u7FA9\u4E86 DBMS \u4E2D operator \u4E4B\u9593\u8CC7\u6599\u6D41\u52D5\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u6709\u4EE5\u4E0B\u4E09\u7A2E :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Iterator Model"}),"\n",(0,r.jsx)(i.li,{children:"Materialization Model"}),"\n",(0,r.jsx)(i.li,{children:"Vectorized / Batch Model"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"iterator-model",children:"Iterator Model"}),"\n",(0,r.jsxs)(i.p,{children:["Iterator \u6A21\u578B\uFF0C\u4E5F\u88AB\u7A31\u70BA volcano model \u6216 pipeline model\u3002\n\u9019\u500B\u6A21\u578B\u7684\u6838\u5FC3\u662F\u8B93\u6BCF\u500B operator \u90FD\u5BE6\u73FE\u4E00\u500B ",(0,r.jsx)(i.code,{children:"Next()"})," \u51FD\u6578\uFF0C\u4F7F\u67E5\u8A62\u8A08\u756B\u4E2D\u7684\u6BCF\u500B\u7BC0\u9EDE\u5728\u9700\u8981\u8CC7\u6599\u6642\uFF0C\u80FD\u5920\u5411\u5176\u5B50\u7BC0\u9EDE\u8ACB\u6C42\u4E0B\u4E00\u500B tuple (\u5982\u679C\u8CC7\u6599\u5DF2\u7D93\u56DE\u50B3\u5B8C\u7562\u5247\u8FD4\u56DE null)\u3002"]}),"\n",(0,r.jsx)(i.p,{children:"\u9019\u500B\u6A21\u578B\u7684\u512A\u9EDE\u5728\u65BC\u5BE6\u73FE\u4E86 pipelining\uFF0C\u53EF\u4EE5\u6E1B\u5C11\u4E2D\u9593\u7D50\u679C\u7684\u5132\u5B58\uFF0C\u4E26\u4E14\u53EF\u4EE5\u5F88\u597D\u7684\u7D50\u5408 LIMIT \u64CD\u4F5C\uFF0C\u7F3A\u9EDE\u5C31\u662F\u5C0D OLAP \u7CFB\u7D71\u5C31\u4E0D\u592A\u53CB\u597D\u3002"}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image.webp",caption:"Iterator Model"}),"\n",(0,r.jsx)(i.h3,{id:"materialization-model",children:"Materialization Model"}),"\n",(0,r.jsxs)(i.p,{children:["\u6BCF\u500B operator \u90FD\u6709\u4E00\u500B ",(0,r.jsx)(i.code,{children:"Output()"})," \u51FD\u6578\uFF0C\u6703\u4E00\u6B21\u6027\u8655\u7406\u5B8C\u6240\u6709\u5B50\u7BC0\u9EDE\u7684\u8CC7\u6599\u4E26\u5168\u90E8\u8FD4\u56DE\u3002"]}),"\n",(0,r.jsxs)(i.p,{children:["\u9019\u7A2E\u65B9\u6CD5\u66F4\u9069\u5408 OLTP \u7CFB\u7D71\uFF0C\u56E0\u70BA OLTP \u901A\u5E38\u53EA\u9808\u56DE\u50B3\u5C11\u91CF\u8CC7\u6599\uFF0C\u53EF\u4EE5\u6E1B\u5C11\u8ABF\u7528 ",(0,r.jsx)(i.code,{children:"Next"})," \u51FD\u6578\u7684\u6B21\u6578\u3002"]}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-1.webp",caption:"Materialization Model"}),"\n",(0,r.jsx)(i.h3,{id:"vectorized--batch-model",children:"Vectorized / Batch Model"}),"\n",(0,r.jsxs)(i.p,{children:["Vectorized / Batch Model \u662F\u4E00\u7A2E iterator \u548C materialization \u7684\u6DF7\u5408\u6A21\u578B\uFF0C\u5728\u8ABF\u7528 ",(0,r.jsx)(i.code,{children:"Next()"})," \u51FD\u6578\u6642\uFF0C\u6703\u4E00\u6B21\u6027\u56DE\u50B3\u4E00\u6279 tuple\uFF0C\u53EF\u4EE5\u6839\u64DA\u786C\u9AD4\u689D\u4EF6\u4F86\u8ABF\u6574 batch \u7684\u5927\u5C0F\u3002"]}),"\n",(0,r.jsxs)(i.p,{children:["\u9019\u7A2E\u65B9\u5F0F\u9069\u5408\u65BC OLAP \u7CFB\u7D71\uFF0C\u53EF\u4EE5\u6E1B\u5C11\u8ABF\u7528 ",(0,r.jsx)(i.code,{children:"Next()"})," \u51FD\u6578\u7684\u6B21\u6578\uFF0C\u4E26\u4E14\u53EF\u4EE5\u4F7F\u7528 SIMD \u6307\u4EE4\u96C6\u4F86\u6279\u91CF\u8655\u7406 tuple\u3002"]}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-2.webp",caption:"Vectorized / Batch Model"}),"\n",(0,r.jsx)(i.h3,{id:"plan-processing-direction",children:"Plan Processing Direction"}),"\n",(0,r.jsx)(i.p,{children:"\u9664\u4E86\u56DE\u50B3\u8CC7\u6599\u7684\u65B9\u5F0F\u5916\uFF0CDBMS \u9084\u53EF\u4EE5\u9078\u64C7\u8CC7\u6599\u6D41\u52D5\u7684\u65B9\u5411\uFF0C\u4E3B\u8981\u6709\u4EE5\u4E0B\u5169\u7A2E :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Top-to-Bottom (Pull-based) : \u7531 root operator \u958B\u59CB\u5411\u4E0B\u8ACB\u6C42\u8CC7\u6599\uFF0C\u662F\u66F4\u5E38\u898B\u7684\u505A\u6CD5"}),"\n",(0,r.jsx)(i.li,{children:"Bottom-to-Top (Push-based) : \u7531 leaf operator \u958B\u59CB\u5411\u4E0A\u63A8\u9001\u8CC7\u6599"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"access-methods",children:"Access Methods"}),"\n",(0,r.jsx)(i.p,{children:"Aaccess method \u662F\u6307 DBMS \u5F9E table \u4E2D\u7372\u5F97\u8CC7\u6599\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u6709\u4EE5\u4E0B\u5E7E\u7A2E :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Sequential Scan"}),"\n",(0,r.jsx)(i.li,{children:"Index Scan"}),"\n",(0,r.jsx)(i.li,{children:"Multi-Index Scan"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"sequential-scan",children:"Sequential Scan"}),"\n",(0,r.jsx)(i.p,{children:"Sequential scan \u6307\u7684\u662F DBMS \u9010\u884C\u8B80\u53D6 table \u4E2D\u7684\u6240\u6709\u8CC7\u6599\uFF0C\u901A\u5E38\u6548\u80FD\u6703\u8F03\u5DEE\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u6709\u8A31\u591A\u7684\u512A\u5316\u65B9\u6CD5\u53EF\u4EE5\u63D0\u5347 sequential scan \u7684\u6548\u80FD\uFF0C\u6709\u4E00\u4E9B\u5728\u4E4B\u524D\u7684\u7AE0\u7BC0\u4E2D\u5DF2\u7D93\u63D0\u904E\u4E86\uFF0C\u5982 :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Prefetching"}),"\n",(0,r.jsx)(i.li,{children:"Buffer Pool Bypass"}),"\n",(0,r.jsx)(i.li,{children:"Late Materialization"}),"\n",(0,r.jsx)(i.li,{children:"Heap Clustering"}),"\n",(0,r.jsx)(i.li,{children:"Parallelization (\u672C\u7BC0)"}),"\n",(0,r.jsx)(i.li,{children:"Data Skipping (\u672C\u7BC0)"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"data-skipping",children:"Data Skipping"}),"\n",(0,r.jsx)(i.p,{children:"\u6709\u5169\u7A2E\u65B9\u6CD5\u53EF\u4EE5\u5BE6\u73FE data skipping :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Approximate Queries (\u6709\u640D\u7684) : \u4F7F\u7528\u90E8\u5206\u5B50\u96C6\u4F86\u8FD1\u4F3C\u6574\u500B\u8CC7\u6599\u96C6\u7684\u7D50\u679C\uFF0C\u5982\u60F3\u8981\u8A08\u7B97\u5E73\u5747\u503C\uFF0C\u53EF\u4EE5\u53EA\u4F7F\u7528\u90E8\u5206\u8CC7\u6599\u4F86\u8A08\u7B97"}),"\n",(0,r.jsx)(i.li,{children:"Zone Maps (\u7121\u640D\u7684) : \u5728\u6BCF\u500B page \u4E0A\u7DAD\u8B77\u4E00\u500B metadata (\u5982\u5E73\u5747\u503C\u3001\u6700\u5927\u6700\u5C0F\u503C)\uFF0C\u53EF\u4EE5\u5FEB\u901F\u5224\u65B7\u662F\u5426\u5305\u542B\u9700\u8981\u7684\u8CC7\u6599\u6216\u662F\u662F\u5426\u9700\u8981\u8A2A\u554F\u9019\u500B page"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"index-scan",children:"Index Scan"}),"\n",(0,r.jsx)(i.p,{children:"DBMS \u6703\u9078\u64C7\u4E00\u500B\u7D22\u5F15\u4F86\u5E6B\u52A9\u67E5\u8A62\uFF0C\u76EE\u6A19\u662F\u627E\u5230\u53EF\u4EE5\u904E\u6FFE\u6389\u6700\u591A\u8CC7\u6599\u7684\u7D22\u5F15\uFF0C\u9019\u6A23\u53EF\u4EE5\u6E1B\u5C11\u9700\u8981\u8B80\u53D6\u7684 tuple \u6578\u91CF\u3002"}),"\n",(0,r.jsxs)(i.p,{children:["\u8209\u4F8B\u4F86\u8AAA\uFF0C\u5047\u8A2D\u6709\u4E00\u500B table ",(0,r.jsx)(i.code,{children:"employees"}),"\uFF0C\u5305\u542B\u4EE5\u4E0B\u6B04\u4F4D :"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"CREATE TABLE employees (\n    id INT PRIMARY KEY,\n    name VARCHAR(100),\n    age INT,\n    department VARCHAR(100)\n);\n\nCREATE INDEX idx_age ON employees(age);\nCREATE INDEX idx_department ON employees(department);\n"})}),"\n",(0,r.jsx)(i.p,{children:"\u6211\u5011\u8981\u67E5\u8A62\u4EE5\u4E0B\u7684 SQL \u6307\u4EE4 :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"SELECT * FROM employees\nWHERE age > 30 AND department = 'Sales';\n"})}),"\n",(0,r.jsxs)(i.p,{children:["DBMS \u53EF\u4EE5\u9078\u64C7\u4F7F\u7528 ",(0,r.jsx)(i.code,{children:"idx_age"})," \u6216 ",(0,r.jsx)(i.code,{children:"idx_department"})," \u4F86\u52A0\u901F\u67E5\u8A62\uFF0C\u5047\u8A2D ",(0,r.jsx)(i.code,{children:"idx_department"})," \u7684\u9078\u64C7\u6027\u8F03\u9AD8 (\u5373 Sales \u90E8\u9580\u7684\u54E1\u5DE5\u8F03\u5C11)\uFF0C\u90A3\u9EBC DBMS \u6703\u9078\u64C7\u4F7F\u7528 ",(0,r.jsx)(i.code,{children:"idx_department"}),"\u3002"]}),"\n",(0,r.jsx)(i.h3,{id:"multi-index-scan",children:"Multi-Index Scan"}),"\n",(0,r.jsx)(i.p,{children:"\u6709\u4E9B\u8CC7\u6599\u5EAB\u652F\u63F4\u591A\u7D22\u5F15\u7684\u67E5\u8A62\uFF0C\u53EF\u4EE5\u900F\u904E\u591A\u500B\u7D22\u5F15\u4F86\u5C07\u627E\u51FA\u6BCF\u500B\u5C0D\u61C9\u7684 record_id\uFF0C\u4E26\u4E14\u5C07\u4ED6\u5011\u96C6\u5408\u8D77\u4F86\u3002\n\u5982 PostgreSQL \u7684 Bitmap Index Scan\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"modification-queries",children:"Modification Queries"}),"\n",(0,r.jsxs)(i.p,{children:["DBMS \u4E2D\u7684 modification \u4E3B\u8981\u5305\u542B ",(0,r.jsx)(i.code,{children:"INSERT"}),"\u3001",(0,r.jsx)(i.code,{children:"UPDATE"})," \u548C ",(0,r.jsx)(i.code,{children:"DELETE"})," \u4E09\u7A2E\u64CD\u4F5C\uFF0C\u9019\u4E9B\u64CD\u4F5C\u9664\u4E86\u8981\u4FEE\u6539 table \u4E2D\u7684\u8CC7\u6599\u5916\uFF0C\u9084\u9700\u8981\u6AA2\u67E5\u7D04\u675F\u689D\u4EF6\u4E26\u66F4\u65B0\u76F8\u95DC\u7684\u7D22\u5F15\u3002"]}),"\n",(0,r.jsxs)(i.p,{children:["\u5728 ",(0,r.jsx)(i.code,{children:"UPDATE"})," \u8DDF ",(0,r.jsx)(i.code,{children:"DELETE"})," \u64CD\u4F5C\u4E2D\uFF0Cchild operator \u6703\u8DDF\u8E64\u5DF2\u7D93\u8655\u7406\u904E\u7684 tuple \u4E26\u8FD4\u56DE record_id\u3002\n\u800C\u5728 ",(0,r.jsx)(i.code,{children:"INSERT"})," \u4E2D\u6709\u5169\u7A2E\u5BE6\u73FE\u65B9\u5F0F\uFF0C\u4E00\u7A2E\u662F\u81EA\u5DF1 materialize tuple\uFF0C\u53E6\u4E00\u7A2E\u662F\u63A5\u6536 child operator \u7684\u8F38\u51FA\u3002"]}),"\n",(0,r.jsxs)(i.p,{children:["\u5728 ",(0,r.jsx)(i.code,{children:"UPDATE"})," \u7684\u904E\u7A0B\u4E2D\uFF0C\u9084\u9700\u8981\u6CE8\u610F halloween problem\u3002\n\u9019\u500B\u554F\u984C\u662F\u6307\u5728\u66F4\u65B0\u904E\u7A0B\u4E2D\uFF0C\u7531\u65BC\u66F4\u65B0\u5F8C\u7684 tuple \u4F4D\u7F6E\u53EF\u80FD\u6703\u6539\u8B8A\uFF0C\u6240\u4EE5\u53EF\u80FD\u6703\u66F4\u65B0\u5230\u5DF2\u7D93\u66F4\u65B0\u904E\u7684 tuple\u3002"]}),"\n",(0,r.jsx)(i.p,{children:"\u5982\u4E0B\u9762\u9019\u689D SQL \u6307\u4EE4 :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"UPDATE employees\nSET salary = salary * 1.1\nWHERE salary > 50000;\n"})}),"\n",(0,r.jsxs)(i.p,{children:["\u5982\u679C\u6211\u5011\u5F9E\u982D\u5230\u5C3E\u6383\u63CF ",(0,r.jsx)(i.code,{children:"employees"})," table\uFF0C\u7576\u6211\u5011\u66F4\u65B0\u4E00\u500B\u54E1\u5DE5\u7684\u85AA\u6C34\u5F8C\uFF0C\u9019\u500B\u54E1\u5DE5\u53EF\u80FD\u6703\u88AB\u91CD\u65B0\u653E\u7F6E\u5728 table \u7684\u5F8C\u9762\uFF0C\u5C0E\u81F4\u6211\u5011\u518D\u6B21\u6383\u63CF\u5230\u9019\u500B\u54E1\u5DE5\u4E26\u518D\u6B21\u66F4\u65B0\u4ED6\u7684\u85AA\u6C34\uFF0C\u9019\u6A23\u5C31\u6703\u5C0E\u81F4\u85AA\u6C34\u88AB\u591A\u6B21\u66F4\u65B0\u3002"]}),"\n",(0,r.jsx)(i.h2,{id:"expression-evaluation",children:"Expression Evaluation"}),"\n",(0,r.jsxs)(i.p,{children:["DBMS \u6703\u5C07 ",(0,r.jsx)(i.code,{children:"WHERE"})," \u689D\u4EF6\u4E2D\u7684\u8868\u9054\u5F0F\u8F49\u63DB\u6210\u4E00\u500B expression tree\uFF0C\u904D\u6B77\u4E4B\u5F8C\u7522\u751F\u7D50\u679C\uFF0C\u53EF\u4EE5\u4F7F\u7528 JIT \u7DE8\u8B6F\u6280\u8853\u4F86\u52A0\u901F\u8868\u9054\u5F0F\u7684\u8A08\u7B97\u3002"]}),"\n",(0,r.jsx)(i.admonition,{type:"note",children:(0,r.jsx)(i.p,{children:"JIT (Just-In-Time) \u7DE8\u8B6F\u662F\u4E00\u7A2E\u5728\u7A0B\u5F0F\u57F7\u884C\u6642\u52D5\u614B\u5C07\u4E2D\u9593\u8868\u793A (\u5982 bytecode) \u7DE8\u8B6F\u6210\u6A5F\u5668\u78BC\u7684\u6280\u8853\u3002\u9019\u7A2E\u65B9\u6CD5\u53EF\u4EE5\u7D50\u5408\u4E86\u89E3\u91CB\u57F7\u884C\u548C\u9810\u5148\u7DE8\u8B6F\u7684\u512A\u9EDE\uFF0C\u63D0\u5347\u7A0B\u5F0F\u7684\u57F7\u884C\u6548\u7387\u3002"})}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-4.webp",caption:"Expression Evaluation"}),"\n",(0,r.jsx)(i.p,{children:"\u9664\u6B64\u4E4B\u5916\uFF0C\u9084\u6709\u5169\u7A2E\u5E38\u898B\u7684\u512A\u5316\u65B9\u6CD5 :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Constant Folding : \u5728\u7DE8\u8B6F\u968E\u6BB5\u5C31\u5C07\u5E38\u6578\u8868\u9054\u5F0F\u8A08\u7B97\u51FA\u4F86"}),"\n",(0,r.jsx)(i.li,{children:"Sub Expression limitation : \u5C07\u91CD\u8907\u7684\u5B50\u8868\u9054\u5F0F\u63D0\u53D6\u51FA\u4F86\uFF0C\u907F\u514D\u91CD\u8907\u8A08\u7B97"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"parallel-vs-distributed-databases",children:"Parallel vs Distributed Databases"}),"\n",(0,r.jsx)(i.p,{children:"\u5728\u524D\u9762\u7684\u8A0E\u8AD6\u4E2D\uFF0C\u6211\u5011\u90FD\u53EA\u5C08\u6CE8\u5728 single worker \u7684\u74B0\u5883\u4E0B\uFF0C\u4F46\u662F\u5728\u73FE\u5BE6\u4E2D\uFF0C\u6211\u5011\u6703\u9700\u8981\u591A\u500B worker \u4F86\u5E73\u884C\u8655\u7406 query\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5728\u5E73\u884C\u6216\u5206\u6563\u5F0F\u7684\u7CFB\u7D71\u4E2D\uFF0C\u8CC7\u6599\u5EAB\u6703\u5206\u5E03\u5728\u591A\u500B\u8CC7\u6E90\u4E2D\u4F86\u63D0\u9AD8 parallelism\uFF0C\u9019\u4E9B\u8CC7\u6E90\u53EF\u4EE5\u662F\u591A\u500B CPU\u3001\u591A\u500B\u786C\u789F\u3001\u591A\u500B\u6A5F\u5668\u7B49\uFF0C\u4F46\u5728\u4F7F\u7528\u8005\u7684\u89D2\u5EA6\uFF0C\u9019\u61C9\u8A72\u8DDF\u4E00\u500B\u55AE\u4E00\u7684\u8CC7\u6599\u5EAB\u662F\u4E00\u6A23\u7684\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u4E3B\u8981\u53EF\u4EE5\u5206\u6210\u5169\u7A2E\u67B6\u69CB :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Parallel Database : \u7269\u7406\u9023\u7D50\u8F03\u8FD1\uFF0C\u4E14\u901A\u8A0A\u6210\u672C\u8F03\u5C0F"}),"\n",(0,r.jsx)(i.li,{children:"Distributed Database : \u7269\u7406\u4E0A\u5206\u6563\u8F03\u9060\uFF0C\u4E14\u901A\u8A0A\u6210\u672C\u8F03\u5927"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"process-model",children:"Process Model"}),"\n",(0,r.jsx)(i.p,{children:"Process model \u5B9A\u7FA9\u4E86 DBMS \u7684\u591A\u7528\u6236\u5E73\u884C\u8655\u7406\u7684\u67B6\u69CB\uFF0C\u6211\u5011\u6703\u7528 worker \u9019\u500B\u8A5E\u4F86\u4EE3\u8868\u57F7\u884C\u7684\u55AE\u4F4D\uFF0C\u5B83\u53EF\u4EE5\u662F\u4E00\u500B process \u6216 thread\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"process-per-worker",children:"Process per Worker"}),"\n",(0,r.jsx)(i.p,{children:"Client \u7AEF\u7684\u8ACB\u6C42\u7D93\u904E dispatcher \u5F8C\u6703\u7531 dispatcher \u5206\u914D\u4E00\u500B worker \u4F86\u8655\u7406\uFF0C\u6BCF\u500B worker \u90FD\u662F\u4E00\u500B\u7368\u7ACB\u7684 process\u3002"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u4F9D\u8CF4\u65BC\u4F5C\u696D\u7CFB\u7D71\u7684 scheduler"}),"\n",(0,r.jsx)(i.li,{children:"\u4F7F\u7528 shared memory \u4F86\u5132\u5B58\u5168\u5C40\u7684\u8CC7\u6599\u7D50\u69CB"}),"\n",(0,r.jsx)(i.li,{children:"\u55AE\u4E00\u7684 process crash \u4E26\u4E0D\u6703\u9020\u6210\u6574\u500B\u7CFB\u7D71\u7684 crash"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"\u9019\u7A2E process model \u4E3B\u8981\u51FA\u73FE\u5728 pthread \u9084\u6C92\u6709\u7A69\u5B9A\u7684\u6642\u5019\uFF0C\u4E3B\u8981\u662F\u70BA\u4E86\u89E3\u6C7A\u79FB\u690D\u6027\u554F\u984C\uFF0C\u5982\u820A\u7248\u7684 Oracle \u548C DB2 \u4EE5\u53CA\u73FE\u5728\u7684 PostgreSQL\u3002"}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-6.webp",caption:"Process per Worker"}),"\n",(0,r.jsxs)(i.admonition,{type:"note",children:[(0,r.jsx)(i.p,{children:"OS scheduler \u6703\u8CA0\u8CAC\u5206\u89E3\u8DDF\u5206\u6D3E\u4EFB\u52D9\u7D66 CPU core \u4E26\u57F7\u884C\u3002"}),(0,r.jsx)(i.p,{children:"OS dispatcher \u6703\u8CA0\u8CAC\u63A5\u6536 client \u7684\u8ACB\u6C42\u4E26\u5C07\u8ACB\u6C42\u5206\u914D\u7D66 worker\u3002"})]}),"\n",(0,r.jsx)(i.h3,{id:"thread-per-worker",children:"Thread per Worker"}),"\n",(0,r.jsx)(i.p,{children:"DBMS \u7531\u4E00\u500B process \u548C\u591A\u500B worker thread \u7D44\u6210\u3002"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"DBMS \u901A\u5E38\u6703\u81EA\u5DF1\u7BA1\u7406 scheduler"}),"\n",(0,r.jsx)(i.li,{children:"\u53EF\u80FD\u6C92\u6709 dispatcher"}),"\n",(0,r.jsx)(i.li,{children:"thread crash \u53EF\u80FD\u5C0E\u81F4\u7CFB\u7D71\u5D29\u6F70"}),"\n",(0,r.jsx)(i.li,{children:"\u7531\u65BC\u4F7F\u7528 thread\uFF0Ccontext switch \u7684\u6210\u672C\u8F03\u4F4E\uFF0C\u4E14\u4E0D\u9700\u8981\u7DAD\u8B77 shared model"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"\u9019\u7A2E process model \u662F\u8FD1\u5E74\u4F86\u6700\u6D41\u884C\u7684\uFF0C\u5982 MySQL\u3001SQL Server\u3001MySQL \u4EE5\u53CA\u65B0\u7248\u7684 Oracle \u90FD\u652F\u6301\u9019\u7A2E\u6A21\u578B\u3002"}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-7.webp",caption:"Thread per Worker"}),"\n",(0,r.jsx)(i.h3,{id:"embedded-dbms",children:"Embedded DBMS"}),"\n",(0,r.jsx)(i.p,{children:"Embedded DBMS \u662F\u4E00\u7A2E\u8207\u50B3\u7D71 client-server \u67B6\u69CB\u7684 DBMS \u4E0D\u540C\u7684\u67B6\u69CB\u3002\n\u5728\u9019\u7A2E\u67B6\u69CB\u4E2D\uFF0CDBMS \u6703\u76F4\u63A5\u5728\u8DDF\u61C9\u7528\u7A0B\u5F0F\u76F8\u540C\u7684 address space \u4E2D\u904B\u884C\uFF0C\u4E26\u7531\u61C9\u7528\u7A0B\u5F0F\u8CA0\u8CAC task \u548C scheduler \u7684\u7BA1\u7406\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5E38\u898B\u7684\u6709 SQLite\u3001DuckDB\u3001RocksDB \u7B49\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"inter-query-parallelism",children:"Inter-Query Parallelism"}),"\n",(0,r.jsx)(i.p,{children:"Inter-Query Parallelism \u662F\u6307\u540C\u6642\u57F7\u884C\u591A\u500B\u67E5\u8A62\u7684\u80FD\u529B\uFF0C\u5982\u679C\u90FD\u662F read only \u7684\u67E5\u8A62\uFF0C\u90A3\u9EBC\u4E0D\u9700\u8981\u591A\u9918\u7684\u5354\u8ABF\uFF0C\u5982\u679C\u6709 write \u64CD\u4F5C\uFF0C\u5247\u9700\u8981\u66F4\u591A\u7684\u6A5F\u5236\u4F86\u78BA\u4FDD\u4E00\u81F4\u6027\uFF0C\u6211\u5011\u6703\u5728\u5F8C\u9762\u7684\u7AE0\u7BC0\u4E2D\u8A0E\u8AD6\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"intra-query-parallelism",children:"Intra-Query parallelism"}),"\n",(0,r.jsx)(i.p,{children:"Intra-Query Parallelism \u662F\u6307\u901A\u904E\u5E73\u884C\u5316\u4F86\u5C07\u55AE\u500B query \u5206\u89E3\u6210\u591A\u500B operators \u4F86\u63D0\u5347\u6027\u80FD\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5728\u9019\u500B\u904E\u7A0B\u4E2D\uFF0C\u6BCF\u500B operator \u90FD\u662F\u8CC7\u6599\u7684 producer\uFF0C\u4E5F\u540C\u6642\u662F\u5176\u4ED6 operator \u7684 consumer\uFF0C\u9019\u7A2E\u8A2D\u8A08\u4F7F\u5F97\u5E73\u884C\u7B97\u6CD5\u53EF\u4EE5\u61C9\u7528\u65BC\u6BCF\u500B relational operator\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u4F7F\u7528\u984D\u5916\u7684 process / thread \u4F86\u5E73\u884C\u57F7\u884C query \u53EF\u4EE5\u63D0\u9AD8 CPU \u7684\u5229\u7528\u7387\uFF0C\u4F46\u5982\u679C\u74F6\u9838\u51FA\u73FE\u5728 disk I/O \u4E0A\uFF0C\u90A3\u9EBC\u9019\u7A2E\u5E73\u884C\u8655\u7406\u5C31\u6C92\u6709\u592A\u5927\u7684\u610F\u7FA9\uFF0C\u751A\u81F3\u6709\u53EF\u80FD\u56E0\u70BA cache miss \u800C\u5C0E\u81F4\u6548\u80FD\u4E0B\u964D\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"intra-operator-parallelism-horizontal",children:"Intra-Operator Parallelism (Horizontal)"}),"\n",(0,r.jsx)(i.p,{children:"\u5C07\u8CC7\u6599\u62C6\u89E3\u6210\u591A\u500B\u5B50\u96C6\uFF0C\u4E26\u900F\u904E exchange operator \u4F86\u5408\u4F75\u5B50\u96C6\u8655\u7406\u7684\u7D50\u679C\u3002"}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-8.webp",caption:"Intra-Operator Parallelism"}),"\n",(0,r.jsx)(i.h3,{id:"inter-operator-parallelism-vertical",children:"Inter-Operator Parallelism (Vertical)"}),"\n",(0,r.jsx)(i.p,{children:"\u5C07 operator \u4E32\u806F\u6210 pipeline\uFF0C\u4E26\u7531\u524D\u4E00\u500B\u968E\u6BB5\u4E0D\u65B7\u5730\u7522\u751F tuple \u4F86\u4F9B\u7D66\u4E0B\u4E00\u500B\u968E\u6BB5\u800C\u4E0D\u7528\u7B49\u5F85\u6574\u500B\u968E\u6BB5\u8655\u7406\u5B8C\u7562\uFF0C\u4E5F\u53EB\u505A pipelined parallelism\u3002\n\u7F3A\u9EDE\u5728\u65BC\u8655\u7406\u901F\u5EA6\u6703\u88AB\u6700\u6162\u7684 operator \u6240\u9650\u5236\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u901A\u5E38\u6703\u5728\u4E00\u4E9B streaming \u7684\u7CFB\u7D71\u4E2D\u4F7F\u7528\uFF0C\u5982 Spark\u3001Flink \u7B49\u3002"}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-9.webp",caption:"Inter-Operator Parallelism"}),"\n",(0,r.jsx)(i.h3,{id:"bushy-parallelism",children:"Bushy Parallelism"}),"\n",(0,r.jsx)(i.p,{children:"Bushy Parallelism \u662F Intra-Operator \u548C Inter-Operator Parallelism \u7684\u6DF7\u5408\u5F62\u5F0F\u3002"}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-10.webp",caption:"Bushy Parallelism"}),"\n",(0,r.jsx)(i.h2,{id:"io-parallelism",children:"I/O Parallelism"}),"\n",(0,r.jsx)(i.p,{children:"I/O Parallelism \u662F\u6307\u5728 DBMS \u4E2D\u4F7F\u7528\u984D\u5916\u7684\u9032\u7A0B\u6216\u57F7\u884C\u7DD2\u4F86\u5E73\u884C\u57F7\u884C\u67E5\u8A62\uFF0C\u4EE5\u63D0\u9AD8\u8CC7\u6599\u5B58\u53D6\u7684\u6548\u80FD\u3002\n\u9019\u7A2E\u6280\u8853\u65E8\u5728\u514B\u670D\u786C\u789F\u662F\u4E3B\u8981\u74F6\u9838\u7684\u60C5\u6CC1\uFF0C\u900F\u904E\u5C07\u8CC7\u6599\u5EAB\u5206\u6563\u5728\u591A\u500B\u5B58\u5132\u8A2D\u5099\u4E0A\u4F86\u63D0\u9AD8\u6548\u80FD\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"multi-disk-io-parallelism",children:"Multi-Disk I/O Parallelism"}),"\n",(0,r.jsx)(i.p,{children:"\u5728 multi-disk I/O parallelism \u4E2D\uFF0CDBMS \u6703\u5C07\u8CC7\u6599\u5EAB\u6A94\u6848\u5206\u6563\u5728\u591A\u500B\u786C\u789F\u4E0A\uFF0C\u9019\u53EF\u4EE5\u4F7F\u7528 RAID \u4F86\u5BE6\u73FE\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5E38\u898B\u7684 RAID \u7D1A\u5225\u6709 :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"RAID 0 : \u5C07\u8CC7\u6599\u5206\u6563\u5728\u591A\u500B\u786C\u789F\u4E0A\uFF0C\u53EF\u4EE5\u63D0\u9AD8\u8B80\u5BEB\u6548\u80FD\uFF0C\u4F46\u6C92\u6709\u5197\u9918"}),"\n",(0,r.jsx)(i.li,{children:"RAID 1 : \u5C07\u8CC7\u6599\u8907\u88FD\u5230\u591A\u500B\u786C\u789F\u4E0A\uFF0C\u6709\u5197\u9918\u4F46\u6548\u80FD\u63D0\u5347\u6709\u9650"}),"\n",(0,r.jsx)(i.li,{children:"RAID 5 : \u5C07\u8CC7\u6599\u548C\u5947\u5076\u6821\u9A57\u8CC7\u8A0A\u5206\u6563\u5728\u591A\u500B\u786C\u789F\u4E0A\uFF0C\u63D0\u4F9B\u5197\u9918\u4E14\u6548\u80FD\u8F03\u597D"}),"\n"]}),"\n",(0,r.jsx)(n,{src:"/img/cmu15-445/c13/image-11.webp",caption:"Multi-Disk I/O Parallelism"}),"\n",(0,r.jsx)(i.h3,{id:"database-partitioning",children:"Database Partitioning"}),"\n",(0,r.jsx)(i.p,{children:"\u53EF\u4EE5\u5C07\u4E00\u500B logical table \u5206\u5272\u6210\u591A\u500B\u5206\u958B\u5132\u5B58\u7684 physical segments\uFF0C\u4EE5\u63D0\u9AD8 I/O \u6548\u80FD\u3002"})]})}function p(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}function h(e,i){throw Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},4429:function(e,i,l){l.d(i,{R:()=>a,x:()=>d});var n=l(6540);let r={},s=n.createContext(r);function a(e){let i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);