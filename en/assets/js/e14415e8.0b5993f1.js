"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[76],{8261:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"CMU15-445/c03","title":"Database Storage","description":"CMU15-445/645 Database Storage","source":"@site/docs/CMU15-445/c03.mdx","sourceDirName":"CMU15-445","slug":"/CMU15-445/c03","permalink":"/RulerChen-Website/en/docs/CMU15-445/c03","draft":false,"unlisted":false,"editUrl":"https://github.com/RulerChen/RulerChen-Website/tree/main/docs/CMU15-445/c03.mdx","tags":[{"inline":true,"label":"CMU15-445","permalink":"/RulerChen-Website/en/docs/tags/cmu-15-445"}],"version":"current","lastUpdatedAt":1757424047000,"sidebarPosition":3,"frontMatter":{"title":"Database Storage","sidebar_position":3,"description":"CMU15-445/645 Database Storage","keywords":["CMU15-445/645","Database Storage","CMU15-445/645 \u7b46\u8a18"],"tags":["CMU15-445"]},"sidebar":"tutorialSidebar","previous":{"title":"Modern SQL","permalink":"/RulerChen-Website/en/docs/CMU15-445/c02"},"next":{"title":"Storage Models & Compression","permalink":"/RulerChen-Website/en/docs/CMU15-445/c05"}}');var l=i(4848),r=i(8453);const t={title:"Database Storage",sidebar_position:"3",description:"CMU15-445/645 Database Storage",keywords:["CMU15-445/645","Database Storage","CMU15-445/645 \u7b46\u8a18"],tags:["CMU15-445"]},s=void 0,d={},c=[{value:"Storage",id:"storage",level:2},{value:"Disk-Oriented DBMS Overview",id:"disk-oriented-dbms-overview",level:2},{value:"File Storage",id:"file-storage",level:2},{value:"Database Page",id:"database-page",level:3},{value:"Heap File Organization",id:"heap-file-organization",level:3},{value:"Linked List",id:"linked-list",level:4},{value:"Page Directory",id:"page-directory",level:4},{value:"Page Layout",id:"page-layout",level:2},{value:"Page Header",id:"page-header",level:3},{value:"Page Data",id:"page-data",level:3},{value:"Tuple-oriented Storage",id:"tuple-oriented-storage",level:4},{value:"Log-structured Storage",id:"log-structured-storage",level:4},{value:"Index-organized Storage",id:"index-organized-storage",level:4},{value:"Tuple Layout",id:"tuple-layout",level:2},{value:"Tuple Header",id:"tuple-header",level:3},{value:"Tuple Data",id:"tuple-data",level:3},{value:"Padding",id:"padding",level:4},{value:"Reordering",id:"reordering",level:4},{value:"Data Representation",id:"data-representation",level:2},{value:"Integer",id:"integer",level:3},{value:"Variable Precision Number",id:"variable-precision-number",level:3},{value:"Fixed Precision Number",id:"fixed-precision-number",level:3},{value:"NULL Data Type",id:"null-data-type",level:3},{value:"Large Value",id:"large-value",level:3},{value:"External Value Store",id:"external-value-store",level:3}];function o(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Head:i,ImageModal:a}=n;return i||g("Head",!0),a||g("ImageModal",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i,{children:(0,l.jsx)("title",{children:"CMU 15-445 Database Storage"})}),"\n",(0,l.jsx)(n.p,{children:"\u9019\u7bc7\u7b46\u8a18\u6703\u8a0e\u8ad6\u5728 disk-oriented \u7684 DBMS \u4e0a\uff0c\u8cc7\u6599\u662f\u5982\u4f55\u88ab\u5132\u5b58\u8207\u7ba1\u7406\u7684\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"storage",children:"Storage"}),"\n",(0,l.jsx)(n.p,{children:"\u9996\u5148\u6211\u5011\u9700\u8981\u4e86\u89e3\u96fb\u8166\u7684\u5132\u5b58\u7d50\u69cb\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5982\u4e0b\u5716\u6240\u793a\uff0c\u96fb\u8166\u7684\u5132\u5b58\u7d50\u69cb\u662f hierarchical \u7684\uff0c\u8d8a\u9760\u8fd1\u4e0a\u65b9\u7684\u5132\u5b58\u8a2d\u5099\u96e2 CPU \u8d8a\u8fd1\uff0c\u901f\u5ea6\u4e5f\u8d8a\u5feb\uff0c\u4f46\u540c\u6642\u5bb9\u91cf\u4e5f\u8d8a\u5c0f\uff0c\u50f9\u683c\u4e5f\u8d8a\u8cb4\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image.webp",caption:"Storage Hierarchy"}),"\n",(0,l.jsx)(n.p,{children:"\u901a\u5e38\u4f86\u8aaa\uff0c\u6240\u8b02\u7684 volatile storage \u6307\u7684\u5c31\u662f\u4e00\u822c\u6240\u8aaa\u7684\u8a18\u61b6\u9ad4 (memory)\uff0c\u800c non-volatile storage \u6307\u7684\u5c31\u662f\u786c\u789f (disk)\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4ed6\u5011\u7684\u5dee\u5225\u5982\u4e0b :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["volatile :","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7576\u96fb\u6e90\u95dc\u9589\u6642\uff0c\u8cc7\u6599\u6703\u907a\u5931"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u5feb\u901f\u7684 random access\uff0c\u53ef\u4ee5\u7531 byte address \u76f4\u63a5\u5b58\u53d6"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["non-volatile :","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7576\u96fb\u6e90\u95dc\u9589\u6642\uff0c\u8cc7\u6599\u4e0d\u6703\u907a\u5931"}),"\n",(0,l.jsx)(n.li,{children:"\u8cc7\u6599\u4e3b\u8981\u4ee5 block \u6216\u662f page \u7684\u5f62\u5f0f\u5b58\u5728\u786c\u789f\u4e0a"}),"\n",(0,l.jsx)(n.li,{children:"\u5982\u679c\u6211\u5011\u60f3\u8981\u5b58\u53d6\u67d0\u500b\u8cc7\u6599\uff0c\u6211\u5011\u9700\u8981\u5c07 page \u8b80\u9032\u8a18\u61b6\u9ad4\u4e2d\uff0c\u7136\u5f8c\u518d\u900f\u904e offset \u4f86\u5b58\u53d6\u6211\u5011\u60f3\u8981\u7684\u8cc7\u6599"}),"\n",(0,l.jsx)(n.li,{children:"\u901a\u5e38\u64c5\u65bc\u4f7f\u7528 sequential access \u4f86\u5b58\u53d6\u8cc7\u6599"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u4e5f\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u5132\u5b58\u65b9\u5f0f\uff0c\u5982 Intel \u7684 Optane \u7b49\u7b49\uff0c\u4f46\u90fd\u4e0d\u5728\u9019\u7bc7\u7b46\u8a18\u7684\u8a0e\u8ad6\u7bc4\u570d\u5167\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"disk-oriented-dbms-overview",children:"Disk-Oriented DBMS Overview"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u8cc7\u6599\u5eab\u4e2d\uff0c\u6240\u6709\u7684\u8cc7\u6599\u90fd\u6703\u88ab\u5b58\u5728\u56fa\u5b9a\u5927\u5c0f\u7684 page \u4e2d\uff0c\u800c\u9019\u4e9b page \u6703\u88ab\u5b58\u5728\u786c\u789f\u4e0a\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u7576 execution engine \u9700\u8981\u5b58\u53d6\u67d0\u500b\u8cc7\u6599\u6642\uff0c buffer pool \u6703\u5148\u5f9e\u8b80\u53d6\u76ee\u9304\uff0c\u4e26\u4e14\u4f9d\u64da\u76ee\u9304\u4e2d\u7684\u8cc7\u8a0a\u628a page \u8b80\u9032\u8a18\u61b6\u9ad4\u4e2d\uff0c\u6700\u5f8c\u518d\u8fd4\u9084\u7d66 execution engine \u9019\u500b page \u7684\u6307\u6a19\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-2.webp",caption:"Disk-Oriented DBMS Overview"}),"\n",(0,l.jsx)(n.h2,{id:"file-storage",children:"File Storage"}),"\n",(0,l.jsx)(n.p,{children:"DBMS \u9700\u8981\u7ba1\u7406\u5927\u91cf\u8cc7\u6599\uff0c\u800c\u9019\u4e9b\u8cc7\u6599\u901a\u5e38\u9060\u5927\u65bc\u8a18\u61b6\u9ad4\u5bb9\u91cf\u3002\n\u56e0\u6b64\uff0c\u9019\u4e9b\u8cc7\u6599\u5fc5\u9808\u5132\u5b58\u5728\u786c\u789f\u6a94\u6848\u4e0a\uff0c\u4e26\u900f\u904e DBMS \u7684 storage manager \u9032\u884c\u5b58\u53d6\u8207\u7ba1\u7406\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"database-page",children:"Database Page"}),"\n",(0,l.jsx)(n.p,{children:"DBMS \u6703\u5c07\u4e00\u500b\u56fa\u5b9a\u5927\u5c0f\u7684\u5340\u57df\u7a31\u70ba\u9801\u9762 (page)\uff0c\u9019\u662f\u786c\u789f\u8207\u8a18\u61b6\u9ad4\u4e4b\u9593\u50b3\u8f38\u7684\u6700\u5c0f\u55ae\u4f4d\u3002\n\u4e0d\u540c\u7684 DBMS \u6709\u4e0d\u540c\u7684\u9801\u9762\u5927\u5c0f\uff0c\u50cf\u662f PostgreSQL \u4f7f\u7528 8kb\u3002\npage \u53ef\u4ee5\u5305\u542b\u4e0d\u540c\u7a2e\u985e\u7684\u8cc7\u6599\uff0c\u50cf\u662f tuple\u3001index\u3001log \u7b49\u7b49\uff0c\u4e0d\u540c\u7a2e\u985e\u7684\u8cc7\u6599\u901a\u5e38\u4e0d\u6703\u88ab\u5b58\u5728\u4e00\u500b page \u4e2d\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u901a\u5e38\u4f86\u8aaa\uff0c\u4e00\u500b\u6a94\u6848\u6703\u5305\u542b\u591a\u500b page\uff0c\u800c\u6bcf\u500b page \u90fd\u6709\u4e00\u500b\u7368\u7acb\u7684 page_id\uff0cDBMS \u6703\u900f\u904e indirection layer \u5c07 page_id \u8207 file path \u8ddf offset \u5c0d\u61c9\u8d77\u4f86\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u70ba\u4e86\u6eff\u8db3\u5404\u7a2e\u9700\u6c42\uff0cDBMS \u6709\u4e0d\u540c\u7684\u5132\u5b58\u9801\u9762\u7684\u65b9\u5f0f\uff0c\u50cf\u662f :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Heap File Organization"}),"\n",(0,l.jsx)(n.li,{children:"Tree File Organization"}),"\n",(0,l.jsx)(n.li,{children:"Sequential / Sorted File Organization (ISAM)"}),"\n",(0,l.jsx)(n.li,{children:"Hashing File Organization"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"heap-file-organization",children:"Heap File Organization"}),"\n",(0,l.jsx)(n.p,{children:"\u5982\u524d\u9762\u6240\u63d0\u5230\u7684\uff0c\u6211\u5011\u6709\u5f88\u591a\u65b9\u6cd5\u4f86\u7ba1\u7406\u9801\u9762\uff0c\u5176\u4e2d\u6700\u5e38\u898b\u7684\u65b9\u5f0f\u662f heap file organization\u3002"}),"\n",(0,l.jsx)(n.p,{children:"Heap file \u662f\u4e00\u500b\u7121\u5e8f\u7684\u96c6\u5408 (unordered_set)\uff0c\u88e1\u9762\u7684 page \u90fd\u662f\u96a8\u6a5f\u5b58\u5132\u7684\u3002\n\u9019\u7a2e\u7d50\u69cb\u7684\u512a\u9ede\u5728\u65bc\u63d2\u5165\u6548\u7387\u9ad8\uff0c\u4e14\u4e0d\u9700\u8981\u984d\u5916\u7dad\u8b77\u4e00\u4e9b\u5982\u6392\u5e8f\u4e4b\u985e\u7684\u7d50\u69cb\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u6709\u5169\u7a2e\u65b9\u5f0f\u53ef\u4ee5\u5b9a\u4f4d\u4e00\u500b page :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Linked List"}),"\n",(0,l.jsx)(n.li,{children:"Page Directory"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"linked-list",children:"Linked List"}),"\n",(0,l.jsx)(n.p,{children:"\u6709\u4e00\u500b header page \u5132\u5b58\u6307\u5411 free page \u548c data page \u7684\u6307\u6a19\uff0c\u4f46\u5982\u679c\u8981\u627e\u5230\u67d0\u500b page \u9700\u8981\u5f9e\u982d\u958b\u59cb\u627e\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-3.webp",caption:"Heap File Linked List Example",width:"500"}),"\n",(0,l.jsx)(n.h4,{id:"page-directory",children:"Page Directory"}),"\n",(0,l.jsx)(n.p,{children:"\u5132\u5b58\u4e00\u500b\u76ee\u9304\u9801\uff0c\u7528\u65bc\u544a\u8a34\u6211\u5011\u90a3\u4e9b page \u662f\u5b58\u5728\u54ea\u88e1\uff0cDBMS \u9700\u8981\u4fdd\u8b49 directory page \u8ddf data page \u662f\u540c\u6b65\u7684\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-4.webp",caption:"Heap File Page Directory Example"}),"\n",(0,l.jsx)(n.h2,{id:"page-layout",children:"Page Layout"}),"\n",(0,l.jsx)(n.p,{children:"\u63a5\u4e0b\u4f86\u6703\u4ecb\u7d39\u8cc7\u6599\u5728 page \u4e2d\u7684\u5132\u5b58\u65b9\u5f0f\uff0c\u6bcf\u500b page \u6703\u88ab\u5206\u6210 header \u8ddf data \u5169\u500b\u90e8\u5206\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"page-header",children:"Page Header"}),"\n",(0,l.jsx)(n.p,{children:"header \u4e2d\u6703\u5305\u542b\u4e00\u4e9b metadata\uff0c\u50cf\u662f :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Page size"}),"\n",(0,l.jsx)(n.li,{children:"DBMS version"}),"\n",(0,l.jsx)(n.li,{children:"Checksum"}),"\n",(0,l.jsx)(n.li,{children:"Transaction visibility"}),"\n",(0,l.jsx)(n.li,{children:"Compression information"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u6709\u4e9b\u8cc7\u6599\u5eab\u4e5f\u6703\u5132\u5b58\u4e00\u4e9b\u7d71\u8a08\u503c\u7b49\u7b49\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"page-data",children:"Page Data"}),"\n",(0,l.jsx)(n.p,{children:"\u5c0d\u65bc row-based \u7684 DBMS \u4f86\u8aaa\uff0cpage data \u6709\u4ee5\u4e0b\u5e7e\u7a2e\u5e38\u898b\u7684\u5132\u5b58\u65b9\u5f0f :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Tuple-oriented storage"}),"\n",(0,l.jsx)(n.li,{children:"Log-structured storage"}),"\n",(0,l.jsx)(n.li,{children:"Index-organize storage"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"tuple-oriented-storage",children:"Tuple-oriented Storage"}),"\n",(0,l.jsx)(n.p,{children:"Tuple-oriented storage \u662f\u4e00\u7a2e\u6700\u5e38\u898b\u7684\u5132\u5b58\u65b9\u5f0f\uff0c\u5b83\u6703\u4ee5 tuple \u70ba\u55ae\u4f4d\u4f86\u5132\u5b58\u8cc7\u6599\uff0c\u5e38\u898b\u7684\u5be6\u4f5c\u65b9\u5f0f\u6709\u5169\u7a2e :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Strawman Idea"}),"\n",(0,l.jsx)(n.li,{children:"Slotted Page"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Strawman Idea"})}),"\n",(0,l.jsx)(n.p,{children:"\u5728 header \u4e2d\u8a18\u9304 tuple \u7684\u6578\u91cf\uff0c\u4e26\u6301\u7e8c\u5f80\u4e0b\u5beb\u5165 tuple\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u9019\u500b\u65b9\u6cd5\u6709\u4e0d\u5c11\u7f3a\u9ede\uff0c\u7b2c\u4e00\u500b\u7f3a\u9ede\u662f\u522a\u9664 tuple \u5f8c\uff0c\u6bcf\u6b21\u65b0\u589e\u65b0\u7684 tuple \u5c31\u9700\u8981\u904d\u6b77\u6574\u500b page \u4f86\u627e\u5230\u7a7a\u4f4d\uff0c\u4e14\u7576\u6b04\u4f4d\u6709\u53ef\u8b8a\u9577\u5ea6\u7684\u6642\u6703\u7121\u6cd5\u8655\u7406\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-6.webp",caption:"Strawman Idea",width:"400"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Slotted Page"})}),"\n",(0,l.jsx)(n.p,{children:"\u5728 header \u4e2d\u6703\u7d00\u9304\u7576\u524d\u6709\u5e7e\u500b slot \u5df2\u7d93\u88ab\u4f7f\u7528\uff0c\u540c\u6642\u8a18\u9304 free space \u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u4e26\u4e14\u6709\u4e00\u500b slot array \u4f86\u8a18\u9304\u6bcf\u500b slot \u7684 offset \u8ddf length\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u8981\u65b0\u589e tuple \u6642\uff0c\u5148\u65b0\u589e\u4e00\u500b slot \u5230 slotted array \u4e2d (\u53ef\u4ee5\u91cd\u7528\u88ab\u522a\u9664\u7684 slot)\uff0c\u7136\u5f8c\u518d\u5beb\u5165 tuple\uff0c\u4e26\u7531\u5169\u7aef\u5411\u4e2d\u9593\u751f\u9577\uff0c\u9019\u6a23\u7576\u5169\u8005\u76f8\u9047\u7684\u6642\u5019\u5c31\u77e5\u9053 page \u5df2\u7d93\u6eff\u4e86\u3002\n\u8981\u522a\u9664 tuple \u6642\uff0c\u53ea\u9700\u8981\u5c07 slot array \u4e2d\u7684 slot \u6a19\u8a18\u70ba\u522a\u9664\u5373\u53ef\u3002\n\u9032\u884c\u58d3\u7e2e (\u5982 VACUUM) \u6642\uff0c\u53ef\u4ee5\u5c07\u6240\u6709\u7684 tuple \u79fb\u5230\u4e00\u7aef\uff0c\u7136\u5f8c\u66f4\u65b0 slot array \u7684 offset \u8ddf length \u5373\u53ef\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u662f\u76ee\u524d\u6700\u5e38\u898b\u7684\u5132\u5b58\u65b9\u5f0f\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-7.webp",caption:"Slotted Page",width:"400"}),"\n",(0,l.jsx)(n.h4,{id:"log-structured-storage",children:"Log-structured Storage"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u50b3\u7d71\u7684\u8cc7\u6599\u5eab\u7cfb\u7d71\u4e2d\uff0c\u8cc7\u6599\u901a\u5e38\u4ee5 slotted page \u7684\u65b9\u5f0f\u5b58\u5728\u786c\u789f\u4e2d\u3002\n\u9019\u7a2e\u8a2d\u8a08\u6709\u4e00\u500b\u6838\u5fc3\u5047\u8a2d\u662f\u786c\u789f\u8981\u53ef\u4ee5\u5c31\u5730\u66f4\u65b0 (in-place update)\u3002\n\u4e5f\u5c31\u662f\u8aaa\uff0c\u5982\u679c\u67d0\u500b tuple \u7684\u6b04\u4f4d\u9700\u8981\u66f4\u65b0\uff0c\u7cfb\u7d71\u53ea\u8981\u627e\u5230\u5b83\u6240\u5728\u7684\u9801\u9762\uff0c\u628a\u8a72\u5340\u584a\u8f09\u5165\u8a18\u61b6\u9ad4\uff0c\u4fee\u6539 tuple\uff0c\u518d\u5c07\u9801\u9762\u5beb\u56de\u78c1\u789f\u5373\u53ef\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u7136\u800c\uff0c\u9019\u7a2e\u65b9\u5f0f\u6709\u5e7e\u500b\u554f\u984c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Fragmentation : \u522a\u9664 tuple \u4e4b\u5f8c\u6703\u7559\u4e0b\u7a7a\u6d1e\uff0c\u9801\u9762\u7121\u6cd5\u88ab\u5145\u5206\u5229\u7528"}),"\n",(0,l.jsx)(n.li,{children:"Useless disk IO : \u5373\u4f7f\u53ea\u6539\u52d5\u4e00\u7b46 tuple\uff0c\u4e5f\u8981\u5c07\u6574\u500b\u9801\u9762\u8f09\u5165\u4e26\u5beb\u56de"}),"\n",(0,l.jsx)(n.li,{children:"Random disk IO : \u7576\u4e00\u6b21\u8981\u66f4\u65b0\u5f88\u591a tuple \u6642\uff0c\u6703\u9700\u8981\u8b80\u53d6\u5f88\u591a\u500b\u4e0d\u540c\u7684\u9801\u9762\uff0c\u5c0e\u81f4\u5927\u91cf\u7684\u96a8\u6a5f IO"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u4e5f\u6709\u4e00\u4e9b\u7cfb\u7d71 (\u5982 HDFS) \u6839\u672c\u4e0d\u5141\u8a31\u8986\u5beb\u820a\u6a94\u6848\uff0c\u9019\u4f7f\u5f97\u50b3\u7d71\u7684\u5132\u5b58\u65b9\u5f0f\u7121\u6cd5\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u70ba\u4e86\u89e3\u6c7a\u9019\u4e9b\u9650\u5236\uff0c\u7814\u7a76\u8005\u5f9e Log-Structured File System (LFS) \u8207 Log-Structured Merge Tree (LSM-tree) \u4e2d\u7372\u5f97\u555f\u767c\uff0c\u63d0\u51fa\u4e86 Log-Structured Storage\u3002\n\u5728\u9019\u500b\u5132\u5b58\u6a21\u5f0f\u4e0b\uff0cDBMS \u4e0d\u6703\u76f4\u63a5\u4fee\u6539\u820a\u7684\u9801\u9762\uff0c\u800c\u662f\u5c07\u66f4\u65b0\u7684\u8cc7\u6599\u4ee5 log \u7684\u5f62\u5f0f\u9644\u52a0 (append-only) \u5230\u6a94\u6848\u7684\u672b\u5c3e\uff0c\u4e26\u4e14\u5b9a\u671f\u9032\u884c\u58d3\u7e2e (compaction) \u4f86\u6574\u7406\u8cc7\u6599\u3002"}),"\n",(0,l.jsxs)(n.admonition,{type:"note",children:[(0,l.jsx)(n.p,{children:"LSM Tree \u662f\u4e00\u7a2e\u8a2d\u8a08\u67b6\u69cb\uff0c\u5b83\u6703\u5354\u8abf Memtable \u8ddf SSTable \u4f86\u5c07\u96a8\u6a5f\u5beb\u5165\u8f49\u63db\u6210\u9806\u5e8f\u5beb\u5165\uff0c\u4e26\u4e14\u5b9a\u671f\u5c07 MemTable \u7684\u8cc7\u6599\u5beb\u5165 SSTable \u4e2d\u4e26\u9032\u884c\u58d3\u7e2e\uff0c\u5f9e\u800c\u6700\u5927\u5316\u5beb\u5165\u6548\u80fd\u3002"}),(0,l.jsx)(n.p,{children:"\u7576\u8cc7\u6599\u5beb\u5165\u6642\uff0c\u5b83\u6703\u5148\u8a18\u9304 WAL (Write-Ahead Log) \u4ee5\u78ba\u4fdd\u4ea4\u6613\u7684\u6301\u4e45\u6027\uff0c\u7136\u5f8c\u5c07\u8cc7\u6599\u5beb\u5165 Memtable \u4e2d\u3002\u7576 Memtable \u6eff\u4e86\u4e4b\u5f8c\uff0c\u6703\u5c07\u5176\u5167\u5bb9\u5beb\u5165 SSTable \u4e2d\uff0c\u4e26\u4e14\u6e05\u7a7a Memtable\u3002"}),(0,l.jsx)(n.p,{children:"MemTable \u662f\u4e00\u500b\u5b58\u5728\u8a18\u61b6\u9ad4\u4e2d\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u901a\u5e38\u662f\u4f7f\u7528\u8df3\u8868 (skip list) \u6216\u662f\u5e73\u8861\u6a39 (AVL\u3001RBT) \u4f86\u5be6\u4f5c\u3002"}),(0,l.jsx)(n.p,{children:"SSTable \u662f\u4e00\u500b\u5b58\u5728\u786c\u789f\u4e0a\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u6307\u7684\u662f\u6392\u5e8f\u7684\u5b57\u4e32\u8868 (sorted string table)\uff0c\u53ea\u8981\u88ab\u5beb\u5165\u5c31\u4e0d\u6703\u518d\u88ab\u66f4\u6539\u3002"})]}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-22.webp",caption:"MemTable and SSTable Example - 1"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-21.webp",caption:"MemTable and SSTable Example - 2"}),"\n",(0,l.jsx)(n.p,{children:"\u70ba\u4e86\u6e1b\u5c11\u6240\u9700\u7684\u7a7a\u9593\uff0cDBMS \u6703\u5b9a\u671f\u5c07 log \u9032\u884c\u58d3\u7e2e\uff0c\u4e26\u4e14\u5c07\u76f8\u540c\u7684\u64cd\u4f5c\u5408\u4f75\u5728\u4e00\u8d77\u3002\n\u5728\u7d93\u904e\u5408\u4f75\u5f8c\uff0c\u6211\u5011\u5c31\u4e0d\u9700\u8981\u7dad\u8b77\u539f\u672c\u7684\u6642\u9593\u9806\u5e8f\u4e86 (\u56e0\u70ba\u6bcf\u500b key \u90fd\u53ea\u5269\u4e0b\u4e00\u500b value)\uff0cDBMS \u6703\u5c07\u5176\u4f9d\u7167 id \u4f86\u9032\u884c\u6392\u5e8f\u4e26\u5b58\u5165\u786c\u789f\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u63d0\u5230\u7684 SSTable\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-11.webp",caption:"Log-Structured Storage Compaction"}),"\n",(0,l.jsx)(n.p,{children:"\u58d3\u7e2e\u7684\u65b9\u6cd5\u6709\u5169\u7a2e :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Universal compaction : \u5c07\u5927\u5c0f\u76f8\u8fd1\u7684\u4e00\u7d44 SSTable \u5408\u4f75\u6210\u4e00\u500b\u66f4\u5927\u7684 SSTable\u3002"}),"\n",(0,l.jsx)(n.li,{children:"Level compaction : \u5c07 SSTable \u5206\u6210\u591a\u500b level\uff0c\u4e26\u4e14\u5c07\u8f03\u5c0f\u7684 level \u5408\u4f75\u5230\u8f03\u5927\u7684 level \u4e2d\u3002"}),"\n"]}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-12.webp",caption:"Universal Compaction and Level Compaction"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u67e5\u8a62\u6642\uff0cLSM Tree \u7684\u67e5\u8a62\u9806\u5e8f\u5982\u4e0b :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5148\u5728 MemTable \u4e2d\u5c0b\u627e"}),"\n",(0,l.jsx)(n.li,{children:"\u67e5\u8a62 L0 \u5c64\u7684 SSTable\uff0cL0 \u7684 SSTable \u901a\u5e38\u662f\u76f4\u63a5\u5f9e MemTable \u5237\u4e0b\u4f86\u7684\uff0c\u6a94\u6848\u4e4b\u9593 key \u7684\u7bc4\u570d\u53ef\u80fd\u91cd\u758a\uff0c\u6240\u4ee5\u9700\u8981\u9010\u4e00\u6aa2\u67e5\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u67e5\u8a62 L1, L2, ... \u5c64\u7684 SSTable\uff0c\u9019\u4e9b\u5c64\u7d1a\u7684 SSTable \u7d93\u904e Compaction\uff0c\u540c\u4e00\u5c64\u5167 key \u7684\u7bc4\u570d\u4e92\u4e0d\u91cd\u758a\u3002\u56e0\u6b64\uff0c\u7cfb\u7d71\u53ef\u4ee5\u900f\u904e key \u7684\u7bc4\u570d\u5224\u65b7\u51fa\u76ee\u6a19 key \u6700\u591a\u53ea\u53ef\u80fd\u5b58\u5728\u65bc\u5176\u4e2d\u4e00\u500b\u6a94\u6848\u88e1\uff0c\u53ea\u9700\u5c0d\u90a3\u4e00\u500b\u6a94\u6848\u57f7\u884c\u4e0a\u8ff0\u7684\u67e5\u8a62\u6d41\u7a0b\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Log-structured storage \u56e0\u70ba RockDB \u7684\u51fa\u73fe\u800c\u8b8a\u5f97\u76f8\u7576\u5e38\u898b\uff0c\u4f46\u4e5f\u6709\u4e00\u4e9b\u554f\u984c :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Write Amplification : \u7576\u6211\u5011\u5beb\u5165\u4e00\u500b\u8cc7\u6599\u6642\uff0c\u5be6\u969b\u4e0a\u6703\u5beb\u5165\u591a\u6b21\uff0c\u8b6c\u5982\u8aaa\u5408\u4f75 SSTable"}),"\n",(0,l.jsx)(n.li,{children:"Compaction Overhead : \u58d3\u7e2e\u6703\u4f54\u7528\u5927\u91cf\u7684 CPU \u8ddf IO \u8cc7\u6e90"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"index-organized-storage",children:"Index-organized Storage"}),"\n",(0,l.jsx)(n.p,{children:"\u4e0d\u7ba1\u662f tuple-oriented storage \u9084\u662f log-structured storage\uff0c\u90fd\u9700\u8981\u900f\u904e index \u4f86\u9032\u884c\u67e5\u8a62\u3002\n\u5728 index-organized storage \u4e2d\uff0c\u6211\u5011\u6703\u5c07 tuple \u7576\u6210 index \u4e2d\u7684\u503c\uff0c\u4e26\u4e14\u4f7f\u7528\u985e\u4f3c slot page \u7684\u65b9\u5f0f\u4f86\u5132\u5b58\uff0c\u540c\u6642\u4f9d\u64da key \u4f86\u9032\u884c\u6392\u5e8f\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-13.webp",caption:"Index-Organized Storage"}),"\n",(0,l.jsx)(n.h2,{id:"tuple-layout",children:"Tuple Layout"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 tuple-oriented storage \u4e2d\uff0ctuple \u4e5f\u662f\u7531 header \u548c data \u5169\u500b\u90e8\u5206\u7d44\u6210\u3002"}),"\n",(0,l.jsx)(n.p,{children:"DBMS \u6703\u5c07\u6bcf\u500b tuple \u8a2d\u5b9a\u4e00\u500b id \u4ee3\u8868\u4ed6\u5728\u8cc7\u6599\u5eab\u4e2d\u7684\u5177\u9ad4\u4f4d\u7f6e\uff0c\u901a\u5e38\u662f\u7531 page_id + offset/slot \u7d44\u5408\u800c\u6210\uff0c\u5982 PostgreSQL \u4e2d\u7684 ctid\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-SQL",children:"-- postgres 16\nCREATE TABLE test (id INT, name VARCHAR(10));\nINSERT INTO test VALUES (1, 'a'), (2, 'b'), (3, 'c');\n\nSELECT ctid, * FROM test;\n-- result\nctid  | id | name\n-------+----+------\n (0,1) |  1 | a\n (0,2) |  2 | b\n (0,3) |  3 | c\n(3 rows)\n-- ctid \u4ee3\u8868 (page, slot) \u7684\u4f4d\u7f6e\uff0c\u5982 (0,1) \u4ee3\u8868 page 0 \u7684\u7b2c\u4e00\u500b slot\n\nDELETE FROM test WHERE id = 2;\nSELECT ctid, * FROM test;\n-- result\nctid  | id | name\n-------+----+------\n (0,1) |  1 | a\n (0,3) |  3 | c\n(2 rows)\n-- \u53ef\u4ee5\u770b\u5230 id = 2 \u7684 tuple \u88ab\u522a\u9664\u4e86\uff0c\u4f46 id = 3 \u7684 ctid \u4ecd\u7136\u662f (0,3)\n\nINSERT INTO test VALUES (2, 'b');\nSELECT ctid, * FROM test;\n-- result\nctid  | id | name\n-------+----+------\n (0,1) |  1 | a\n (0,3) |  3 | c\n (0,4) |  2 | b\n(3 rows)\n-- \u53ef\u4ee5\u770b\u5230 id = 2 \u7684 ctid \u662f (0,4)\n\nVACUUM FULL test;\nSELECT ctid, * FROM test;\n-- result\nctid  | id | name\n-------+----+------\n (0,1) |  1 | a\n (0,2) |  3 | c\n (0,3) |  2 | b\n(3 rows)\n-- \u57f7\u884c VACUUM FULL \u4e4b\u5f8c\uff0cctid \u6703\u91cd\u65b0\u6392\u5e8f\n"})}),"\n",(0,l.jsx)(n.h3,{id:"tuple-header",children:"Tuple Header"}),"\n",(0,l.jsx)(n.p,{children:"header \u4e2d\u6703\u5305\u542b\u4e00\u4e9b metadata\uff0c\u50cf\u662f :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Bitmap for NULL columns (\u54ea\u4e9b\u6b04\u4f4d\u662f NULL)"}),"\n",(0,l.jsx)(n.li,{children:"Transaction information (transaction id, visibility information)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"tuple-data",children:"Tuple Data"}),"\n",(0,l.jsx)(n.p,{children:"DBMS \u9700\u8981\u4fdd\u8b49\u9019\u4e9b\u8cc7\u6599\u662f\u5c0d\u9f4a\u7684\uff0c\u4ee5\u514d\u51fa\u73fe\u4e00\u4e9b\u975e\u9810\u671f\u7684\u884c\u70ba\u4e26\u4e14\u63d0\u5347\u5b58\u53d6\u6548\u7387\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-14.webp",caption:"Tuple Data Alignment"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u822c\u4f86\u8aaa\uff0c\u5982\u679c\u8b80\u5230\u908a\u754c\u7684\u8cc7\u6599\uff0c\u6703\u4f9d\u64da\u96fb\u8166\u7684\u67b6\u69cb\u6709\u4e0d\u540c\u7684\u8655\u7406\u65b9\u5f0f :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Perform Extra Reads : \u57f7\u884c\u5169\u6b21\u8b80\u53d6\u4e26\u4e14\u5408\u4f75"}),"\n",(0,l.jsx)(n.li,{children:"Random Reads : \u96a8\u6a5f\u8fd4\u56de\u4e0d\u6b63\u78ba\u7684\u7d50\u679c"}),"\n",(0,l.jsx)(n.li,{children:"Reject : \u62d2\u7d55\u8b80\u53d6"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8981\u8655\u7406\u9019\u500b\u554f\u984c\uff0c\u6709\u5169\u7a2e\u89e3\u6c7a\u65b9\u5f0f :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Padding"}),"\n",(0,l.jsx)(n.li,{children:"Reordering"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"padding",children:"Padding"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u6bcf\u500b tuple \u7684\u5f8c\u9762\u52a0\u4e0a padding\uff0c\u4f7f\u5176\u5c0d\u9f4a\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-15.webp",caption:"Padding"}),"\n",(0,l.jsx)(n.h4,{id:"reordering",children:"Reordering"}),"\n",(0,l.jsx)(n.p,{children:"\u5c07\u8cc7\u6599\u91cd\u65b0\u6392\u5e8f (\u53ef\u80fd\u9700\u8981\u518d\u586b\u5145)\uff0c\u4f7f\u5176\u5c0d\u9f4a\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-16.webp",caption:"Reordering"}),"\n",(0,l.jsx)(n.h2,{id:"data-representation",children:"Data Representation"}),"\n",(0,l.jsx)(n.p,{children:"\u6700\u5f8c\u5c31\u4f86\u4ecb\u7d39\u4e0d\u540c\u7684\u8cc7\u6599\u578b\u614b\u662f\u5982\u4f55\u88ab\u5132\u5b58\u7684\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-17.webp",caption:"Data Representation Overview"}),"\n",(0,l.jsx)(n.h3,{id:"integer",children:"Integer"}),"\n",(0,l.jsx)(n.p,{children:"\u4f7f\u7528 C/C++ \u539f\u751f\u7684 type \u4f86\u8868\u793a\uff0c\u662f\u56fa\u5b9a\u9577\u5ea6\u7684\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982 ",(0,l.jsx)(n.code,{children:"INTEGER"}),"\u3001",(0,l.jsx)(n.code,{children:"BIGINT"}),"\u3001",(0,l.jsx)(n.code,{children:"SMALLINT"}),"\u3001",(0,l.jsx)(n.code,{children:"TINYINT"})]}),"\n",(0,l.jsx)(n.h3,{id:"variable-precision-number",children:"Variable Precision Number"}),"\n",(0,l.jsxs)(n.p,{children:["\u540c\u6a23\u4f7f\u7528 C/C++ \u539f\u751f\u7684 type \u4f86\u8868\u793a\uff0c\u4e5f\u662f\u56fa\u5b9a\u9577\u5ea6\uff0c\u4f46\u662f\u8ddf C/C++ \u4e00\u6a23\uff0c\u6703\u9047\u5230\u7cbe\u78ba\u5ea6\u7684\u554f\u984c\uff0c\u5982 ",(0,l.jsx)(n.code,{children:"FLOAT"}),"\u3001",(0,l.jsx)(n.code,{children:"DOUBLE"}),"\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(int argc, char* argv[]) {\n    float x = 0.1;\n    float y = 0.2;\n    printf("x+y = %.20f\\n", x+y)\n    printf("0.3 = %.20f\\n", 0.3)\n}\n\n// =>\n// x+y = 0.30000001192092895508\n// 0.3 = 0.29999999999999998890\n'})}),"\n",(0,l.jsx)(n.h3,{id:"fixed-precision-number",children:"Fixed Precision Number"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679c\u9700\u8981\u7cbe\u78ba\u7684\u6578\u5b57\uff0c\u53ef\u4ee5\u4f7f\u7528 fixed precision number\uff0c\u4f46\u662f\u5728\u8a08\u7b97\u4e0a\u6703\u6bd4\u8f03\u6162\uff0c\u901a\u5e38\u6bcf\u500b DBMS \u90fd\u6703\u81ea\u5df1\u5be6\u4f5c (\u5982\u52a0\u6e1b\u6cd5\u548c\u5132\u5b58\u65b9\u5f0f)\uff0c\u6240\u9700\u7684\u7a7a\u9593\u6703\u4f9d\u7167\u7cbe\u78ba\u5ea6\u800c\u6709\u6240\u4e0d\u540c\uff0c\u5982 ",(0,l.jsx)(n.code,{children:"NUMERIC"}),"\u3001",(0,l.jsx)(n.code,{children:"DECIMAL"}),"\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:"// postgresql NUMERIC\ntypedef unsigned char NumericDigit;\ntypedef struct {\n    int ndigits;           // # of Digits\n    int weight;            // Weight of 1st Digit\n    int scale;             // Scale Factor\n    int sign;              // Positive/Negative/NaN\n    NumericDigit * digits; // Digit Storage\n} numeric;\n"})}),"\n",(0,l.jsx)(n.h3,{id:"null-data-type",children:"NULL Data Type"}),"\n",(0,l.jsx)(n.p,{children:"\u6709\u4e09\u500b\u5e38\u898b\u7684\u65b9\u5f0f\u4f86\u8868\u793a NULL :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"NULL column bitmap header : \u5728 header \u4e2d\u6709\u4e00\u500b bitmap \u4f86\u8868\u793a\u54ea\u4e9b column \u662f NULL (\u6700\u5e38\u898b)"}),"\n",(0,l.jsx)(n.li,{children:"Special value : \u7528\u4e00\u500b\u7279\u6b8a\u7684\u503c\u4f86\u8868\u793a NULL \u5982 INT32_MIN"}),"\n",(0,l.jsx)(n.li,{children:"Per attribute NULL flag : \u5728\u6bcf\u4e00\u500b\u5c6c\u6027\u524d\u52a0\u5165\u4e00\u500b flag \u4f86\u8868\u793a\u662f\u5426\u70ba NULL\uff0c\u6703\u7834\u58de alignment (\u975e\u5e38\u5c11\u898b)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"large-value",children:"Large Value"}),"\n",(0,l.jsx)(n.p,{children:"\u5927\u591a\u6578 DBMS \u4e0d\u652f\u63f4\u5927\u65bc page size \u7684 tuple\uff0c\u6240\u4ee5\u6211\u5011\u5fc5\u9808\u5c07\u8cc7\u6599\u5132\u5b58\u5728\u7368\u7acb\u7684 overflow / toast page\uff0c\u4e26\u4e14\u5728 tuple \u4e2d\u5132\u5b58\u4e00\u500b pointer \u6307\u5411\u9019\u500b page\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-18.webp",caption:"Large Value Storage"}),"\n",(0,l.jsx)(n.h3,{id:"external-value-store",children:"External Value Store"}),"\n",(0,l.jsx)(n.p,{children:"\u6709\u4e9b\u8cc7\u6599\u5eab\u53ef\u4ee5\u5b58\u53d6\u5916\u90e8\u7684\u6a94\u6848\uff0c\u9019\u4e9b\u6a94\u6848\u6703\u88ab\u653e\u5728\u672c\u5730\u7684\u8def\u5f91\u4e26\u5132\u5b58 URL\uff0c\u8cc7\u6599\u5eab\u4e0d\u80fd\u505a\u4efb\u4f55\u66f4\u6539\uff0c\u4e5f\u4e0d\u4fdd\u8b49 transaction\u3002"}),"\n",(0,l.jsx)(a,{src:"/img/cmu15-445/c03/image-19.webp",caption:"External Value Store"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}function g(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>s});var a=i(6540);const l={},r=a.createContext(l);function t(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);